/*! For license information please see main.6cf613a0.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},67:(e,t,n)=>{e.exports=n(612)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,w(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),j(s,t,i,"",function(e){return e})):null!=s&&(_(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=j(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=j(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},N={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},403:(e,t,n)=>{var r;n.d(t,{E_:()=>l,F3:()=>a,Ii:()=>s}),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));class i extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const o=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},o=n.Plugins=n.Plugins||{},s=()=>null!==t?t.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),a=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},l=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=s,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==s(),n.isPluginAvailable=e=>{const t=l.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(s()))||!!a(e)},n.registerPlugin=function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=l.get(e);if(u)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),u.proxy;const d=s(),h=a(e);let f;const p=o=>{let s;const a=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];const p=(async()=>(!f&&d in c?f=f="function"===typeof c[d]?await c[d]():c[d]:null!==t&&!f&&"web"in c&&(f=f="function"===typeof c.web?await c.web():c.web),f))().then(t=>{const a=((t,o)=>{var s,a;if(!h){if(t)return null===(a=t[o])||void 0===a?void 0:a.bind(t);throw new i('"'.concat(e,'" plugin is not implemented on ').concat(d),r.Unimplemented)}{const r=null===h||void 0===h?void 0:h.methods.find(e=>o===e.name);if(r)return"promise"===r.rtype?t=>n.nativePromise(e,o.toString(),t):(t,r)=>n.nativeCallback(e,o.toString(),t,r);if(t)return null===(s=t[o])||void 0===s?void 0:s.bind(t)}})(t,o);if(a){const e=a(...l);return s=null===e||void 0===e?void 0:e.remove,e}throw new i('"'.concat(e,".").concat(o,'()" is not implemented on ').concat(d),r.Unimplemented)});return"addListener"===o&&(p.remove=async()=>s()),p};return a.toString=()=>"".concat(o.toString(),"() { [capacitor code] }"),Object.defineProperty(a,"name",{value:o,writable:!1,configurable:!1}),a},m=p("addListener"),g=p("removeListener"),y=(e,t)=>{const n=m({eventName:e},t),r=async()=>{const r=await n;g({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return h?y:m;case"removeListener":return g;default:return p(t)}}});return o[e]=v,l.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(c),...h?[d]:[]])}),v},n.Exception=i,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},s=(e=>e.Capacitor=o(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),a=s.registerPlugin;class l{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new s.Exception(e,r.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new s.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const c=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d extends l{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=u(n).trim(),r=u(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=c(e.key),n=c(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),i=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(i,"; ").concat(o,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}a("CapacitorCookies",{web:()=>new d});const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),n=Object.keys(e).map(e=>e.toLocaleLowerCase());return n.reduce((n,r,i)=>(n[r]=e[t[i]],n),{})}(e.headers),i=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(i.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class f extends l{async request(e){const t=h(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((e,n)=>{const[r,i]=n;let o,s;return Array.isArray(i)?(s="",i.forEach(e=>{o=t?encodeURIComponent(e):e,s+="".concat(r,"=").concat(o,"&")}),s.slice(0,-1)):(o=t?encodeURIComponent(i):i,s="".concat(r,"=").concat(o)),"".concat(e,"&").concat(s)},"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,i=await fetch(r,t),o=i.headers.get("content-type")||"";let s,a,{responseType:l="text"}=i.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":a=await i.blob(),s=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(a);break;case"json":s=await i.json();break;default:s=await i.text()}const c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:s,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}a("CapacitorHttp",{web:()=>new f})},579:(e,t,n)=>{e.exports=n(153)},612:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&N(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(_),_=-1),p=!0;var o=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!j());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&N(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,C=null,_=-1,T=5,I=-1;function j(){return!(t.unstable_now()-I<T)}function R(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?k():(E=!1,C=null)}}else E=!1}if("function"===typeof b)k=function(){b(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=R,k=function(){P.postMessage(null)}}else k=function(){y(R,0)};function D(e){C=e,E||(E=!0,k())}function N(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(_),_=-1):g=!0,N(w,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},730:(e,t,n)=>{var r=n(43),i=n(67);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var L,M=Object.assign;function O(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function B(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case j:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ee=null;function Ce(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function _e(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Te(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function je(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==ke||null!==Ee)&&(je(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){De=!1}function ze(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Oe=!1,Fe=null,Ue={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,i,o,s,a,l){Le=!1,Me=null,ze.apply(Ue,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Et,Ct,_t=!1,Tt=[],It=null,jt=null,Rt=null,At=new Map,Pt=new Map,Dt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){Ot(e)&&n.delete(t)}function Ut(){_t=!1,null!==It&&Ot(It)&&(It=null),null!==jt&&Ot(jt)&&(jt=null),null!==Rt&&Ot(Rt)&&(Rt=null),At.forEach(Ft),Pt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==jt&&Bt(jt,e),null!==Rt&&Bt(Rt,e),At.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Vt=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Gt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Kt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Yt,n),zt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return jt=Lt(jt,e,t,n,r,i),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return At.set(o,Lt(At.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(zt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Qt(e,t,n,r))&&qr(e,t,r,Yt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=vi(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(M({},fn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return En}var _n=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(_n),In=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(An),Dn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,zn=null;u&&"documentMode"in document&&(zn=document.documentMode);var Ln=u&&"TextEvent"in window&&!zn,Mn=u&&(!Nn||zn&&8<zn&&11>=zn),On=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){Or(e,0)}function Qn(e){if(K(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ae(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function or(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Er={};function Cr(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Cr("animationend"),Tr=Cr("animationiteration"),Ir=Cr("animationstart"),jr=Cr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Nr=Ar[Dr];Pr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Pr(_r,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(jr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Me;Le=!1,Me=null,Oe||(Oe=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}}}if(Oe)throw e=Fe,Oe=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,s.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ae(function(){var r=o,i=we(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case _r:case Tr:case Ir:l=yn;break;case jr:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:xi(l),f=null==c?a:xi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Yr(s,a,l,u,!1),null!==c&&null!==d&&Yr(s,d,c,u,!0)}if("select"===(l=(a=r?xi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(qn(a))if(Jn)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?xi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(s,n,i)}var v;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Wn=!0)),0<(y=Gr(r,b)).length&&(b=new xn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,On);case"textInput":return(e=t.data)===On&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Nn&&Un(e,t)?(e=en(),Zt=$t=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Or(s,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(Hr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(Hr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var Si=[],ki=-1;function Ei(e){return{current:e}}function Ci(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function _i(e,t){ki++,Si[ki]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),ji=Ei(!1),Ri=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ci(ji),Ci(Ii)}function Ni(e,t,n){if(Ii.current!==Ti)throw Error(o(168));_i(Ii,t),_i(ji,n)}function zi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ii.current,_i(Ii,e),_i(ji,ji.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=zi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ci(ji),Ci(Ii),_i(Ii,e)):Ci(ji),_i(ji,n)}var Oi=null,Fi=!1,Ui=!1;function Bi(e){null===Oi?Oi=[e]:Oi.push(e)}function Wi(){if(!Ui&&null!==Oi){Ui=!0;var e=0,t=bt;try{var n=Oi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,Fi=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),Ke(Ze,Wi),i}finally{bt=t,Ui=!1}}return null}var Vi=[],qi=0,Hi=null,Gi=0,Ki=[],Yi=0,Qi=null,Xi=1,Ji="";function $i(e,t){Vi[qi++]=Gi,Vi[qi++]=Hi,Hi=e,Gi=t}function Zi(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Ji,Ki[Yi++]=Qi,Qi=e;var r=Xi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,Ji=o+e}else Xi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Vi[--qi],Vi[qi]=null,Gi=Vi[--qi],Vi[qi]=null;for(;e===Qi;)Qi=Ki[--Yi],Ki[Yi]=null,Ji=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=Ei(null),bo=null,xo=null,wo=null;function So(){wo=xo=bo=null}function ko(e){var t=vo.current;Ci(vo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Co(e,t){bo=e,wo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function _o(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===bo)throw Error(o(308));xo=e,bo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var To=null;function Io(e){null===To?To=[e]:To.push(e)}function jo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ro(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ro(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Mo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Oo(e,t,n,r){var i=e.updateQueue;Ao=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Ao=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=d}}function Fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Uo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wo={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),o=No(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(oc(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),o=No(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(oc(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rc(),r=ic(e),i=No(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(oc(t,e,r,n),Lo(t,e,r))}};function Vo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function qo(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=_o(o):(i=Pi(t)?Ri:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uo,Po(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=_o(o):(o=Pi(t)?Ri:Ii.current,i.context=Ai(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Wo.enqueueReplaceState(i,i.state,null),Oo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Uo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Qo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case S:return(t=Bc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||z(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||z(n))return null!==i?null:d(e,t,n,r,null);Yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||z(r))return d(t,e=e.get(n)||null,r,i,null);Yo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),io&&$i(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&$i(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,m),c}function g(i,a,l,c){var u=z(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),io&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return io&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),io&&$i(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===k){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Ko(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===k?((o=Oc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=Ko(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(z(s))return g(r,o,s,l);Yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Uc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Jo=Xo(!0),$o=Xo(!1),Zo={},es=Ei(Zo),ts=Ei(Zo),ns=Ei(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(_i(ns,t),_i(ts,e),_i(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(es),_i(es,t)}function os(){Ci(es),Ci(ts),Ci(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(_i(ts,e),_i(es,n))}function as(e){ts.current===e&&(Ci(es),Ci(ts))}var ls=Ei(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var hs=x.ReactCurrentDispatcher,fs=x.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,ys=null,vs=!1,bs=!1,xs=0,ws=0;function Ss(){throw Error(o(321))}function ks(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Es(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?la:ca,e=n(r,i),bs){s=0;do{if(bs=!1,xs=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,t.updateQueue=null,hs.current=ua,e=n(r,i)}while(bs)}if(hs.current=aa,t=null!==gs&&null!==gs.next,ps=0,ys=gs=ms=null,vs=!1,t)throw Error(o(300));return e}function Cs(){var e=0!==xs;return xs=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=e:ys=ys.next=e,ys}function Ts(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ys?ms.memoizedState:ys.next;if(null!==t)ys=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=e:ys=ys.next=e}return ys}function Is(e,t){return"function"===typeof t?t(e):t}function js(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ms.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,Fl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Rs(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function As(){}function Ps(e,t){var n=ms,r=Ts(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,qs(zs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Fs(9,Ns.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&ps)||Ds(n,t,i)}return i}function Ds(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Ls(t)&&Ms(e)}function zs(e,t,n){return n(function(){Ls(t)&&Ms(e)})}function Ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ms(e){var t=Ro(e,1);null!==t&&oc(t,e,1,-1)}function Os(e){var t=_s();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,ms,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Us(){return Ts().memoizedState}function Bs(e,t,n,r){var i=_s();ms.flags|=e,i.memoizedState=Fs(1|t,n,void 0,void 0===r?null:r)}function Ws(e,t,n,r){var i=Ts();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&ks(r,s.deps))return void(i.memoizedState=Fs(t,n,o,r))}ms.flags|=e,i.memoizedState=Fs(1|t,n,o,r)}function Vs(e,t){return Bs(8390656,8,e,t)}function qs(e,t){return Ws(2048,8,e,t)}function Hs(e,t){return Ws(4,2,e,t)}function Gs(e,t){return Ws(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ws(4,4,Ks.bind(null,t,e),n)}function Qs(){}function Xs(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $s(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=n,fs.transition=r}}function ta(){return Ts().memoizedState}function na(e,t,n){var r=ic(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))oa(t,n);else if(null!==(n=jo(e,t,n,r))){oc(n,e,r,rc()),sa(n,t,r)}}function ra(e,t,n){var r=ic(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))oa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=jo(e,t,i,r))&&(oc(n,e,r,i=rc()),sa(n,t,r))}}function ia(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function oa(e,t){bs=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var aa={readContext:_o,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},la={readContext:_o,useCallback:function(e,t){return _s().memoizedState=[e,void 0===t?null:t],e},useContext:_o,useEffect:Vs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=_s();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_s();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=na.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_s().memoizedState=e},useState:Os,useDebugValue:Qs,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=Os(!1),t=e[0];return e=Zs.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=_s();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&ps)||Ds(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Vs(zs.bind(null,r,s,e),[e]),r.flags|=2048,Fs(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_s(),t=Pl.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=xs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:_o,useCallback:Xs,useContext:_o,useEffect:qs,useImperativeHandle:Ys,useInsertionEffect:Hs,useLayoutEffect:Gs,useMemo:Js,useReducer:js,useRef:Us,useState:function(){return js(Is)},useDebugValue:Qs,useDeferredValue:function(e){return $s(Ts(),gs.memoizedState,e)},useTransition:function(){return[js(Is)[0],Ts().memoizedState]},useMutableSource:As,useSyncExternalStore:Ps,useId:ta,unstable_isNewReconciler:!1},ua={readContext:_o,useCallback:Xs,useContext:_o,useEffect:qs,useImperativeHandle:Ys,useInsertionEffect:Hs,useLayoutEffect:Gs,useMemo:Js,useReducer:Rs,useRef:Us,useState:function(){return Rs(Is)},useDebugValue:Qs,useDeferredValue:function(e){var t=Ts();return null===gs?t.memoizedState=e:$s(t,gs.memoizedState,e)},useTransition:function(){return[Rs(Is)[0],Ts().memoizedState]},useMutableSource:As,useSyncExternalStore:Ps,useId:ta,unstable_isNewReconciler:!1};function da(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pa="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=No(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Yl=r),fa(0,t)},n}function ga(e,t,n){(n=No(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fa(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ya(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ba(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=No(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xa=x.ReactCurrentOwner,wa=!1;function Sa(e,t,n,r){t.child=null===e?$o(t,null,n,r):Jo(t,e.child,n,r)}function ka(e,t,n,r,i){n=n.render;var o=t.ref;return Co(t,i),r=Es(e,t,n,r,o,i),n=Cs(),null===e||wa?(io&&n&&eo(t),t.flags|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||zc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Lc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ia(e,t,n,r,i)}function _a(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Ll,zl),zl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Ll,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,_i(Ll,zl),zl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,_i(Ll,zl),zl|=r;return Sa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var o=Pi(n)?Ri:Ii.current;return o=Ai(t,o),Co(t,i),n=Es(e,t,n,r,o,i),r=Cs(),null===e||wa?(io&&r&&eo(t),t.flags|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function ja(e,t,n,r,i){if(Pi(n)){var o=!0;Li(t)}else o=!1;if(Co(t,i),null===t.stateNode)Ga(e,t),qo(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=_o(c):c=Ai(t,c=Pi(n)?Ri:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Ho(t,s,r,c),Ao=!1;var h=t.memoizedState;s.state=h,Oo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||ji.current||Ao?("function"===typeof u&&(Bo(t,n,u,r),l=t.memoizedState),(a=Ao||Vo(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Do(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yo(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=_o(l):l=Ai(t,l=Pi(n)?Ri:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Ho(t,s,r,l),Ao=!1,h=t.memoizedState,s.state=h,Oo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||ji.current||Ao?("function"===typeof f&&(Bo(t,n,f,r),p=t.memoizedState),(c=Ao||Vo(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,o,i)}function Ra(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),Ka(e,t,o);r=t.stateNode,xa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,a,o)):Sa(e,t,a,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),is(e,t.containerInfo)}function Pa(e,t,n,r,i){return po(),mo(i),t.flags|=256,Sa(e,t,n,r),t.child}var Na,za,La,Ma,Oa={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),_i(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Oc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Oa,e):Ba(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(s=Oc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Oa,s);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Wa(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ro(e,i),oc(r,e,i,-1))}return vc(),Wa(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Ji,Ki[Yi++]=Qi,Xi=e.id,Ji=e.overflow,Qi=t),t=Ba(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lc(r,a):(a=Oc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Oa,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ba(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function qa(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qa(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qa(t,!0,n,null,o);break;case"together":qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(t),null;case 1:case 17:return Pi(t.type)&&Di(),Qa(t),null;case 3:return r=t.stateNode,os(),Ci(ji),Ci(Ii),ds(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(cc(oo),oo=null))),za(e,t),Qa(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Qa(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<zr.length;i++)Fr(zr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<zr.length;i++)Fr(zr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Qa(t),null;case 13:if(Ci(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qa(t),s=!1}else null!==oo&&(cc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ml&&(Ml=3):vc())),null!==t.updateQueue&&(t.flags|=4),Qa(t),null);case 4:return os(),za(e,t),null===e&&Wr(t.stateNode.containerInfo),Qa(t),null;case 10:return ko(t.type._context),Qa(t),null;case 19:if(Ci(ls),null===(s=t.memoizedState))return Qa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ya(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ya(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Hl&&(t.flags|=128,r=!0,Ya(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Qa(t),null}else 2*Je()-s.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ya(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=ls.current,_i(ls,r?1&n|2:1&n),t):(Qa(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&zl)&&(Qa(t),6&t.subtreeFlags&&(t.flags|=8192)):Qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ja(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ci(ji),Ci(Ii),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ci(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ls),null;case 4:return os(),null;case 10:return ko(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},za=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Za=!1,el="function"===typeof WeakSet?WeakSet:Set,tl=null;function nl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function rl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var il=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&rl(t,n,o)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ll(e){var t=e.alternate;null!==t&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||nl(n,t);case 6:var r=fl,i=pl;fl=null,ml(e,t,n),pl=i,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(fl,n.stateNode));break;case 4:r=fl,i=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&rl(n,t,s),i=i.next}while(i!==r)}ml(e,t,n);break;case 1:if(!Za&&(nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,ml(e,t,n),Za=r):ml(e,t,n);break;default:ml(e,t,n)}}function yl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new el),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(o(160));gl(s,a,i),fl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),xl(e),4&r){try{ol(3,e,e.return),sl(3,e)}catch(g){Tc(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:vl(t,e),xl(e),512&r&&null!==n&&nl(n,n.return);break;case 5:if(vl(t,e),xl(e),512&r&&null!==n&&nl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Tc(e,e.return,g)}}break;case 6:if(vl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Tc(e,e.return,g)}}break;case 3:if(vl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:vl(t,e),xl(e);break;case 13:vl(t,e),xl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(ql=Je())),4&r&&yl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||d,vl(t,e),Za=u):vl(t,e),xl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(tl=e,d=e.child;null!==d;){for(h=tl=d;null!==tl;){switch(p=(f=tl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:nl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(null!==f.memoizedState){El(h);continue}}null!==p?(p.return=f,tl=p):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),xl(e),4&r&&yl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),hl(e,ul(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;dl(e,ul(e),s);break;default:throw Error(o(161))}}catch(Da){Tc(e,e.return,Da)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){tl=e,Sl(e,t,n)}function Sl(e,t,n){for(var r=0!==(1&e.mode);null!==tl;){var i=tl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=$a;var c=Za;if($a=s,(Za=l)&&!c)for(tl=i;null!==tl;)l=(s=tl).child,22===s.tag&&null!==s.memoizedState?Cl(i):null!==l?(l.return=s,tl=l):Cl(i);for(;null!==o;)tl=o,Sl(o,t,n),o=o.sibling;tl=i,$a=a,Za=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,tl=o):kl(e)}}function kl(e){for(;null!==tl;){var t=tl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Fo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(o(163))}Za||512&t.flags&&al(t)}catch(f){Tc(t,t.return,f)}}if(t===e){tl=null;break}if(null!==(n=t.sibling)){n.return=t.return,tl=n;break}tl=t.return}}function El(e){for(;null!==tl;){var t=tl;if(t===e){tl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tl=n;break}tl=t.return}}function Cl(e){for(;null!==tl;){var t=tl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Da){Tc(t,n,Da)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Da){Tc(t,i,Da)}}var o=t.return;try{al(t)}catch(Da){Tc(t,o,Da)}break;case 5:var s=t.return;try{al(t)}catch(Da){Tc(t,s,Da)}}}catch(Da){Tc(t,t.return,Da)}if(t===e){tl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,tl=a;break}tl=t.return}}var _l,Tl=Math.ceil,Il=x.ReactCurrentDispatcher,jl=x.ReactCurrentOwner,Rl=x.ReactCurrentBatchConfig,Al=0,Pl=null,Dl=null,Nl=0,zl=0,Ll=Ei(0),Ml=0,Ol=null,Fl=0,Ul=0,Bl=0,Wl=null,Vl=null,ql=0,Hl=1/0,Gl=null,Kl=!1,Yl=null,Ql=null,Xl=!1,Jl=null,$l=0,Zl=0,ec=null,tc=-1,nc=0;function rc(){return 0!==(6&Al)?Je():-1!==tc?tc:tc=Je()}function ic(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Nl?Nl&-Nl:null!==go.transition?(0===nc&&(nc=mt()),nc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function oc(e,t,n,r){if(50<Zl)throw Zl=0,ec=null,Error(o(185));yt(e,n,r),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Ul|=n),4===Ml&&uc(e,Nl)),sc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Hl=Je()+500,Fi&&Wi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Pl?Nl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fi=!0,Bi(e)}(dc.bind(null,e)):Bi(dc.bind(null,e)),si(function(){0===(6&Al)&&Wi()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(tc=-1,nc=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=bc(e,r);else{t=r;var i=Al;Al|=2;var s=yc();for(Pl===e&&Nl===t||(Gl=null,Hl=Je()+500,mc(e,t));;)try{wc();break}catch(l){gc(e,l)}So(),Il.current=s,Al=i,null!==Dl?t=0:(Pl=null,Nl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=lc(e,i))),1===t)throw n=Ol,mc(e,0),uc(e,r),sc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bc(e,r))&&(0!==(s=pt(e))&&(r=s,t=lc(e,s))),1===t))throw n=Ol,mc(e,0),uc(e,r),sc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ec(e,Vl,Gl);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=ql+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){rc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Vl,Gl),t);break}Ec(e,Vl,Gl);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Vl,Gl),r);break}Ec(e,Vl,Gl);break;default:throw Error(o(329))}}}return sc(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function lc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Vl,Vl=n,null!==t&&cc(t)),e}function cc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function uc(e,t){for(t&=~Bl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&Al))throw Error(o(327));Cc();var t=ht(e,0);if(0===(1&t))return sc(e,Je()),null;var n=bc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Ol,mc(e,0),uc(e,t),sc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Vl,Gl),sc(e,Je()),null}function hc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Hl=Je()+500,Fi&&Wi())}}function fc(e){null!==Jl&&0===Jl.tag&&0===(6&Al)&&Cc();var t=Al;Al|=1;var n=Rl.transition,r=bt;try{if(Rl.transition=null,bt=1,e)return e()}finally{bt=r,Rl.transition=n,0===(6&(Al=t))&&Wi()}}function pc(){zl=Ll.current,Ci(Ll)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:os(),Ci(ji),Ci(Ii),ds();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ci(ls);break;case 10:ko(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=e,Dl=e=Lc(e.current,null),Nl=zl=t,Ml=0,Ol=null,Bl=Ul=Fl=0,Vl=Wl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}To=null}return e}function gc(e,t){for(;;){var n=Dl;try{if(So(),hs.current=aa,vs){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ps=0,ys=gs=ms=null,bs=!1,xs=0,jl.current=null,null===n||null===n.return){Ml=1,Ol=t,Dl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ba(p,a,l,0,t),1&p.mode&&ya(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ya(s,u,t),vc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=va(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ba(y,a,l,0,t),mo(da(c,l));break e}}s=c=da(c,l),4!==Ml&&(Ml=2),null===Wl?Wl=[s]:Wl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Mo(s,ma(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Mo(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(x){t=x,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function yc(){var e=Il.current;return Il.current=aa,null===e?aa:e}function vc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Ul)||uc(Pl,Nl)}function bc(e,t){var n=Al;Al|=2;var r=yc();for(Pl===e&&Nl===t||(Gl=null,mc(e,t));;)try{xc();break}catch(i){gc(e,i)}if(So(),Al=n,Il.current=r,null!==Dl)throw Error(o(261));return Pl=null,Nl=0,Ml}function xc(){for(;null!==Dl;)Sc(Dl)}function wc(){for(;null!==Dl&&!Qe();)Sc(Dl)}function Sc(e){var t=_l(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?kc(e):Dl=t,jl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,zl)))return void(Dl=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Ec(e,t,n){var r=bt,i=Rl.transition;try{Rl.transition=null,bt=1,function(e,t,n,r){do{Cc()}while(null!==Jl);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Pl&&(Dl=Pl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Pc(tt,function(){return Cc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Rl.transition,Rl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,jl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(ea){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,tl=t;null!==tl;)if(e=(t=tl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,tl=e;else for(;null!==tl;){t=tl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(ea){Tc(t,t.return,ea)}if(null!==(e=t.sibling)){e.return=t.return,tl=e;break}tl=t.return}m=il,il=!1}(e,n),bl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Xe(),Al=l,bt=a,Rl.transition=s}else e.current=n;if(Xl&&(Xl=!1,Jl=e,$l=i),s=e.pendingLanes,0===s&&(Ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Yl,Yl=null,e;0!==(1&$l)&&0!==e.tag&&Cc(),s=e.pendingLanes,0!==(1&s)?e===ec?Zl++:(Zl=0,ec=e):Zl=0,Wi()}(e,t,n,r)}finally{Rl.transition=i,bt=r}return null}function Cc(){if(null!==Jl){var e=xt($l),t=Rl.transition,n=bt;try{if(Rl.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,$l=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,tl=e.current;null!==tl;){var s=tl,a=s.child;if(0!==(16&tl.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(tl=u;null!==tl;){var d=tl;switch(d.tag){case 0:case 11:case 15:ol(8,d,s)}var h=d.child;if(null!==h)h.return=d,tl=h;else for(;null!==tl;){var f=(d=tl).sibling,p=d.return;if(ll(d),d===u){tl=null;break}if(null!==f){f.return=p,tl=f;break}tl=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}tl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,tl=a;else e:for(;null!==tl;){if(0!==(2048&(s=tl).flags))switch(s.tag){case 0:case 11:case 15:ol(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,tl=v;break e}tl=s.return}}var b=e.current;for(tl=b;null!==tl;){var x=(a=tl).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,tl=x;else e:for(a=b;null!==tl;){if(0!==(2048&(l=tl).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(S){Tc(l,l.return,S)}if(l===a){tl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,tl=w;break e}tl=l.return}}if(Al=i,Wi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Rl.transition=t}}return!1}function _c(e,t,n){e=zo(e,t=ma(0,t=da(n,t),1),1),t=rc(),null!==e&&(yt(e,1,t),sc(e,t))}function Tc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=zo(t,e=ga(t,e=da(n,e),1),1),e=rc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Nl&n)===n&&(4===Ml||3===Ml&&(130023424&Nl)===Nl&&500>Je()-ql?mc(e,0):Bl|=n),sc(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=rc();null!==(e=Ro(e,t))&&(yt(e,t,n),sc(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),jc(e,n)}function Pc(e,t){return Ke(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Dc(e,t,n,r)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)zc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Oc(n.children,i,s,t);case E:a=8,i|=8;break;case C:return(e=Nc(12,n,t,2|i)).elementType=C,e.lanes=s,e;case j:return(e=Nc(13,n,t,i)).elementType=j,e.lanes=s,e;case R:return(e=Nc(19,n,t,i)).elementType=R,e.lanes=s,e;case D:return Fc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:a=10;break e;case T:a=9;break e;case I:a=11;break e;case A:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Oc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,o,s,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),e}function qc(e){if(!e)return Ti;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return zi(e,n,t)}return t}function Hc(e,t,n,r,i,o,s,a,l){return(e=Vc(n,r,!0,e,0,o,0,a,l)).context=qc(null),n=e.current,(o=No(r=rc(),i=ic(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,yt(e,i,r),sc(e,r),e}function Gc(e,t,n,r){var i=t.current,o=rc(),s=ic(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=No(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,s))&&(oc(e,i,s,o),Lo(e,i,s)),s}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ji.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),po();break;case 5:ss(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(_i(ls,1&ls.current),null!==(e=Ka(e,t,n))?e.sibling:null);_i(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Co(t,n),i=Es(null,t,r,e,i,n);var s=Cs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Po(t),i.updater=Wo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Ra(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),Sa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=ja(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Do(e,t),Oo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pa(e,t,r,n,i=da(Error(o(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=da(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ka(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ua(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,_i(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!ji.current){t=Ka(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=No(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Eo(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Eo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Co(t,n),r=r(i=_o(i)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Ea(e,t,r,i=yo(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Ga(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Co(t,n),qo(t,r,i),Go(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return _a(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tu(){}function nu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Kc(s);a.call(e)}}Gc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kc(s);o.call(e)}}var s=Hc(t,r,e,0,null,!1,0,"",tu);return e._reactRootContainer=s,e[pi]=s.current,Wr(8===e.nodeType?e.parentNode:e),fc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",tu);return e._reactRootContainer=l,e[pi]=l.current,Wr(8===e.nodeType?e.parentNode:e),fc(function(){Gc(t,l,n,r)}),l}(n,t,e,i,r);return Kc(s)}$c.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gc(e,t,null,null)},$c.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Gc(null,e,null,null)}),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Je()),0===(6&Al)&&(Hl=Je()+500,Wi()))}break;case 13:fc(function(){var t=Ro(e,1);if(null!==t){var n=rc();oc(t,e,1,n)}}),Qc(e,1)}},St=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)oc(t,e,134217728,rc());Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ic(e),n=Ro(e,t);if(null!==n)oc(n,e,t,rc());Qc(e,t)}},Et=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));K(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=hc,je=fc;var ru={usingClientEntryPoint:!1,Events:[bi,xi,wi,_e,Te,hc]},iu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ou={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(ou),ot=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ru,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!eu(t))throw Error(o(200));return nu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!eu(t))throw Error(o(200));return nu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!eu(e))throw Error(o(40));return!!e._reactRootContainer&&(fc(function(){nu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!eu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return nu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{484:"f47dca55",551:"fc64b376"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="DateMaker:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,[s,a,l]=r,c=0;if(s.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkDateMaker=self.webpackChunkDateMaker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,i=n(43),o=n.t(i,2),s=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,u=o.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:x.location,delta:t})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(a({},u.state,{idx:g}),""));let x={get action(){return p},get location(){return e(o,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(l,v),m=e,()=>{o.removeEventListener(l,v),m=null}},createHref:e=>t(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let i=h(x.location,e,t);n&&n(i,e),g=y()+1;let a=d(i,g),l=x.createHref(i);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(l)}s&&m&&m({action:p,location:x.location,delta:1})},replace:function(e,t){p=r.Replace;let i=h(x.location,e,t);n&&n(i,e),g=y();let o=d(i,g),a=x.createHref(i);u.replaceState(o,"",a),s&&m&&m({action:p,location:x.location,delta:0})},go:e=>u.go(e)};return x}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=P(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let o=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=A(i);s=j(o[a],e,r)}return s}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=M([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:I(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))i(e,t,r);else i(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=x(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,S=3,k=2,E=1,C=10,_=-2,T=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=_),t&&(r+=k),n.filter(e=>!T(e)).reduce((e,t)=>e+(w.test(t)?S:""===t?E:C),r)}function j(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:M([o,u.pathname]),pathnameBase:O(M([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=M([o,u.pathnameBase]))}return s}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e,t){let n=N(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,s=""===e||""===i.pathname,l=s?"/":i.pathname;if(null==l)o=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(r),hash:U(i)}}(i,o),d=l&&"/"!==l&&l.endsWith("/"),h=(s||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],V=(new Set(W),["get",...W]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const H=i.createContext(null);const G=i.createContext(null);const K=i.createContext(null);const Y=i.createContext(null);const Q=i.createContext({outlet:null,matches:[],isDataRoute:!1});const X=i.createContext(null);function J(){return null!=i.useContext(Y)}function $(){return J()||c(!1),i.useContext(Y).location}function Z(e){i.useContext(K).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(Q);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=de(le.UseNavigateStable),n=i.useRef(!1);return Z(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,q({fromRouteId:t},i)))},[e,t])}():function(){J()||c(!1);let e=i.useContext(H),{basename:t,future:n,navigator:r}=i.useContext(K),{matches:o}=i.useContext(Q),{pathname:s}=$(),a=JSON.stringify(z(o,n.v7_relativeSplatPath)),l=i.useRef(!1);return Z(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let o=L(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:M([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)},[t,r,a,s,e])}()}function te(e,t,n,o){J()||c(!1);let{navigator:s}=i.useContext(K),{matches:a}=i.useContext(Q),l=a[a.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=$();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let x=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,o);return t&&x?i.createElement(Y.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},x):x}function ne(){let e=function(){var e;let t=i.useContext(X),n=ue(le.UseRouteError),r=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const re=i.createElement(ne,null);class ie extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Q.Provider,{value:this.props.routeContext},i.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(H);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Q.Provider,{value:t},r)}function se(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight((e,r,o)=>{let s,c=!1,h=null,f=null;var p;n&&(s=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||re,u&&(d<0&&0===o?(p="route-fallback",!1||he[p]||(he[p]=!0),c=!0,f=null):d===o&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?h:c?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(oe,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=i.useContext(H);return t||c(!1),t}function ue(e){let t=i.useContext(G);return t||c(!1),t}function de(e){let t=function(){let e=i.useContext(Q);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const he={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function pe(e){c(!1)}function me(e){let{basename:t="/",children:n=null,location:o,navigationType:s=r.Pop,navigator:a,static:l=!1,future:u}=e;J()&&c(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:d,navigator:a,static:l,future:q({v7_relativeSplatPath:!1},u)}),[d,u,a,l]);"string"===typeof o&&(o=p(o));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=o,b=i.useMemo(()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:s}},[d,f,m,g,y,v,s]);return null==b?null:i.createElement(K.Provider,{value:h},i.createElement(Y.Provider,{children:n,value:b}))}function ge(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise(()=>{});i.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ye(e.props.children,o));e.type!==pe&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ye(e.props.children,o)),n.push(s)}),n}var ve=n(950),be=n.t(ve,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(mx){}new Map;const xe=o.startTransition;be.flushSync,o.useId;function we(e){let{basename:t,children:n,future:r,window:o}=e,s=i.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),m(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=p(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))},function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},a)));let l=s.current,[c,d]=i.useState({action:l.action,location:l.location}),{v7_startTransition:g}=r||{},y=i.useCallback(e=>{g&&xe?xe(()=>d(e)):d(e)},[d,g]);return i.useLayoutEffect(()=>l.listen(y),[l,y]),i.useEffect(()=>fe(r),[r]),i.createElement(me,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Se,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Se||(Se={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Ce(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ee(t)?t:t+""}function _e(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach(function(t){_e(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function je(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Re=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ae=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var Pe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const De=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Ne=(0,i.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:c}=e,u=je(e,De);return(0,i.createElement)("svg",Ie(Ie(Ie({ref:t},Pe),{},{width:r,height:r,stroke:n,strokeWidth:s?24*Number(o)/Number(r):o,className:Ae("lucide",a)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"}),u),[...c.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),ze=["className"],Le=(e,t)=>{const n=(0,i.forwardRef)((n,r)=>{let{className:o}=n,s=je(n,ze);return(0,i.createElement)(Ne,Ie({ref:r,iconNode:t,className:Ae("lucide-".concat((a=Re(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),o)},s));var a});return n.displayName=Re(e),n},Me=Le("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),Oe=Le("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Fe=Le("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ue=Le("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Be=Le("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),We=Le("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ve=Le("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),qe=Le("bookmark-plus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]),He=Le("bookmark-check",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]),Ge=Le("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ke=Le("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Ye=Le("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Qe=Le("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Xe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new $e;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ze=function(e){return function(e){const t=Xe(e);return Je.encodeByteArray(t,!0)}(e).replace(/\./g,"")},et=function(e){try{return Je.decodeString(e,!0)}catch(mx){console.error("base64Decode failed: ",mx)}return null};function tt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const nt=()=>{try{return tt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyA_z8HNFWQFC3BU1WlSd8ikhM5JVywLfhs",REACT_APP_FIREBASE_AUTH_DOMAIN:"datemaker-62679.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"datemaker-62679",REACT_APP_FIREBASE_STORAGE_BUCKET:"datemaker-62679.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"931513579449",REACT_APP_FIREBASE_APP_ID:"1:931513579449:web:55c2a7915fad4a7771e868",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-LJVXV4GP8W",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCKCweUu3EEWa8VfNZJ3I0druTc6u5gJKc",REACT_APP_API_URL:"https://datemaker-backend-1.onrender.com",REACT_APP_ENVIRONMENT:"development",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51SHmuDJk6RAXFQPWAWBeOnePU7hqHQ7aWUoSdeH0z7FLJv4IbDDQSdDLqnC4Kc6HKu0JrZvzzW7DpJYmKZe7aj8800vJO2QHFq"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(mx){return}const t=e&&et(e[1]);return t&&JSON.parse(t)})()}catch(mx){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(mx))}},rt=e=>{var t;return null===(t=nt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},it=e=>{const t=rt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ot=()=>{var e;return null===(e=nt())||void 0===e?void 0:e.config},st=e=>{var t;return null===(t=nt())||void 0===t?void 0:t["_".concat(e)]};class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function lt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function ct(e){return(await fetch(e,{credentials:"include"})).ok}function ut(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Ie({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ze(JSON.stringify({alg:"none",type:"JWT"})),Ze(JSON.stringify(o)),""].join(".")}const dt={};let ht=!1;function ft(e,t){if("undefined"===typeof window||"undefined"===typeof document||!lt(window.location.host)||dt[e]===t||dt[e]||ht)return;function n(e){return"__firebase__banner__".concat(e)}dt[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(dt))dt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{ht=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function pt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function mt(){var e;const t=null===(e=nt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(mx){return!1}}function gt(){return!mt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yt(){try{return"object"===typeof indexedDB}catch(mx){return!1}}class vt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}}class bt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(xt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new vt(n,o,t)}}const xt=/\{\$([^}]+)}/g;function wt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(St(n)&&St(o)){if(!wt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function St(e){return null!==e&&"object"===typeof e}function kt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Et(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ct(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class _t{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Tt),void 0===r.error&&(r.error=Tt),void 0===r.complete&&(r.complete=Tt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(mx){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(mx){"undefined"!==typeof console&&console.error&&console.error(mx)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tt(){}function It(e){return e&&e._delegate?e._delegate:e}class jt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rt="[DEFAULT]";class At{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new at;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(mx){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(mx){if(r)return null;throw mx}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rt})}catch(mx){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(mx){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Rt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.component?this.component.multipleInstances?e:Rt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new At(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Dt=[];var Nt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Nt||(Nt={}));const zt={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},Lt=Nt.INFO,Mt={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},Ot=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Mt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Ft{constructor(e){this.name=e,this._logLevel=Lt,this._logHandler=Ot,this._userLogHandler=null,Dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?zt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}let Ut,Bt;const Wt=new WeakMap,Vt=new WeakMap,qt=new WeakMap,Ht=new WeakMap,Gt=new WeakMap;let Kt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Vt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Yt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jt(this),n),Xt(Wt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xt(e.apply(Jt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Jt(this),t,...r);return qt.set(o,t.sort?t.sort():[t]),Xt(o)}}function Qt(e){return"function"===typeof e?Yt(e):(e instanceof IDBTransaction&&function(e){if(Vt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Vt.set(e,t)}(e),t=e,(Ut||(Ut=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Kt):e);var t}function Xt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Xt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&Wt.set(t,e)}).catch(()=>{}),Gt.set(t,e),t}(e);if(Ht.has(e))return Ht.get(e);const t=Qt(e);return t!==e&&(Ht.set(e,t),Gt.set(t,e)),t}const Jt=e=>Gt.get(e);const $t=["get","getKey","getAll","getAllKeys","count"],Zt=["put","add","delete","clear"],en=new Map;function tn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(en.get(t))return en.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Zt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$t.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return en.set(t,o),o}Kt=(e=>Ie(Ie({},e),{},{get:(t,n,r)=>tn(t,n)||e.get(t,n,r),has:(t,n)=>!!tn(t,n)||e.has(t,n)}))(Kt);class nn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const rn="@firebase/app",on="0.14.3",sn=new Ft("@firebase/app"),an="@firebase/app-compat",ln="@firebase/analytics-compat",cn="@firebase/analytics",un="@firebase/app-check-compat",dn="@firebase/app-check",hn="@firebase/auth",fn="@firebase/auth-compat",pn="@firebase/database",mn="@firebase/data-connect",gn="@firebase/database-compat",yn="@firebase/functions",vn="@firebase/functions-compat",bn="@firebase/installations",xn="@firebase/installations-compat",wn="@firebase/messaging",Sn="@firebase/messaging-compat",kn="@firebase/performance",En="@firebase/performance-compat",Cn="@firebase/remote-config",_n="@firebase/remote-config-compat",Tn="@firebase/storage",In="@firebase/storage-compat",jn="@firebase/firestore",Rn="@firebase/ai",An="@firebase/firestore-compat",Pn="firebase",Dn="[DEFAULT]",Nn={[rn]:"fire-core",[an]:"fire-core-compat",[cn]:"fire-analytics",[ln]:"fire-analytics-compat",[dn]:"fire-app-check",[un]:"fire-app-check-compat",[hn]:"fire-auth",[fn]:"fire-auth-compat",[pn]:"fire-rtdb",[mn]:"fire-data-connect",[gn]:"fire-rtdb-compat",[yn]:"fire-fn",[vn]:"fire-fn-compat",[bn]:"fire-iid",[xn]:"fire-iid-compat",[wn]:"fire-fcm",[Sn]:"fire-fcm-compat",[kn]:"fire-perf",[En]:"fire-perf-compat",[Cn]:"fire-rc",[_n]:"fire-rc-compat",[Tn]:"fire-gcs",[In]:"fire-gcs-compat",[jn]:"fire-fst",[An]:"fire-fst-compat",[Rn]:"fire-vertex","fire-js":"fire-js",[Pn]:"fire-js-all"},zn=new Map,Ln=new Map,Mn=new Map;function On(e,t){try{e.container.addComponent(t)}catch(mx){sn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),mx)}}function Fn(e){const t=e.name;if(Mn.has(t))return sn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Mn.set(t,e);for(const n of zn.values())On(n,e);for(const n of Ln.values())On(n,e);return!0}function Un(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Bn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Wn=new bt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Vn{constructor(e,t,n){this._isDeleted=!1,this._options=Ie({},e),this._config=Ie({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const qn="12.3.0";function Hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Ie({name:Dn,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Wn.create("bad-app-name",{appName:String(i)});if(n||(n=ot()),!n)throw Wn.create("no-options");const o=zn.get(i);if(o){if(wt(n,o.options)&&wt(r,o.config))return o;throw Wn.create("duplicate-app",{appName:i})}const s=new Pt(i);for(const l of Mn.values())s.addComponent(l);const a=new Vn(n,r,s);return zn.set(i,a),a}function Gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;const t=zn.get(e);if(!t&&e===Dn&&ot())return Hn();if(!t)throw Wn.create("no-app",{appName:e});return t}function Kn(e,t,n){var r;let i=null!==(r=Nn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void sn.warn(e.join(" "))}Fn(new jt("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Yn="firebase-heartbeat-store";let Qn=null;function Xn(){return Qn||(Qn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Xt(s);return r&&s.addEventListener("upgradeneeded",e=>{r(Xt(s.result),e.oldVersion,e.newVersion,Xt(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Yn)}catch(mx){console.warn(mx)}}}).catch(e=>{throw Wn.create("idb-open",{originalErrorMessage:e.message})})),Qn}async function Jn(e,t){try{const n=(await Xn()).transaction(Yn,"readwrite"),r=n.objectStore(Yn);await r.put(t,$n(e)),await n.done}catch(mx){if(mx instanceof vt)sn.warn(mx.message);else{const t=Wn.create("idb-set",{originalErrorMessage:null===mx||void 0===mx?void 0:mx.message});sn.warn(t.message)}}}function $n(e){return"".concat(e.name,"!").concat(e.options.appId)}class Zn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=er();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(mx){sn.warn(mx)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=er(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),nr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ze(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(mx){return sn.warn(mx),""}}}function er(){return(new Date).toISOString().substring(0,10)}class tr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!yt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Xn()).transaction(Yn),n=await t.objectStore(Yn).get($n(e));return await t.done,n}catch(mx){if(mx instanceof vt)sn.warn(mx.message);else{const t=Wn.create("idb-get",{originalErrorMessage:null===mx||void 0===mx?void 0:mx.message});sn.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nr(e){return Ze(JSON.stringify({version:2,heartbeats:e})).length}var rr;rr="",Fn(new jt("platform-logger",e=>new nn(e),"PRIVATE")),Fn(new jt("heartbeat",e=>new Zn(e),"PRIVATE")),Kn(rn,on,rr),Kn(rn,on,"esm2020"),Kn("fire-js","");const ir=["providerId"],or=["uid","auth","stsTokenManager"],sr=["providerId","signInMethod"];function ar(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lr=ar,cr=new bt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ur=new Ft("@firebase/auth");function dr(e){if(ur.logLevel<=Nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ur.error("Auth (".concat(qn,"): ").concat(e),...n)}}function hr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gr(e,...n)}function fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gr(e,...n)}function pr(e,t,n){const r=Ie(Ie({},lr()),{},{[t]:n});return new bt("auth","Firebase",r).create(t,{appName:e.name})}function mr(e){return pr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return cr.create(e,...n)}function yr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw gr(t,...r)}}function vr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw dr(t),new Error(t)}function br(e,t){e||vr(t)}function xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function wr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function kr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Er{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return kr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cr(e,t){br(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class _r{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ir=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jr=new Er(3e4,6e4);function Rr(e,t){return e.tenantId&&!t.tenantId?Ie(Ie({},t),{},{tenantId:e.tenantId}):t}async function Ar(e,t,n,r){return Pr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=kt(Ie({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Ie({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&lt(e.emulatorConfig.host)&&(l.credentials="include"),_r.fetch()(await Nr(e,e.config.apiHost,n,s),l)})}async function Pr(e,t,n){e._canInitEmulator=!1;const r=Ie(Ie({},Tr),t);try{const t=new Lr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Mr(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mr(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Mr(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Mr(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw pr(e,a,s);hr(e,a)}}catch(mx){if(mx instanceof vt)throw mx;hr(e,"network-request-failed",{message:String(mx)})}}async function Dr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Ar(e,t,n,r,i);return"mfaPendingCredential"in o&&hr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function Nr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,s=o.config.emulator?Cr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Ir.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function zr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(fr(this.auth,"network-request-failed")),jr.get())})}}function Mr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fr(e,t,r);return i.customData._tokenResponse=n,i}function Or(e){return void 0!==e&&void 0!==e.enterprise}class Fr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ur(e,t){return Ar(e,"GET","/v2/recaptchaConfig",Rr(e,t))}async function Br(e,t){return Ar(e,"POST","/v1/accounts:lookup",t)}function Wr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(mx){}}function Vr(e){return 1e3*Number(e)}function qr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return dr("JWT malformed, contained fewer than 3 sections"),null;try{const e=et(n);return e?JSON.parse(e):(dr("Failed to decode base64 JWT payload"),null)}catch(mx){return dr("Caught error parsing JWT payload as JSON",null===mx||void 0===mx?void 0:mx.toString()),null}}function Hr(e){const t=qr(e);return yr(t,"internal-error"),yr("undefined"!==typeof t.exp,"internal-error"),yr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Gr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(mx){throw mx instanceof vt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(mx)&&e.auth.currentUser===e&&await e.auth.signOut(),mx}}class Kr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(mx){return void((null===mx||void 0===mx?void 0:mx.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Yr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Gr(e,Br(n,{idToken:r}));yr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?Xr(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==a&&void 0!==a&&a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Yr(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Xr(e){return e.map(e=>{let{providerId:t}=e,n=je(e,ir);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yr(e.idToken,"internal-error"),yr("undefined"!==typeof e.idToken,"internal-error"),yr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Hr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yr(0!==e.length,"internal-error");const t=Hr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(yr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Pr(e,{},async()=>{const n=kt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await Nr(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:n};return e.emulatorConfig&&lt(e.emulatorConfig.host)&&(a.credentials="include"),_r.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Jr;return n&&(yr("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(yr("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(yr("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jr,this.toJSON())}_performRefresh(){return vr("not implemented")}}function $r(e,t){yr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Zr{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=je(e,or);this.providerId="firebase",this.proactiveRefresh=new Kr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Gr(this,this.stsTokenManager.getToken(this.auth,e));return yr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=It(e),r=await n.getIdToken(t),i=qr(r);yr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Wr(Vr(i.auth_time)),issuedAtTime:Wr(Vr(i.iat)),expirationTime:Wr(Vr(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=It(e);await Qr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Ie({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr(Ie(Ie({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Qr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await Gr(this,async function(e,t){return Ar(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Ie(Ie({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Ie({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:S}=t;yr(v&&S,e,"internal-error");const k=Jr.fromJSON(this.name,S);yr("string"===typeof v,e,"internal-error"),$r(u,e.name),$r(d,e.name),yr("boolean"===typeof b,e,"internal-error"),yr("boolean"===typeof x,e,"internal-error"),$r(h,e.name),$r(f,e.name),$r(p,e.name),$r(m,e.name),$r(g,e.name),$r(y,e.name);const E=new Zr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Ie({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Jr;r.updateFromServerResponse(t);const i=new Zr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Qr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];yr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Xr(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new Jr;s.updateFromIdToken(n);const a=new Zr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Yr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const ei=new Map;function ti(e){br(e instanceof Function,"Expected a class definition");let t=ei.get(e);return t?(br(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ei.set(e,t),t)}class ni{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ni.type="NONE";const ri=ni;function ii(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class oi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ii(this.userKey,r.apiKey,i),this.fullPersistenceKey=ii("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Br(this.auth,{idToken:e}).catch(()=>{});return t?Zr._fromGetAccountInfoResponse(this.auth,t,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new oi(ti(ri),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||ti(ri);const o=ii(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await Br(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Zr._fromGetAccountInfoResponse(e,r,t)}else n=Zr._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new oi(i,e,n)):new oi(i,e,n)}}function si(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ai(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hi(t))return"Blackberry";if(fi(t))return"Webos";if(li(t))return"Safari";if((t.includes("chrome/")||ci(t))&&!t.includes("edge/"))return"Chrome";if(di(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/firefox\//i.test(e)}function li(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/crios\//i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/iemobile/i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/android/i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/blackberry/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/webos/i.test(e)}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mi(){return function(){const e=pt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return pi(e)||di(e)||fi(e)||hi(e)||/windows phone/i.test(e)||ui(e)}function yi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=si(pt());break;case"Worker":t="".concat(si(pt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(qn,"/").concat(r)}class vi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(mx){r(mx)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(mx){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===mx||void 0===mx?void 0:mx.message})}}}class bi{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Si(this),this.idTokenSubscription=new Si(this),this.beforeStateQueue=new vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(mx){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Br(this,{idToken:e}),n=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Bn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(o=n)||void 0===o?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==s||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(mx){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(mx))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return yr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(mx){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qr(e)}catch(mx){if((null===mx||void 0===mx?void 0:mx.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(mr(this));const t=e?It(e):null;return t&&yr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ar(e,"GET","/v2/passwordPolicy",Rr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ar(e,"POST","/v2/accounts:revokeToken",Rr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;yr(t,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(yr(s,this,"internal-error"),s.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(ur.logLevel<=Nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ur.warn("Auth (".concat(qn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function wi(e){return It(e)}class Si{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new _t(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ki={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ei(e){return ki.loadJS(e)}function Ci(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class _i{constructor(){this.enterprise=new Ti}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ti{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ii="NO_RECAPTCHA";class ji{constructor(e){this.type="recaptcha-enterprise",this.auth=wi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Or(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ii)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new _i).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ur(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Fr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Or(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ki.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ei(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ri(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new ji(e);let s;if(i)s=Ii;else try{s=await o.verify(n)}catch(l){s=await o.verify(n,!0)}const a=Ie({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ai(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ri(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ri(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await Ri(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Ri(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ri(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Pi(e){const t=wi(e),n=await Ur(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Fr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ji(t).verify()}}function Di(e,t){const n=Un(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(wt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;hr(e,"already-initialized")}return n.initialize({options:t})}function Ni(e,t,n){const r=wi(e);yr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=zi(t),{host:s,port:a}=function(e){const t=zi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Li(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Li(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(o,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return yr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void yr(wt(c,r.config.emulator)&&wt(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,lt(s)?(ct("".concat(o,"//").concat(s).concat(l)),ft("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function zi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Li(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Mi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,t){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function Oi(e,t){return Ar(e,"POST","/v1/accounts:signUp",t)}async function Fi(e,t){return Dr(e,"POST","/v1/accounts:signInWithPassword",Rr(e,t))}async function Ui(e,t){return Ar(e,"POST","/v1/accounts:sendOobCode",Rr(e,t))}async function Bi(e,t){return Ui(e,t)}class Wi extends Mi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Wi(e,t,"password")}static _fromEmailAndCode(e,t){return new Wi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ai(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Fi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithEmailLink",Rr(e,t))}(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ai(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithEmailLink",Rr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vi(e,t){return Dr(e,"POST","/v1/accounts:signInWithIdp",Rr(e,t))}class qi extends Mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=je(t,sr);if(!n||!r)return null;const o=new qi(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Vi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kt(t)}return e}}async function Hi(e,t){return Ar(e,"POST","/v1/accounts:sendVerificationCode",Rr(e,t))}const Gi={USER_NOT_FOUND:"user-not-found"};class Ki extends Mi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ki({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ki({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithPhoneNumber",Rr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Dr(e,"POST","/v1/accounts:signInWithPhoneNumber",Rr(e,t));if(n.temporaryProof)throw Mr(e,"account-exists-with-different-credential",n);return n}(e,Ie({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithPhoneNumber",Rr(e,Ie(Ie({},t),{},{operation:"REAUTH"})),Gi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ki({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Yi{constructor(e){var t,n,r,i,o,s;const a=Et(Ct(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);yr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Et(Ct(e)).link,n=t?Et(Ct(t)).deep_link_id:null,r=Et(Ct(e)).deep_link_id;return(r?Et(Ct(r)).link:null)||r||n||t||e}(e);try{return new Yi(t)}catch(n){return null}}}class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,t){return Wi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Yi.parseLink(t);return yr(n,"argument-error"),Wi._fromEmailAndCode(e,n.code,n.tenantId)}}Qi.PROVIDER_ID="password",Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Xi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ji extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $i extends Ji{constructor(){super("facebook.com")}static credential(e){return qi._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $i.credential(t.oauthAccessToken)}catch(n){return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com",$i.PROVIDER_ID="facebook.com";class Zi extends Ji{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qi._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Zi.credential(n,r)}catch(i){return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com",Zi.PROVIDER_ID="google.com";class eo extends Ji{constructor(){super("github.com")}static credential(e){return qi._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return eo.credential(t.oauthAccessToken)}catch(n){return null}}}eo.GITHUB_SIGN_IN_METHOD="github.com",eo.PROVIDER_ID="github.com";class to extends Ji{constructor(){super("twitter.com")}static credential(e,t){return qi._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return to.credential(n,r)}catch(i){return null}}}async function no(e,t){return Dr(e,"POST","/v1/accounts:signUp",Rr(e,t))}to.TWITTER_SIGN_IN_METHOD="twitter.com",to.PROVIDER_ID="twitter.com";class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Zr._fromIdTokenResponse(e,n,r),o=io(n);return new ro({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=io(n);return new ro({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function io(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class oo extends vt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,oo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new oo(e,t,n,r)}}function so(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw oo._fromErrorAndOperation(e,n,t,r);throw n})}async function ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Gr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ro._forOperation(e,"link",r)}async function lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Bn(r.app))return Promise.reject(mr(r));const i="reauthenticate";try{const o=await Gr(e,so(r,i,t,e),n);yr(o.idToken,r,"internal-error");const s=qr(o.idToken);yr(s,r,"internal-error");const{sub:a}=s;return yr(e.uid===a,r,"user-mismatch"),ro._forOperation(e,i,o)}catch(mx){throw(null===mx||void 0===mx?void 0:mx.code)==="auth/".concat("user-not-found")&&hr(r,"user-mismatch"),mx}}async function co(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Bn(e.app))return Promise.reject(mr(e));const r="signIn",i=await so(e,r,t),o=await ro._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function uo(e,t){return co(wi(e),t)}function ho(e,t,n){var r;yr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),yr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),yr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(yr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(yr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function fo(e){const t=wi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function po(e,t,n){return Bn(e.app)?Promise.reject(mr(e)):uo(It(e),Qi.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&fo(e),t})}async function mo(e,t){const n=It(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ho(n.auth,r,t);const{email:i}=await async function(e,t){return Ui(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function go(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Gr(e,async function(e,t){return Ar(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}function yo(e,t,n,r){return It(e).onAuthStateChanged(t,n,r)}function vo(e){return It(e).signOut()}function bo(e,t){return Ar(e,"POST","/v2/accounts/mfaEnrollment:start",Rr(e,t))}new WeakMap;const xo="__sak";class wo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class So extends wo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);mi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}So.type="LOCAL";const ko=So;function Eo(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Co(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class _o{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Co(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Eo(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Co(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Co(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Eo(n);const i=setInterval(()=>{const e=Eo(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}_o.type="COOKIE";class To extends wo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}To.type="SESSION";const Io=To;class jo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new jo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}jo.receivers=[];class Ao{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=Ro("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Po(){return window}function Do(){return"undefined"!==typeof Po().WorkerGlobalScope&&"function"===typeof Po().importScripts}const No="firebaseLocalStorageDb",zo="firebaseLocalStorage",Lo="fbase_key";class Mo{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oo(e,t){return e.transaction([zo],t?"readwrite":"readonly").objectStore(zo)}function Fo(){const e=indexedDB.open(No,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(zo,{keyPath:Lo})}catch(mx){n(mx)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(zo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(No);return new Mo(e).toPromise()}(),t(await Fo()))})})}async function Uo(e,t,n){const r=Oo(e,!0).put({[Lo]:t,value:n});return new Mo(r).toPromise()}function Bo(e,t){const n=Oo(e,!0).delete(t);return new Mo(n).toPromise()}class Wo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Fo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(mx){if(t++>3)throw mx;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Do()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jo._getInstance(Do()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Ao(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fo();return await Uo(e,xo,"1"),await Bo(e,xo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uo(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Oo(e,!1).get(t),r=await new Mo(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bo(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Oo(e,!1).getAll();return new Mo(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wo.type="LOCAL";const Vo=Wo;function qo(e,t){return Ar(e,"POST","/v2/accounts/mfaSignIn:start",Rr(e,t))}Ci("rcb"),new Er(3e4,6e4);const Ho="recaptcha";async function Go(e,t,n){if(!e._getRecaptchaConfig())try{await Pi(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){yr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Ai(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ii){yr((null===n||void 0===n?void 0:n.type)===Ho,e,"argument-error");return bo(e,await Ko(e,t,n))}return bo(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;yr("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;yr(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Ai(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ii){yr((null===n||void 0===n?void 0:n.type)===Ho,e,"argument-error");return qo(e,await Ko(e,t,n))}return qo(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ai(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ii){yr((null===n||void 0===n?void 0:n.type)===Ho,e,"argument-error");return Hi(e,await Ko(e,t,n))}return Hi(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ko(e,t,n){yr(n.type===Ho,e,"argument-error");const r=await n.verify();yr("string"===typeof r,e,"argument-error");const i=Ie({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Yo{constructor(e){this.providerId=Yo.PROVIDER_ID,this.auth=wi(e)}verifyPhoneNumber(e,t){return Go(this.auth,e,It(t))}static credential(e,t){return Ki._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yo.credentialFromTaggedObject(t)}static credentialFromError(e){return Yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ki._fromTokenResponse(n,r):null}}function Qo(e,t){return t?ti(t):(yr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yo.PROVIDER_ID="phone",Yo.PHONE_SIGN_IN_METHOD="phone";class Xo extends Mi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jo(e){return co(e.auth,new Xo(e),e.bypassAuthState)}function $o(e){const{auth:t,user:n}=e;return yr(n,t,"internal-error"),lo(n,new Xo(e),e.bypassAuthState)}async function Zo(e){const{auth:t,user:n}=e;return yr(n,t,"internal-error"),ao(n,new Xo(e),e.bypassAuthState)}class es{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(mx){this.reject(mx)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(mx){this.reject(mx)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jo;case"linkViaPopup":case"linkViaRedirect":return Zo;case"reauthViaPopup":case"reauthViaRedirect":return $o;default:hr(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ts=new Er(2e3,1e4);class ns extends es{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yr(e,this.auth,"internal-error"),e}async onExecution(){br(1===this.filter.length,"Popup operations only handle one event");const e=Ro();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ts.get())};e()}}ns.currentPopupAction=null;const rs=new Map;class is extends es{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=rs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=as(t),r=ss(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(mx){e=()=>Promise.reject(mx)}rs.set(this.auth._key(),e)}return this.bypassAuthState||rs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function os(e,t){rs.set(e._key(),t)}function ss(e){return ti(e._redirectPersistence)}function as(e){return ii("pendingRedirect",e.config.apiKey,e.name)}async function ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Bn(e.app))return Promise.reject(mr(e));const r=wi(e),i=Qo(r,t),o=new is(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class cs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ds(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ds(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(us(e))}saveEventToCache(e){this.cachedEventUids.add(us(e)),this.lastProcessedEventTime=Date.now()}}function us(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ds(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fs=/^https?/;async function ps(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ar(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ms(r))return}catch(n){}hr(e,"unauthorized-domain")}function ms(e){const t=xr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!fs.test(n))return!1;if(hs.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gs=new Er(3e4,6e4);function ys(){const e=Po().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function vs(e){return new Promise((t,n)=>{var r,i;function o(){ys(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ys(),n(fr(e,"network-request-failed"))},timeout:gs.get()})}if(null!==(r=Po().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Po().gapi)||void 0===i||!i.load){const t=Ci("iframefcb");return Po()[t]=()=>{gapi.load?o():n(fr(e,"network-request-failed"))},Ei("".concat(ki.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw bs=null,e})}let bs=null;const xs=new Er(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ss=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ks(e){const t=e.config;yr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:qn},i=Ss.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(kt(r).slice(1))}async function Es(e){const t=await function(e){return bs=bs||vs(e),bs}(e),n=Po().gapi;return yr(n,e,"internal-error"),t.open({where:document.body,url:ks(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=fr(e,"network-request-failed"),o=Po().setTimeout(()=>{r(i)},xs.get());function s(){Po().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Cs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _s{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(mx){}}}function Ts(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Ie(Ie({},Cs),{},{width:r.toString(),height:i.toString(),top:o,left:s}),c=pt().toLowerCase();n&&(a=ci(c)?"_blank":n),ai(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return pi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new _s(null);const d=window.open(t||"",a,u);yr(d,e,"popup-blocked");try{d.focus()}catch(mx){}return new _s(d)}const Is="__/auth/handler",js="emulator/auth/handler",Rs=encodeURIComponent("fac");async function As(e,t,n,r,i,o){yr(e.config.authDomain,e,"auth-domain-config-required"),yr(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:qn,eventId:i};if(t instanceof Xi){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Ji){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Rs,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Is);return Cr(t,js)}(e),"?").concat(kt(a).slice(1)).concat(c)}const Ps="webStorageSupport";const Ds=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Io,this._completeRedirectFn=ls,this._overrideRedirectResult=os}async _openPopup(e,t,n,r){var i;br(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ts(e,await As(e,t,n,xr(),r),Ro())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Po().location.href=e}(await As(e,t,n,xr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(br(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Es(e),n=new cs(e);return t.register("authEvent",t=>{yr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ps,{type:Ps},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Ps];void 0!==i&&t(!!i),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ps(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gi()||li()||pi()}};var Ns="@firebase/auth",zs="1.11.0";class Ls{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ms=st("authIdTokenMaxAge")||300;let Os=null;var Fs;ki={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=fr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Fs="Browser",Fn(new jt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;yr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Fs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yi(Fs)},c=new xi(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ti);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Fn(new jt("auth-internal",e=>(e=>new Ls(e))(wi(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(Ns,zs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Fs)),Kn(Ns,zs,"esm2020");var Us,Bs,Ws="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,s=e.g[3];o=t+(s^n&(i^s))+r[0]+3614090360&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[3]+3250441966&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[4]+4118548399&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[7]+4249261313&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[8]+1770035416&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[11]+2304563134&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[12]+1804603682&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[15]+1236535329&4294967295,o=t+(i^s&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[0]+3921069994&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[4]+3889429448&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[8]+1163531501&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^s)+r[5]+4294588738&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[1]+2763975236&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[13]+681279174&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[9]+3654602809&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~s))+r[0]+4096336452&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[12]+1700485571&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[8]+1873313359&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[4]+4149444226&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,s=0;for(;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(s(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);c.l(e)<=0&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||c.l(e)>0;)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=s(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),s=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=o*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*s,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*s,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Bs=Vs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=s(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=s(Math.pow(n,o)),i=i.j(o).add(s(e))):(i=i.j(r),i=i.add(s(e)))}return i},Us=Vs.Integer=r}).apply("undefined"!==typeof Ws?Ws:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var qs,Hs,Gs,Ks,Ys,Qs,Xs,Js,$s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Zs={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $s&&$s];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function k(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function _(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,E),T.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),j=0;function R(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function A(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<N.length;t++)n=N[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(A(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function O(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const s=O(e,t,r,i);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new R(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),U={};function B(e,t,n,r,i){if(r&&r.once)return V(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)B(e,t[o],n,r,i);return null}return n=X(n),e&&e[I]?e.J(t,n,s(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const a=s(i)?!!i.capture:!!i;let l=Y(e);if(l||(e[F]=l=new L(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function V(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)V(e,t[o],n,r,i);return null}return n=X(n),e&&e[I]?e.K(t,n,s(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function q(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=X(n),e&&e[I]?(e=e.i,(o=String(t).toString())in e.g&&((n=O(t=e.g[o],n,r,i))>-1&&(A(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=O(t,n,r,i)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(M(n,e),0==n.h&&(n.src=null,t[F]=null)):A(e)}}}function G(e){return e in U?U[e]:U[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function Y(e){return(e=e[F])instanceof L?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function J(){k.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;z(t=new E(r,e),i)}let o,s;if(i=!0,n)for(s=n.length-1;s>=0;s--)o=t.g=n[s],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const s=t[o];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&M(e.i,s),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,k),J.prototype[I]=!0,J.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)A(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends k{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){k.call(this),this.h=e,this.g={}}u(ne,k);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,se=o.JSON.parse,ae=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){E.call(this,"d")}function he(){E.call(this,"c")}u(de,E),u(he,E);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function xe(e,t){E.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Se(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(xe,E),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ee,Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_e={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Te(){}function Ie(e){return encodeURIComponent(String(e))}function je(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}u(Te,le),Te.prototype.g=function(){return new XMLHttpRequest},Ee=new Te;var Pe={},De={};function Ne(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),Oe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ae,e.g=sn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=B(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var s="",a=o.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Oe(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ue(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Be(e){0==e.j.I||e.K||en(e.j,e)}function We(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Ve(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ye(n.h,e)))if(!e.L&&Ye(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Vt(n)}Xt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!_(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Qe(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),s.L){Xe(r.h,s);var a=s,c=r.O;c&&(a.H=c),a.D&&(Ue(a),Oe(a)),r.g=s}else Qt(r);n.i.length>0&&Ht(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Wt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Re.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ot(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ot(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==c||ye(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ot(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return We(e),Be(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,be(12),We(this),Be(this);break e}ke(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ve(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),ke(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}ke(this.i,this.l,t,null),Ve(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(a),a.P=!0,be(11))}}else ke(this.i,this.l,n,"[Invalid Chunked Response]"),We(this),Be(this)}else ke(this.i,this.l,n,null),Ve(this,n);4==l&&We(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Oe(this)))}else(function(e){const t={};e=(e.g&&Ot(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(_(e[r]))continue;var n=je(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),We(this),Be(this)}}}catch(Da){}},Re.prototype.cancel=function(){this.K=!0,We(this)},Re.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),We(this),this.m=2,Be(this)):Fe(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}He.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=st(t[2]||""),this.g=st(t[3]||"",!0),nt(this,t[4]),this.h=st(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=st(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?st(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function ot(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function st(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,xt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function xt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function kt(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ct(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function _t(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&Ie(n):it(e,t,n))}function At(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new Ct(this.i,this.h)},u(Ct,J),(e=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):It(this),3==this.readyState&&_t(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Na=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(At,J);var Pt=/^https?$/i,Dt=["POST","PUT"];function Nt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,zt(e),Mt(e)}function zt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ot(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ot(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var s=Ot(e)>2?e.g.statusText:""}catch(a){s=""}e.l=s+" ["+e.ca()+"]",zt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ot(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new kt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Wt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Kt(e,n),(t=new Re(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=sn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Oe(t)}rn(e)}function Vt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function qt(e){Vt(e),e.v&&(o.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Ht(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),b||(v(),b=!0),x.add(t,e),e.D=0}}function Gt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Kt(e,r),e.u&&e.o&&Rt(r,e.u,e.o),n=new Re(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Yt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),Ne(n,r,t)}function Kt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Yt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;s(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(ta){throw e.push(o+"type="+encodeURIComponent("_badmap")),ta}}catch(ta){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),b||(v(),b=!0),x.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&Rt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,ze(n,e)}function Zt(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Jt(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new xe(r,n)),Ht(e)}else Qt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(r,"https"),ot(r),t?function(e,t){const n=new Se;if(o.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Kt(e,r),r}function sn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new At(new Et({ab:n})):new At(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){J.call(this),this.g=new Bt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!_(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=At.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Nt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){Nt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),At.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ot(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Bt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),Ht(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Re(this,this.j,e);let o=this.o;if(this.U&&(o?(o=D(o),z(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Kt(this,n),o&&(this.R?t="headers="+Ie(jt(o))+"&"+t:this.u&&Rt(n,this.u,o)),Qe(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Ne(i,n,null)):Ne(i,n,t),this.I=2}}else 3==this.I&&(e?Gt(this,e):0==this.i.length||Ge(this.h)||Gt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Vt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Vt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,J),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Wt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Ht(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,an),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Js=Zs.createWebChannelTransport=function(){return new ln},Xs=Zs.getStatEventTarget=function(){return me()},Qs=Zs.Event=fe,Ys=Zs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,Ks=Zs.ErrorCode=Ce,_e.COMPLETE="complete",Gs=Zs.EventType=_e,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Hs=Zs.WebChannel=ce,Zs.FetchXmlHttpFactory=Et,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,qs=Zs.XhrIo=At}).apply("undefined"!==typeof $s?$s:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ea="@firebase/firestore",ta="4.9.2";class na{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}na.UNAUTHENTICATED=new na(null),na.GOOGLE_CREDENTIALS=new na("google-credentials-uid"),na.FIRST_PARTY=new na("first-party-uid"),na.MOCK_USER=new na("mock-user");let ra="12.3.0";const ia=new Ft("@firebase/firestore");function oa(){return ia.logLevel}function sa(e){if(ia.logLevel<=Nt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ca);ia.debug("Firestore (".concat(ra,"): ").concat(e),...i)}}function aa(e){if(ia.logLevel<=Nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ca);ia.error("Firestore (".concat(ra,"): ").concat(e),...i)}}function la(e){if(ia.logLevel<=Nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ca);ia.warn("Firestore (".concat(ra,"): ").concat(e),...i)}}function ca(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ua(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,da(e,r,n)}function da(e,t,n){let r="FIRESTORE (".concat(ra,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw aa(r),new Error(r)}function ha(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||da(t,i,r)}function fa(e,t){return e}const pa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ma extends vt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ga{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ya{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class va{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(na.UNAUTHENTICATED))}shutdown(){}}class ba{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xa{constructor(e){this.t=e,this.currentUser=na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ha(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ga,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{sa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(sa("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ga)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(sa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ha("string"==typeof t.accessToken,31837,{l:t}),new ya(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ha(null===e||"string"==typeof e,2055,{h:e}),new na(e)}}class wa{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=na.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new wa(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(na.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ka{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ea{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ha(void 0===this.o,3512);const n=e=>{null!=e.error&&sa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,sa("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{sa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):sa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ka(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ha("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new ka(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ca(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class _a{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ca(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ta(e,t){return e<t?-1:e>t?1:0}function Ia(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Aa(n)===Aa(i)?Ta(n,i):Aa(n)?1:-1}return Ta(e.length,t.length)}const ja=55296,Ra=57343;function Aa(e){const t=e.charCodeAt(0);return t>=ja&&t<=Ra}function Pa(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Da="__name__";class Na{constructor(e,t,n){void 0===t?t=0:t>e.length&&ua(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ua(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Na.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Na.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ta(e.length,t.length)}static compareSegments(e,t){const n=Na.isNumericId(e),r=Na.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Na.extractNumericId(e).compare(Na.extractNumericId(t)):Ia(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Us.fromString(e.substring(4,e.length-2))}}class za extends Na{construct(e,t,n){return new za(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ma(pa.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new za(e)}static emptyPath(){return new za([])}}const La=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ma extends Na{construct(e,t,n){return new Ma(e,t,n)}static isValidIdentifier(e){return La.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ma.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Da}static keyField(){return new Ma([Da])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ma(pa.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ma(pa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ma(pa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new ma(pa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ma(t)}static emptyPath(){return new Ma([])}}class Oa{constructor(e){this.path=e}static fromPath(e){return new Oa(za.fromString(e))}static fromName(e){return new Oa(za.fromString(e).popFirst(5))}static empty(){return new Oa(za.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===za.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return za.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oa(new za(e.slice()))}}function Fa(e,t,n){if(!n)throw new ma(pa.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ua(e){if(!Oa.isDocumentKey(e))throw new ma(pa.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ba(e){if(Oa.isDocumentKey(e))throw new ma(pa.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wa(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Va(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ua(12329,{type:typeof e})}function qa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ma(pa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Va(e);throw new ma(pa.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ha(e,t){if(t<=0)throw new ma(pa.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function Ga(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ka(e,t){if(!Wa(e))throw new ma(pa.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&s!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new ma(pa.INVALID_ARGUMENT,n);return!0}const Ya=-62135596800,Qa=1e6;class Xa{static now(){return Xa.fromMillis(Date.now())}static fromDate(e){return Xa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Qa);return new Xa(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ma(pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ma(pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ya)throw new ma(pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ma(pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qa}_compareTo(e){return this.seconds===e.seconds?Ta(this.nanoseconds,e.nanoseconds):Ta(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ka(e,Xa._jsonSchema))return new Xa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ya;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xa._jsonSchemaVersion="firestore/timestamp/1.0",Xa._jsonSchema={type:Ga("string",Xa._jsonSchemaVersion),seconds:Ga("number"),nanoseconds:Ga("number")};class Ja{static fromTimestamp(e){return new Ja(e)}static min(){return new Ja(new Xa(0,0))}static max(){return new Ja(new Xa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $a=-1;class Za{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Za.UNKNOWN_ID=-1;function el(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ja.fromTimestamp(1e9===r?new Xa(n+1,0):new Xa(n,r));return new nl(i,Oa.empty(),t)}function tl(e){return new nl(e.readTime,e.key,$a)}class nl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new nl(Ja.min(),Oa.empty(),$a)}static max(){return new nl(Ja.max(),Oa.empty(),$a)}}function rl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Oa.comparator(e.documentKey,t.documentKey),0!==n?n:Ta(e.largestBatchId,t.largestBatchId))}const il="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ol{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function sl(e){if(e.code!==pa.FAILED_PRECONDITION||e.message!==il)throw e;sa("LocalStore","Unexpectedly lost primary lease")}class al{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ua(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new al((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof al?t:al.resolve(t)}catch(e){return al.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):al.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):al.reject(t)}static resolve(e){return new al((t,n)=>{t(e)})}static reject(e){return new al((t,n)=>{n(e)})}static waitFor(e){return new al((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=al.resolve(!1);for(const n of e)t=t.next(e=>e?al.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new al((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new al((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ll(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cl(e){return"IndexedDbTransactionError"===e.name}class ul{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ul.ce=-1;const dl=-1;function hl(e){return null==e}function fl(e){return 0===e&&1/e==-1/0}function pl(e){return"number"==typeof e&&Number.isInteger(e)&&!fl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ml="\x01";function gl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=vl(t)),t=yl(e.get(n),t);return vl(t)}function yl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ml:n+="\x01\x11";break;default:n+=t}}return n}function vl(e){return e+ml+"\x01"}const bl="remoteDocuments",xl="owner",wl="mutationQueues",Sl="mutations";const kl="documentMutations",El="remoteDocumentsV14",Cl="remoteDocumentGlobal",_l="targets",Tl="targetDocuments",Il="targetGlobal",jl="collectionParents",Rl="clientMetadata",Al="bundles",Pl="namedQueries",Dl="indexConfiguration",Nl="indexState",zl="indexEntries",Ll="documentOverlays",Ml="globals",Ol=[wl,Sl,kl,bl,_l,xl,Il,Tl,Rl,Cl,jl,Al,Pl],Fl=[wl,Sl,kl,El,_l,xl,Il,Tl,Rl,Cl,jl,Al,Pl,Ll],Ul=Fl,Bl=[...Ul,Dl,Nl,zl];function Wl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ql(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Hl{constructor(e,t){this.comparator=e,this.root=t||Kl.EMPTY}insert(e,t){return new Hl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kl.BLACK,null,null))}remove(e){return new Hl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}}class Gl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Kl.RED,this.left=null!=r?r:Kl.EMPTY,this.right=null!=i?i:Kl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Kl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Kl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Kl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ua(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ua(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ua(27949);return e+(this.isRed()?0:1)}}Kl.EMPTY=null,Kl.RED=!0,Kl.BLACK=!1,Kl.EMPTY=new class{constructor(){this.size=0}get key(){throw ua(57766)}get value(){throw ua(16141)}get color(){throw ua(16727)}get left(){throw ua(29726)}get right(){throw ua(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Kl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yl{constructor(e){this.comparator=e,this.data=new Hl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ql(this.data.getIterator())}getIteratorFrom(e){return new Ql(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Yl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Yl(this.comparator);return t.data=e,t}}class Ql{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xl{constructor(e){this.fields=e,e.sort(Ma.comparator)}static empty(){return new Xl([])}unionWith(e){let t=new Yl(Ma.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Xl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Jl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $l{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jl("Invalid base64 string: "+e):e}}(e);return new $l(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $l(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ta(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$l.EMPTY_BYTE_STRING=new $l("");const Zl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ec(e){if(ha(!!e,39018),"string"==typeof e){let t=0;const n=Zl.exec(e);if(ha(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:tc(e.seconds),nanos:tc(e.nanos)}}function tc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nc(e){return"string"==typeof e?$l.fromBase64String(e):$l.fromUint8Array(e)}const rc="server_timestamp",ic="__type__",oc="__previous_value__",sc="__local_write_time__";function ac(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ic])||void 0===t?void 0:t.stringValue)===rc}function lc(e){const t=e.mapValue.fields[oc];return ac(t)?lc(t):t}function cc(e){const t=ec(e.mapValue.fields[sc].timestampValue);return new Xa(t.seconds,t.nanos)}class uc{constructor(e,t,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const dc="(default)";class hc{constructor(e,t){this.projectId=e,this.database=t||dc}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===dc}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}const fc="__type__",pc="__max__",mc={mapValue:{fields:{__type__:{stringValue:pc}}}},gc="__vector__",yc="value";function vc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ac(e)?4:zc(e)?9007199254740991:Dc(e)?10:11:ua(28295,{value:e})}function bc(e,t){if(e===t)return!0;const n=vc(e);if(n!==vc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cc(e).isEqual(cc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ec(e.timestampValue),r=ec(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nc(e.bytesValue).isEqual(nc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tc(e.geoPointValue.latitude)===tc(t.geoPointValue.latitude)&&tc(e.geoPointValue.longitude)===tc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tc(e.integerValue)===tc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=tc(e.doubleValue),r=tc(t.doubleValue);return n===r?fl(n)===fl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Pa(e.arrayValue.values||[],t.arrayValue.values||[],bc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Wl(n)!==Wl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bc(n[i],r[i])))return!1;return!0}(e,t);default:return ua(52216,{left:e})}}function xc(e,t){return void 0!==(e.values||[]).find(e=>bc(e,t))}function wc(e,t){if(e===t)return 0;const n=vc(e),r=vc(t);if(n!==r)return Ta(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ta(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=tc(e.integerValue||e.doubleValue),r=tc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sc(e.timestampValue,t.timestampValue);case 4:return Sc(cc(e),cc(t));case 5:return Ia(e.stringValue,t.stringValue);case 6:return function(e,t){const n=nc(e),r=nc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ta(n[i],r[i]);if(0!==e)return e}return Ta(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ta(tc(e.latitude),tc(t.latitude));return 0!==n?n:Ta(tc(e.longitude),tc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return kc(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const s=e.fields||{},a=t.fields||{},l=null===(n=s[yc])||void 0===n?void 0:n.arrayValue,c=null===(r=a[yc])||void 0===r?void 0:r.arrayValue,u=Ta((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:kc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===mc.mapValue&&t===mc.mapValue)return 0;if(e===mc.mapValue)return 1;if(t===mc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Ia(r[s],o[s]);if(0!==e)return e;const t=wc(n[r[s]],i[o[s]]);if(0!==t)return t}return Ta(r.length,o.length)}(e.mapValue,t.mapValue);default:throw ua(23264,{he:n})}}function Sc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ta(e,t);const n=ec(e),r=ec(t),i=Ta(n.seconds,r.seconds);return 0!==i?i:Ta(n.nanos,r.nanos)}function kc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=wc(n[i],r[i]);if(e)return e}return Ta(n.length,r.length)}function Ec(e){return Cc(e)}function Cc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ec(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return nc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Oa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Cc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Cc(e.fields[i]));return n+"}"}(e.mapValue):ua(61005,{value:e})}function _c(e){switch(vc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=lc(e);return t?16+_c(t):16;case 5:return 2*e.stringValue.length;case 6:return nc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+_c(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Vl(e.fields,(e,n)=>{t+=e.length+_c(n)}),t}(e.mapValue);default:throw ua(13486,{value:e})}}function Tc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ic(e){return!!e&&"integerValue"in e}function jc(e){return!!e&&"arrayValue"in e}function Rc(e){return!!e&&"nullValue"in e}function Ac(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pc(e){return!!e&&"mapValue"in e}function Dc(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[fc])||void 0===t?void 0:t.stringValue)===gc}function Nc(e){if(e.geoPointValue)return{geoPointValue:Ie({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Ie({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Nc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nc(e.arrayValue.values[n]);return t}return Ie({},e)}function zc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===pc}class Lc{constructor(e){this.value=e}static empty(){return new Lc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Pc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=Ma.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Nc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Pc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Pc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Vl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Lc(Nc(this.value))}}function Mc(e){const t=[];return Vl(e.fields,(e,n)=>{const r=new Ma([e]);if(Pc(n)){const e=Mc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Xl(t)}class Oc{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Oc(e,0,Ja.min(),Ja.min(),Ja.min(),Lc.empty(),0)}static newFoundDocument(e,t,n,r){return new Oc(e,1,t,Ja.min(),n,r,0)}static newNoDocument(e,t){return new Oc(e,2,t,Ja.min(),Ja.min(),Lc.empty(),0)}static newUnknownDocument(e,t){return new Oc(e,3,t,Ja.min(),Ja.min(),Lc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ja.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ja.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Fc{constructor(e,t){this.position=e,this.inclusive=t}}function Uc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Oa.comparator(Oa.fromName(s.referenceValue),n.key):wc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Bc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bc(e.position[n],t.position[n]))return!1;return!0}class Wc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Vc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class qc{}class Hc extends qc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Zc(e,t,n):"array-contains"===t?new ru(e,n):"in"===t?new iu(e,n):"not-in"===t?new ou(e,n):"array-contains-any"===t?new su(e,n):new Hc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new eu(e,n):new tu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(wc(t,this.value)):null!==t&&vc(this.value)===vc(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ua(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gc extends qc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gc(e,t)}matches(e){return Kc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Kc(e){return"and"===e.op}function Yc(e){return Qc(e)&&Kc(e)}function Qc(e){for(const t of e.filters)if(t instanceof Gc)return!1;return!0}function Xc(e){if(e instanceof Hc)return e.field.canonicalString()+e.op.toString()+Ec(e.value);if(Yc(e))return e.filters.map(e=>Xc(e)).join(",");{const t=e.filters.map(e=>Xc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Jc(e,t){return e instanceof Hc?function(e,t){return t instanceof Hc&&e.op===t.op&&e.field.isEqual(t.field)&&bc(e.value,t.value)}(e,t):e instanceof Gc?function(e,t){return t instanceof Gc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Jc(n,t.filters[r]),!0)}(e,t):void ua(19439)}function $c(e){return e instanceof Hc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ec(e.value))}(e):e instanceof Gc?function(e){return e.op.toString()+" {"+e.getFilters().map($c).join(" ,")+"}"}(e):"Filter"}class Zc extends Hc{constructor(e,t,n){super(e,t,n),this.key=Oa.fromName(n.referenceValue)}matches(e){const t=Oa.comparator(e.key,this.key);return this.matchesComparison(t)}}class eu extends Hc{constructor(e,t){super(e,"in",t),this.keys=nu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tu extends Hc{constructor(e,t){super(e,"not-in",t),this.keys=nu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Oa.fromName(e.referenceValue))}class ru extends Hc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jc(t)&&xc(t.arrayValue,this.value)}}class iu extends Hc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xc(this.value.arrayValue,t)}}class ou extends Hc{constructor(e,t){super(e,"not-in",t)}matches(e){if(xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!xc(this.value.arrayValue,t)}}class su extends Hc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>xc(this.value.arrayValue,e))}}class au{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Te=null}}function lu(e){return new au(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function cu(e){const t=fa(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Xc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),hl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ec(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ec(e)).join(",")),t.Te=e}return t.Te}function uu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Vc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Jc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bc(e.startAt,t.startAt)&&Bc(e.endAt,t.endAt)}function du(e){return Oa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class hu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fu(e,t,n,r,i,o,s,a){return new hu(e,t,n,r,i,o,s,a)}function pu(e){return new hu(e)}function mu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gu(e){return null!==e.collectionGroup}function yu(e){const t=fa(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Yl(Ma.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Wc(r,n))}),e.has(Ma.keyField().canonicalString())||t.Ie.push(new Wc(Ma.keyField(),n))}return t.Ie}function vu(e){const t=fa(e);return t.Ee||(t.Ee=bu(t,yu(e))),t.Ee}function bu(e,t){if("F"===e.limitType)return lu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Wc(e.field,t)});const n=e.endAt?new Fc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Fc(e.startAt.position,e.startAt.inclusive):null;return lu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xu(e,t){const n=e.filters.concat([t]);return new hu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wu(e,t,n){return new hu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Su(e,t){return uu(vu(e),vu(t))&&e.limitType===t.limitType}function ku(e){return"".concat(cu(vu(e)),"|lt:").concat(e.limitType)}function Eu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>$c(e)).join(", "),"]")),hl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ec(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ec(e)).join(",")),"Target(".concat(t,")")}(vu(e)),"; limitType=").concat(e.limitType,")")}function Cu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Oa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of yu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Uc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,yu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Uc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,yu(e),t))}(e,t)}function _u(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Tu(e){return(t,n)=>{let r=!1;for(const i of yu(e)){const e=Iu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Iu(e,t,n){const r=e.field.isKeyField()?Oa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wc(r,i):ua(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ua(19790,{direction:e.dir})}}class ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ql(this.inner)}size(){return this.innerSize}}const Ru=new Hl(Oa.comparator);function Au(){return Ru}const Pu=new Hl(Oa.comparator);function Du(){let e=Pu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Nu(e){let t=Pu;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function zu(){return Mu()}function Lu(){return Mu()}function Mu(){return new ju(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ou=new Hl(Oa.comparator),Fu=new Yl(Oa.comparator);function Uu(){let e=Fu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Bu=new Yl(Ta);function Wu(){return Bu}function Vu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fl(t)?"-0":t}}function qu(e){return{integerValue:""+e}}function Hu(e,t){return pl(t)?qu(t):Vu(e,t)}class Gu{constructor(){this._=void 0}}function Ku(e,t,n){return e instanceof Xu?function(e,t){const n={fields:{[ic]:{stringValue:rc},[sc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ac(t)&&(t=lc(t)),t&&(n.fields[oc]=t),{mapValue:n}}(n,t):e instanceof Ju?$u(e,t):e instanceof Zu?ed(e,t):function(e,t){const n=Qu(e,t),r=nd(n)+nd(e.Ae);return Ic(n)&&Ic(e.Ae)?qu(r):Vu(e.serializer,r)}(e,t)}function Yu(e,t,n){return e instanceof Ju?$u(e,t):e instanceof Zu?ed(e,t):n}function Qu(e,t){return e instanceof td?function(e){return Ic(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xu extends Gu{}class Ju extends Gu{constructor(e){super(),this.elements=e}}function $u(e,t){const n=rd(t);for(const r of e.elements)n.some(e=>bc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Zu extends Gu{constructor(e){super(),this.elements=e}}function ed(e,t){let n=rd(t);for(const r of e.elements)n=n.filter(e=>!bc(e,r));return{arrayValue:{values:n}}}class td extends Gu{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nd(e){return tc(e.integerValue||e.doubleValue)}function rd(e){return jc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class id{constructor(e,t){this.field=e,this.transform=t}}class od{constructor(e,t){this.version=e,this.transformResults=t}}class sd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sd}static exists(e){return new sd(void 0,e)}static updateTime(e){return new sd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ld{}function cd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new bd(e.key,sd.none()):new pd(e.key,e.data,sd.none());{const n=e.data,r=Lc.empty();let i=new Yl(Ma.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new md(e.key,r,new Xl(i.toArray()),sd.none())}}function ud(e,t,n){e instanceof pd?function(e,t,n){const r=e.value.clone(),i=yd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof md?function(e,t,n){if(!ad(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=yd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(gd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dd(e,t,n,r){return e instanceof pd?function(e,t,n,r){if(!ad(e.precondition,t))return n;const i=e.value.clone(),o=vd(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof md?function(e,t,n,r){if(!ad(e.precondition,t))return n;const i=vd(e.fieldTransforms,r,t),o=t.data;return o.setAll(gd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ad(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Qu(r.transform,e||null);null!=i&&(null===n&&(n=Lc.empty()),n.set(r.field,i))}return n||null}function fd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Pa(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ju&&t instanceof Ju||e instanceof Zu&&t instanceof Zu?Pa(e.elements,t.elements,bc):e instanceof td&&t instanceof td?bc(e.Ae,t.Ae):e instanceof Xu&&t instanceof Xu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pd extends ld{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class md extends ld{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function yd(e,t,n){const r=new Map;ha(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Yu(s,a,n[i]))}return r}function vd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Ku(e,o,t))}return r}class bd extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xd extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ud(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=dd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=dd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Lu();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=cd(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Ja.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Uu())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(e,t)=>fd(e,t))&&Pa(this.baseMutations,e.baseMutations,(e,t)=>fd(e,t))}}class Sd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ha(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Ou;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Sd(e,t,n,r)}}class kd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ed{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cd,_d;function Td(e){switch(e){case pa.OK:return ua(64938);case pa.CANCELLED:case pa.UNKNOWN:case pa.DEADLINE_EXCEEDED:case pa.RESOURCE_EXHAUSTED:case pa.INTERNAL:case pa.UNAVAILABLE:case pa.UNAUTHENTICATED:return!1;case pa.INVALID_ARGUMENT:case pa.NOT_FOUND:case pa.ALREADY_EXISTS:case pa.PERMISSION_DENIED:case pa.FAILED_PRECONDITION:case pa.ABORTED:case pa.OUT_OF_RANGE:case pa.UNIMPLEMENTED:case pa.DATA_LOSS:return!0;default:return ua(15467,{code:e})}}function Id(e){if(void 0===e)return aa("GRPC error has no .code"),pa.UNKNOWN;switch(e){case Cd.OK:return pa.OK;case Cd.CANCELLED:return pa.CANCELLED;case Cd.UNKNOWN:return pa.UNKNOWN;case Cd.DEADLINE_EXCEEDED:return pa.DEADLINE_EXCEEDED;case Cd.RESOURCE_EXHAUSTED:return pa.RESOURCE_EXHAUSTED;case Cd.INTERNAL:return pa.INTERNAL;case Cd.UNAVAILABLE:return pa.UNAVAILABLE;case Cd.UNAUTHENTICATED:return pa.UNAUTHENTICATED;case Cd.INVALID_ARGUMENT:return pa.INVALID_ARGUMENT;case Cd.NOT_FOUND:return pa.NOT_FOUND;case Cd.ALREADY_EXISTS:return pa.ALREADY_EXISTS;case Cd.PERMISSION_DENIED:return pa.PERMISSION_DENIED;case Cd.FAILED_PRECONDITION:return pa.FAILED_PRECONDITION;case Cd.ABORTED:return pa.ABORTED;case Cd.OUT_OF_RANGE:return pa.OUT_OF_RANGE;case Cd.UNIMPLEMENTED:return pa.UNIMPLEMENTED;case Cd.DATA_LOSS:return pa.DATA_LOSS;default:return ua(39323,{code:e})}}(_d=Cd||(Cd={}))[_d.OK=0]="OK",_d[_d.CANCELLED=1]="CANCELLED",_d[_d.UNKNOWN=2]="UNKNOWN",_d[_d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_d[_d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_d[_d.NOT_FOUND=5]="NOT_FOUND",_d[_d.ALREADY_EXISTS=6]="ALREADY_EXISTS",_d[_d.PERMISSION_DENIED=7]="PERMISSION_DENIED",_d[_d.UNAUTHENTICATED=16]="UNAUTHENTICATED",_d[_d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_d[_d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_d[_d.ABORTED=10]="ABORTED",_d[_d.OUT_OF_RANGE=11]="OUT_OF_RANGE",_d[_d.UNIMPLEMENTED=12]="UNIMPLEMENTED",_d[_d.INTERNAL=13]="INTERNAL",_d[_d.UNAVAILABLE=14]="UNAVAILABLE",_d[_d.DATA_LOSS=15]="DATA_LOSS";let jd=null;function Rd(){return new TextEncoder}const Ad=new Us([4294967295,4294967295],0);function Pd(e){const t=Rd().encode(e),n=new Bs;return n.update(t),new Uint8Array(n.digest())}function Dd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Us([n,r],0),new Us([i,o],0)]}class Nd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new zd("Invalid padding: ".concat(t));if(n<0)throw new zd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new zd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new zd("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Us.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Us.fromNumber(n)));return 1===r.compare(Ad)&&(r=new Us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Pd(e),[n,r]=Dd(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nd(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=Pd(e),[n,r]=Dd(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ld{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ld(Ja.min(),r,new Hl(Ta),Au(),Uu())}}class Md{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Md(n,t,Uu(),Uu(),Uu())}}class Od{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Fd{constructor(e,t){this.targetId=e,this.Ce=t}}class Ud{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$l.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Bd{constructor(){this.ve=0,this.Fe=qd(),this.Me=$l.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Uu(),t=Uu(),n=Uu();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ua(38017,{changeType:i})}}),new Md(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=qd()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ha(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wd{constructor(e){this.Ge=e,this.ze=new Map,this.je=Au(),this.Je=Vd(),this.He=Vd(),this.Ye=new Hl(Ta)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ua(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(du(o))if(0===n){const e=new Oa(o.path);this.et(t,e,Oc.newNoDocument(e,Ja.min()))}else ha(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=jd)||void 0===i||i.lt(function(e,t,n,r,i,o,s,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(s=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=nc(n).toUint8Array()}catch(e){if(e instanceof Jl)return la("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Nd(o,r,i)}catch(e){return la(e instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&du(i.target)){const t=new Oa(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Oc.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Uu();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Ld(e,t,this.Ye,this.je,n);return this.je=Au(),this.Je=Vd(),this.He=Vd(),this.Ye=new Hl(Ta),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Bd,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yl(Ta),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yl(Ta),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||sa("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bd),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vd(){return new Hl(Oa.comparator)}function qd(){return new Hl(Oa.comparator)}const Hd={asc:"ASCENDING",desc:"DESCENDING"},Gd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kd={and:"AND",or:"OR"};class Yd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qd(e,t){return e.useProto3Json||hl(t)?t:{value:t}}function Xd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $d(e,t){return Xd(e,t.toTimestamp())}function Zd(e){return ha(!!e,49232),Ja.fromTimestamp(function(e){const t=ec(e);return new Xa(t.seconds,t.nanos)}(e))}function eh(e,t){return th(e,t).canonicalString()}function th(e,t){const n=function(e){return new za(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function nh(e){const t=za.fromString(e);return ha(Sh(t),10190,{key:t.toString()}),t}function rh(e,t){return eh(e.databaseId,t.path)}function ih(e,t){const n=nh(t);if(n.get(1)!==e.databaseId.projectId)throw new ma(pa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ma(pa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Oa(lh(n))}function oh(e,t){return eh(e.databaseId,t)}function sh(e){const t=nh(e);return 4===t.length?za.emptyPath():lh(t)}function ah(e){return new za(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lh(e){return ha(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ch(e,t,n){return{name:rh(e,t),fields:n.value.mapValue.fields}}function uh(e,t){let n;if(t instanceof pd)n={update:ch(e,t.key,t.value)};else if(t instanceof bd)n={delete:rh(e,t.key)};else if(t instanceof md)n={update:ch(e,t.key,t.data),updateMask:wh(t.fieldMask)};else{if(!(t instanceof xd))return ua(16599,{Vt:t.type});n={verify:rh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Xu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ju)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof td)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ua(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$d(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ua(27497)}(e,t.precondition)),n}function dh(e,t){return{documents:[oh(e,t.path)]}}function hh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oh(e,i);const o=function(e){if(0!==e.length)return xh(Gc.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:vh(e.field),direction:mh(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Qd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function fh(e){let t=sh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ha(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=ph(e);return t instanceof Gc&&Yc(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new Wc(bh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,hl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Fc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Fc(n,t)}(n.endAt)),fu(t,i,s,o,a,"F",l,c)}function ph(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bh(e.unaryFilter.field);return Hc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=bh(e.unaryFilter.field);return Hc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bh(e.unaryFilter.field);return Hc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bh(e.unaryFilter.field);return Hc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ua(61313);default:return ua(60726)}}(e):void 0!==e.fieldFilter?function(e){return Hc.create(bh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ua(58110);default:return ua(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Gc.create(e.compositeFilter.filters.map(e=>ph(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ua(1026)}}(e.compositeFilter.op))}(e):ua(30097,{filter:e})}function mh(e){return Hd[e]}function gh(e){return Gd[e]}function yh(e){return Kd[e]}function vh(e){return{fieldPath:e.canonicalString()}}function bh(e){return Ma.fromServerFormat(e.fieldPath)}function xh(e){return e instanceof Hc?function(e){if("=="===e.op){if(Ac(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NAN"}};if(Rc(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ac(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NOT_NAN"}};if(Rc(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vh(e.field),op:gh(e.op),value:e.value}}}(e):e instanceof Gc?function(e){const t=e.getFilters().map(e=>xh(e));return 1===t.length?t[0]:{compositeFilter:{op:yh(e.op),filters:t}}}(e):ua(54877,{filter:e})}function wh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Sh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class kh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ja.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ja.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$l.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new kh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Eh{constructor(e){this.yt=e}}function Ch(e){const t=fh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wu(t,t.limit,"L"):t}class _h{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(tc(e.integerValue));else if("doubleValue"in e){const n=tc(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),fl(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=ec(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(nc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?zc(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Dc(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ua(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=yc,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(tc(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Oa.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}_h.Kt=new _h;class Th{constructor(){this.Cn=new Ih}addToCollectionParentIndex(e,t){return this.Cn.add(t),al.resolve()}getCollectionParents(e,t){return al.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return al.resolve()}deleteFieldIndex(e,t){return al.resolve()}deleteAllFieldIndexes(e){return al.resolve()}createTargetIndexes(e,t){return al.resolve()}getDocumentsMatchingTarget(e,t){return al.resolve(null)}getIndexType(e,t){return al.resolve(0)}getFieldIndexes(e,t){return al.resolve([])}getNextCollectionGroupToUpdate(e){return al.resolve(null)}getMinOffset(e,t){return al.resolve(nl.min())}getMinOffsetFromCollectionGroup(e,t){return al.resolve(nl.min())}updateCollectionGroup(e,t,n){return al.resolve()}updateIndexEntries(e,t){return al.resolve()}}class Ih{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Yl(za.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Yl(za.comparator)).toArray()}}new Uint8Array(0);const jh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rh=41943040;class Ah{static withCacheSize(e){return new Ah(e,Ah.DEFAULT_COLLECTION_PERCENTILE,Ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ah.DEFAULT_COLLECTION_PERCENTILE=10,Ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ah.DEFAULT=new Ah(Rh,Ah.DEFAULT_COLLECTION_PERCENTILE,Ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ah.DISABLED=new Ah(-1,0,0);class Ph{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ph(0)}static cr(){return new Ph(-1)}}const Dh="LruGarbageCollector",Nh=1048576;function zh(e,t){let[n,r]=e,[i,o]=t;const s=Ta(n,i);return 0===s?Ta(r,o):s}class Lh{constructor(e){this.Ir=e,this.buffer=new Yl(zh),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();zh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){sa(Dh,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){cl(e)?sa(Dh,"Ignoring IndexedDB error during garbage collection: ",e):await sl(e)}await this.Vr(3e5)})}}class Oh{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return al.resolve(ul.ce);const n=new Lh(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(sa("LruGarbageCollector","Garbage collection skipped; disabled"),al.resolve(jh)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(sa("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),jh):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(sa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),oa()<=Nt.DEBUG&&sa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),al.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Fh(e,t){return new Oh(e,t)}class Uh{constructor(){this.changes=new ju(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?al.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&dd(n.mutation,e,Xl.empty(),Xa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Uu()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uu();const r=zu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Du();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=zu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Uu()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Au();const o=Mu(),s=Mu();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof md)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),dd(s.mutation,t,s.mutation.getFieldMask(),Xa.now())):o.set(t.key,Xl.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Bh(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=Mu();let r=new Hl((e,t)=>e-t),i=Uu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Xl.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Uu()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Lu();l.forEach(e=>{if(!i.has(e)){const r=cd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return al.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Oa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):al.resolve(zu());let s=$a,a=i;return o.next(t=>al.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?al.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Uu())).next(e=>({batchId:s,changes:Nu(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oa(t)).next(e=>{let t=Du();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Du();return this.indexManager.getCollectionParents(e,i).next(s=>al.forEach(s,s=>{const a=function(e,t){return new hu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Oc.newInvalidDocument(r)))});let n=Du();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&dd(o.mutation,r,Xl.empty(),Xa.now()),Cu(t,r)&&(n=n.insert(e,r))}),n})}}class Vh{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return al.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Zd(e.createTime)}}(t)),al.resolve()}getNamedQuery(e,t){return al.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Ch(e.bundledQuery),readTime:Zd(e.readTime)}}(t)),al.resolve()}}class qh{constructor(){this.overlays=new Hl(Oa.comparator),this.qr=new Map}getOverlay(e,t){return al.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zu();return al.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),al.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),al.resolve()}getOverlaysForCollection(e,t,n){const r=zu(),i=t.length+1,o=new Oa(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return al.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Hl((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=zu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=zu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return al.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kd(t,n));let i=this.qr.get(t);void 0===i&&(i=Uu(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Hh{constructor(){this.sessionToken=$l.EMPTY_BYTE_STRING}getSessionToken(e){return al.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,al.resolve()}}class Gh{constructor(){this.Qr=new Yl(Kh.$r),this.Ur=new Yl(Kh.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Kh(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Kh(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Oa(new za([])),n=new Kh(t,e),r=new Kh(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Oa(new za([])),n=new Kh(t,e),r=new Kh(t,e+1);let i=Uu();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Kh(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Kh{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Oa.comparator(e.key,t.key)||Ta(e.Yr,t.Yr)}static Kr(e,t){return Ta(e.Yr,t.Yr)||Oa.comparator(e.key,t.key)}}class Yh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yl(Kh.$r)}checkEmpty(e){return al.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wd(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Zr=this.Zr.add(new Kh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return al.resolve(o)}lookupMutationBatch(e,t){return al.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return al.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return al.resolve(0===this.mutationQueue.length?dl:this.tr-1)}getAllMutationBatches(e){return al.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Kh(t,0),r=new Kh(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),al.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yl(Ta);return t.forEach(e=>{const t=new Kh(e,0),r=new Kh(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),al.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Oa.isDocumentKey(i)||(i=i.child(""));const o=new Kh(new Oa(i),0);let s=new Yl(Ta);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Yr)),!0)},o),al.resolve(this.ti(s))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ha(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return al.forEach(t.mutations,r=>{const i=new Kh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Kh(t,0),r=this.Zr.firstAfterOrEqual(n);return al.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,al.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qh{constructor(e){this.ri=e,this.docs=new Hl(Oa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return al.resolve(n?n.document.mutableCopy():Oc.newInvalidDocument(t))}getEntries(e,t){let n=Au();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oc.newInvalidDocument(e))}),al.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Au();const o=t.path,s=new Oa(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||rl(tl(s),n)<=0||(r.has(s.key)||Cu(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return al.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ua(9500)}ii(e,t){return al.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Xh(this)}getSize(e){return al.resolve(this.size)}}class Xh extends Uh{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),al.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Jh{constructor(e){this.persistence=e,this.si=new ju(e=>cu(e),uu),this.lastRemoteSnapshotVersion=Ja.min(),this.highestTargetId=0,this.oi=0,this._i=new Gh,this.targetCount=0,this.ai=Ph.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),al.resolve()}getLastRemoteSnapshotVersion(e){return al.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return al.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),al.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),al.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ph(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,al.resolve()}updateTargetData(e,t){return this.Pr(t),al.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,al.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),al.waitFor(i).next(()=>r)}getTargetCount(e){return al.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return al.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),al.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),al.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),al.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return al.resolve(n)}containsKey(e,t){return al.resolve(this._i.containsKey(t))}}class $h{constructor(e,t){this.ui={},this.overlays={},this.ci=new ul(0),this.li=!1,this.li=!0,this.hi=new Hh,this.referenceDelegate=e(this),this.Pi=new Jh(this),this.indexManager=new Th,this.remoteDocumentCache=function(e){return new Qh(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Eh(t),this.Ii=new Vh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Yh(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){sa("MemoryPersistence","Starting transaction:",e);const r=new Zh(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return al.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Zh extends ol{constructor(e){super(),this.currentSequenceNumber=e}}class ef{constructor(e){this.persistence=e,this.Ri=new Gh,this.Vi=null}static mi(e){return new ef(e)}get fi(){if(this.Vi)return this.Vi;throw ua(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),al.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),al.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),al.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return al.forEach(this.fi,n=>{const r=Oa.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Ja.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return al.or([()=>al.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.pi=new ju(e=>gl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Fh(this,t)}static mi(e,t){return new tf(e,t)}Ei(){}di(e){return al.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return al.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?al.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Ja.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),al.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),al.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),al.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),al.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_c(e.data.value)),t}br(e,t,n){return al.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return al.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class nf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Uu(),r=Uu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new nf(e,t.fromCache,n,r)}}class rf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class of{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=gt()?8:ll(pt())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new rf;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(oa()<=Nt.DEBUG&&sa("QueryEngine","SDK will not create cache indexes for query:",Eu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),al.resolve()):(oa()<=Nt.DEBUG&&sa("QueryEngine","Query:",Eu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(oa()<=Nt.DEBUG&&sa("QueryEngine","The SDK decides to create cache indexes for query:",Eu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vu(t))):al.resolve())}ys(e,t){if(mu(t))return al.resolve(null);let n=vu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=wu(t,null,"F"),n=vu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Uu(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,wu(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return mu(t)||r.isEqual(Ja.min())?al.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?al.resolve(null):(oa()<=Nt.DEBUG&&sa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Eu(t)),this.vs(e,o,t,el(r,$a)).next(e=>e))})}Ds(e,t){let n=new Yl(Tu(e));return t.forEach((t,r)=>{Cu(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return oa()<=Nt.DEBUG&&sa("QueryEngine","Using full collection scan to execute query:",Eu(t)),this.ps.getDocumentsMatchingQuery(e,t,nl.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const sf="LocalStore";class af{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Hl(Ta),this.xs=new ju(e=>cu(e),uu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wh(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function lf(e,t,n,r){return new af(e,t,n,r)}async function cf(e,t){const n=fa(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=Uu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function uf(e){const t=fa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function df(e,t,n){let r=Uu(),i=Uu();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Au();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Ja.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):sa(sf,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{ks:r,qs:i}})}function hf(e,t){const n=fa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=dl),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ff(e,t){const n=fa(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,al.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new kh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function pf(e,t,n){const r=fa(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!cl(e))throw e;sa(sf,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function mf(e,t,n){const r=fa(e);let i=Ja.min(),o=Uu();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=fa(e),i=r.xs.get(n);return void 0!==i?al.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,vu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Ja.min(),n?o:Uu())).next(e=>(gf(r,_u(t),e),{documents:e,Qs:o})))}function gf(e,t,n){let r=e.Os.get(t)||Ja.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class yf{constructor(){this.activeTargetIds=Wu()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vf{constructor(){this.Mo=new yf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bf{Oo(e){}shutdown(){}}const xf="ConnectivityMonitor";class wf{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){sa(xf,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){sa(xf,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Sf=null;function kf(){return null===Sf?Sf=268435456+Math.round(2147483648*Math.random()):Sf++,"0x"+Sf.toString(16)}const Ef="RestConnection",Cf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _f{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===dc?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=kf(),s=this.zo(e,t.toUriEncodedString());sa(Ef,"Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(s),c=lt(l);return this.Jo(e,s,a,n,c).then(t=>(sa(Ef,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw la(Ef,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ra,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Cf[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Tf{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const If="WebChannelConnection";class jf extends _f{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=kf();return new Promise((i,s)=>{const a=new qs;a.setWithCredentials(!0),a.listenOnce(Gs.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ks.NO_ERROR:const n=a.getResponseJson();sa(If,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case Ks.TIMEOUT:sa(If,"RPC '".concat(e,"' ").concat(o," timed out")),s(new ma(pa.DEADLINE_EXCEEDED,"Request time out"));break;case Ks.HTTP_ERROR:const r=a.getStatus();if(sa(If,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(pa).indexOf(t)>=0?t:pa.UNKNOWN}(n.status);s(new ma(e,n.message))}else s(new ma(pa.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new ma(pa.UNAVAILABLE,"Connection failed."));break;default:ua(9055,{l_:e,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{sa(If,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);sa(If,"RPC '".concat(e,"' ").concat(o," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=kf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Js(),s=Xs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");sa(If,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);this.I_(u);let d=!1,h=!1;const f=new Tf({Yo:t=>{h?sa(If,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(sa(If,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),sa(If,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Hs.EventType.OPEN,()=>{h||(sa(If,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Hs.EventType.CLOSE,()=>{h||(h=!0,sa(If,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Hs.EventType.ERROR,t=>{h||(h=!0,la(If,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new ma(pa.UNAVAILABLE,"The operation could not be completed")))}),p(u,Hs.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];ha(!!i,16349);const o=i,s=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){sa(If,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Cd[e];if(void 0!==t)return Id(t)}(t),i=s.message;void 0===n&&(n=pa.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.a_(new ma(n,i)),u.close()}else sa(If,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(s,Qs.STAT_EVENT,t=>{t.stat===Ys.PROXY?sa(If,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ys.NOPROXY&&sa(If,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Rf(){return"undefined"!=typeof document?document:null}function Af(e){return new Yd(e,!0)}class Pf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&sa("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Df="PersistentStream";class Nf{constructor(e,t,n,r,i,o,s,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pf(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===pa.RESOURCE_EXHAUSTED?(aa(t.toString()),aa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ma(pa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return sa(Df,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(sa(Df,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zf extends Nf{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ua(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(ha(void 0===t||"string"==typeof t,58123),$l.fromBase64String(t||"")):(ha(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),$l.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?pa.UNKNOWN:Id(e.code);return new ma(t,e.message||"")}(s);n=new Ud(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ih(e,r.document.name),o=Zd(r.document.updateTime),s=r.document.createTime?Zd(r.document.createTime):Ja.min(),a=new Lc({mapValue:{fields:r.document.fields}}),l=Oc.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Od(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ih(e,r.document),o=r.readTime?Zd(r.readTime):Ja.min(),s=Oc.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Od([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ih(e,r.document),o=r.removedTargetIds||[];n=new Od([],o,i,null)}else{if(!("filter"in t))return ua(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Ed(r,i),s=e.targetId;n=new Fd(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ja.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ja.min():t.readTime?Zd(t.readTime):Ja.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ah(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=du(r)?{documents:dh(e,r)}:{query:hh(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jd(e,t.resumeToken);const r=Qd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ja.min())>0){n.readTime=Xd(e,t.snapshotVersion.toTimestamp());const r=Qd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ua(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ah(this.serializer),t.removeTarget=e,this.q_(t)}}class Lf extends Nf{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ha(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ha(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){ha(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(ha(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Zd(e.updateTime):Zd(t);return n.isEqual(Ja.min())&&(n=Zd(t)),new od(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Zd(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ah(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>uh(this.serializer,e))};this.q_(t)}}class Mf{}class Of extends Mf{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ma(pa.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.Go(e,th(t,n),r,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===pa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ma(pa.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[s,a]=o;return this.connection.Ho(e,th(t,n),r,s,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===pa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ma(pa.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ff{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(aa(t),this.aa=!1):sa("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Uf="RemoteStore";class Bf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Xf(this)&&(sa(Uf,"Restarting streams for network reachability change."),await async function(e){const t=fa(e);t.Ea.add(4),await Vf(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Wf(t)}(this))})}),this.Ra=new Ff(n,r)}}async function Wf(e){if(Xf(e))for(const t of e.da)await t(!0)}async function Vf(e){for(const t of e.da)await t(!1)}function qf(e,t){const n=fa(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Qf(n)?Yf(n):mp(n).O_()&&Gf(n,t))}function Hf(e,t){const n=fa(e),r=mp(n);n.Ia.delete(t),r.O_()&&Kf(n,t),0===n.Ia.size&&(r.O_()?r.L_():Xf(n)&&n.Ra.set("Unknown"))}function Gf(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ja.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mp(e).Y_(t)}function Kf(e,t){e.Va.Ue(t),mp(e).Z_(t)}function Yf(e){e.Va=new Wd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),mp(e).start(),e.Ra.ua()}function Qf(e){return Xf(e)&&!mp(e).x_()&&e.Ia.size>0}function Xf(e){return 0===fa(e).Ea.size}function Jf(e){e.Va=void 0}async function $f(e){e.Ra.set("Online")}async function Zf(e){e.Ia.forEach((t,n)=>{Gf(e,t)})}async function ep(e,t){Jf(e),Qf(e)?(e.Ra.ha(t),Yf(e)):e.Ra.set("Unknown")}async function tp(e,t,n){if(e.Ra.set("Online"),t instanceof Ud&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){sa(Uf,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await np(e,n)}else if(t instanceof Od?e.Va.Ze(t):t instanceof Fd?e.Va.st(t):e.Va.tt(t),!n.isEqual(Ja.min()))try{const t=await uf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken($l.EMPTY_BYTE_STRING,r.snapshotVersion)),Kf(e,t);const i=new kh(r.target,t,n,r.sequenceNumber);Gf(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sa(Uf,"Failed to raise snapshot:",t),await np(e,t)}}async function np(e,t,n){if(!cl(t))throw t;e.Ea.add(1),await Vf(e),e.Ra.set("Offline"),n||(n=()=>uf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sa(Uf,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Wf(e)})}function rp(e,t){return t().catch(n=>np(e,n,t))}async function ip(e){const t=fa(e),n=gp(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:dl;for(;op(t);)try{const e=await hf(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,sp(t,e)}catch(e){await np(t,e)}ap(t)&&lp(t)}function op(e){return Xf(e)&&e.Ta.length<10}function sp(e,t){e.Ta.push(t);const n=gp(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ap(e){return Xf(e)&&!gp(e).x_()&&e.Ta.length>0}function lp(e){gp(e).start()}async function cp(e){gp(e).ra()}async function up(e){const t=gp(e);for(const n of e.Ta)t.ea(n.mutations)}async function dp(e,t,n){const r=e.Ta.shift(),i=Sd.from(r,t,n);await rp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ip(e)}async function hp(e,t){t&&gp(e).X_&&await async function(e,t){if(function(e){return Td(e)&&e!==pa.ABORTED}(t.code)){const n=e.Ta.shift();gp(e).B_(),await rp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ip(e)}}(e,t),ap(e)&&lp(e)}async function fp(e,t){const n=fa(e);n.asyncQueue.verifyOperationInProgress(),sa(Uf,"RemoteStore received new credentials");const r=Xf(n);n.Ea.add(3),await Vf(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Wf(n)}async function pp(e,t){const n=fa(e);t?(n.Ea.delete(2),await Wf(n)):t||(n.Ea.add(2),await Vf(n),n.Ra.set("Unknown"))}function mp(e){return e.ma||(e.ma=function(e,t,n){const r=fa(e);return r.sa(),new zf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:$f.bind(null,e),t_:Zf.bind(null,e),r_:ep.bind(null,e),H_:tp.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Qf(e)?Yf(e):e.Ra.set("Unknown")):(await e.ma.stop(),Jf(e))})),e.ma}function gp(e){return e.fa||(e.fa=function(e,t,n){const r=fa(e);return r.sa(),new Lf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:cp.bind(null,e),r_:hp.bind(null,e),ta:up.bind(null,e),na:dp.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ip(e)):(await e.fa.stop(),e.Ta.length>0&&(sa(Uf,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class yp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new yp(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ma(pa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(e,t){if(aa("AsyncQueue","".concat(t,": ").concat(e)),cl(e))return new ma(pa.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class bp{static emptySet(e){return new bp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Oa.comparator(t.key,n.key):(e,t)=>Oa.comparator(e.key,t.key),this.keyedMap=Du(),this.sortedSet=new Hl(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new bp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class xp{constructor(){this.ga=new Hl(Oa.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ua(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class wp{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new wp(e,t,bp.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Sp{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class kp{constructor(){this.queries=Ep(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=fa(e),r=n.queries;n.queries=Ep(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new ma(pa.ABORTED,"Firestore shutting down"))}}function Ep(){return new ju(e=>ku(e),Su)}async function Cp(e,t){const n=fa(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new Sp,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=vp(e,"Initialization of query '".concat(Eu(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&jp(n)}async function _p(e,t){const n=fa(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Tp(e,t){const n=fa(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&jp(n)}function Ip(e,t,n){const r=fa(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function jp(e){e.Ca.forEach(e=>{e.next()})}var Rp,Ap;(Ap=Rp||(Rp={})).Ma="default",Ap.Cache="cache";class Pp{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=wp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rp.Cache}}class Dp{constructor(e){this.key=e}}class Np{constructor(e){this.key=e}}class zp{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Uu(),this.mutatedKeys=Uu(),this.eu=Tu(e),this.tu=new bp(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new xp,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Cu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ua(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==o.length||l?{snapshot:new wp(this.query,e.tu,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Uu(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Np(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Dp(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Uu();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Lp="SyncEngine";class Mp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Op{constructor(e){this.key=e,this.hu=!1}}class Fp{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ju(e=>ku(e),Su),this.Iu=new Map,this.Eu=new Set,this.du=new Hl(Oa.comparator),this.Au=new Map,this.Ru=new Gh,this.Vu={},this.mu=new Map,this.fu=Ph.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Up(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=am(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Wp(r,t,n,!0),i}async function Bp(e,t){const n=am(e);await Wp(n,t,!0,!1)}async function Wp(e,t,n,r){const i=await ff(e.localStore,vu(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Vp(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&qf(e.remoteStore,i),a}async function Vp(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await mf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return tm(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const o=await mf(e.localStore,t,!0),s=new zp(t,o.Qs),a=s.ru(o.documents),l=Md.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);tm(e,n,c.au);const u=new Mp(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function qp(e,t,n){const r=fa(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!Su(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Hf(r.remoteStore,i.targetId),Zp(r,i.targetId)}).catch(sl)):(Zp(r,i.targetId),await pf(r.localStore,i.targetId,!0))}async function Hp(e,t){const n=fa(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hf(n.remoteStore,r.targetId))}async function Gp(e,t){const n=fa(e);try{const e=await function(e,t){const n=fa(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken($l.EMPTY_BYTE_STRING,Ja.min()).withLastLimboFreeSnapshotVersion(Ja.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.Pi.updateTargetData(e,c))});let a=Au(),l=Uu();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(df(e,o,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Ja.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return al.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(ha(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?ha(r.hu,14607):e.removedDocuments.size>0&&(ha(r.hu,42227),r.hu=!1))}),await im(n,e,t)}catch(e){await sl(e)}}function Kp(e,t,n){const r=fa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=fa(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&jp(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Yp(e,t,n){const r=fa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new Hl(Oa.comparator);e=e.insert(o,Oc.newNoDocument(o,Ja.min()));const n=Uu().add(o),i=new Ld(Ja.min(),new Map,new Hl(Ta),e,n);await Gp(r,i),r.du=r.du.remove(o),r.Au.delete(t),rm(r)}else await pf(r.localStore,t,!1).then(()=>Zp(r,t,n)).catch(sl)}async function Qp(e,t){const n=fa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=fa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=al.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);ha(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Uu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);$p(n,r,null),Jp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await im(n,e)}catch(e){await sl(e)}}async function Xp(e,t,n){const r=fa(e);try{const e=await function(e,t){const n=fa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ha(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);$p(r,t,n),Jp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await im(r,e)}catch(n){await sl(n)}}function Jp(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function $p(e,t,n){const r=fa(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Zp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||em(e,t)})}function em(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Hf(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),rm(e))}function tm(e,t,n){for(const r of n)r instanceof Dp?(e.Ru.addReference(r.key,t),nm(e,r)):r instanceof Np?(sa(Lp,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||em(e,r.key)):ua(19791,{wu:r})}function nm(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(sa(Lp,"New document in limbo: "+n),e.Eu.add(r),rm(e))}function rm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Oa(za.fromString(t)),r=e.fu.next();e.Au.set(r,new Op(n)),e.du=e.du.insert(n,r),qf(e.remoteStore,new kh(vu(pu(n.path)),r,"TargetPurposeLimboResolution",ul.ce))}}async function im(e,t,n){const r=fa(e),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{s.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=nf.As(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(e,t){const n=fa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>al.forEach(t,t=>al.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>al.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!cl(e))throw e;sa(sf,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function om(e,t){const n=fa(e);if(!n.currentUser.isEqual(t)){sa(Lp,"User change. New user:",t.toKey());const e=await cf(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ma(pa.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await im(n,e.Ls)}}function sm(e,t){const n=fa(e),r=n.Au.get(t);if(r&&r.hu)return Uu().add(r.key);{let e=Uu();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function am(e){const t=fa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yp.bind(null,t),t.Pu.H_=Tp.bind(null,t.eventManager),t.Pu.yu=Ip.bind(null,t.eventManager),t}function lm(e){const t=fa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xp.bind(null,t),t}class cm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lf(this.persistence,new of,e.initialUser,this.serializer)}Cu(e){return new $h(ef.mi,this.serializer)}Du(e){return new vf}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cm.provider={build:()=>new cm};class um extends cm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ha(this.persistence.referenceDelegate instanceof tf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Mh(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Ah.withCacheSize(this.cacheSizeBytes):Ah.DEFAULT;return new $h(e=>tf.mi(e,t),this.serializer)}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=om.bind(null,this.syncEngine),await pp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new kp}createDatastore(e){const t=Af(e.databaseInfo.databaseId),n=function(e){return new jf(e)}(e.databaseInfo);return function(e,t,n,r){return new Of(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Bf(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Kp(this.syncEngine,e,0),wf.v()?new wf:new bf)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Fp(e,t,n,r,i,o);return s&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=fa(e);sa(Uf,"RemoteStore shutting down."),t.Ea.add(5),await Vf(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}dm.provider={build:()=>new dm};class hm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):aa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const fm="FirestoreClient";class pm{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=na.UNAUTHENTICATED,this.clientId=_a.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{sa(fm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(sa(fm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function mm(e,t){e.asyncQueue.verifyOperationInProgress(),sa(fm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await cf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ym(e);sa(fm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>fp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>fp(t.remoteStore,n)),e._onlineComponents=t}async function ym(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sa(fm,"Using user provided OfflineComponentProvider");try{await mm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===pa.FAILED_PRECONDITION||e.code===pa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;la("Error using user provided cache. Falling back to memory cache: "+n),await mm(e,new cm)}}else sa(fm,"Using default OfflineComponentProvider"),await mm(e,new um(void 0));return e._offlineComponents}async function vm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sa(fm,"Using user provided OnlineComponentProvider"),await gm(e,e._uninitializedComponentsProvider._online)):(sa(fm,"Using default OnlineComponentProvider"),await gm(e,new dm))),e._onlineComponents}function bm(e){return vm(e).then(e=>e.syncEngine)}async function xm(e){const t=await vm(e),n=t.eventManager;return n.onListen=Up.bind(null,t.syncEngine),n.onUnlisten=qp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Bp.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Hp.bind(null,t.syncEngine),n}function wm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ga;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new hm({next:a=>{o.Nu(),t.enqueueAndForget(()=>_p(e,s));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ma(pa.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ma(pa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new Pp(pu(n.path),o,{includeMetadataChanges:!0,qa:!0});return Cp(e,s)}(await xm(e),e.asyncQueue,t,n,r)),r.promise}function Sm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ga;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new hm({next:n=>{o.Nu(),t.enqueueAndForget(()=>_p(e,s)),n.fromCache&&"server"===r.source?i.reject(new ma(pa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Pp(n,o,{includeMetadataChanges:!0,qa:!0});return Cp(e,s)}(await xm(e),e.asyncQueue,t,n,r)),r.promise}function km(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Em=new Map,Cm="firestore.googleapis.com",_m=!0;class Tm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ma(pa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cm,this.ssl=_m}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:_m;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Rh;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Nh)throw new ma(pa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ma(pa.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=km(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ma(pa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ma(pa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ma(pa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Im{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ma(pa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ma(pa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new va;switch(e.type){case"firstParty":return new Sa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ma(pa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Em.get(e);t&&(sa("ComponentProvider","Removing Datastore"),Em.delete(e),t.terminate())}(this),Promise.resolve()}}class jm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jm(this.firestore,e,this._query)}}class Rm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Am(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rm(this.firestore,e,this._key)}toJSON(){return{type:Rm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ka(t,Rm._jsonSchema))return new Rm(e,n||null,new Oa(za.fromString(t.referencePath)))}}Rm._jsonSchemaVersion="firestore/documentReference/1.0",Rm._jsonSchema={type:Ga("string",Rm._jsonSchemaVersion),referencePath:Ga("string")};class Am extends jm{constructor(e,t,n){super(e,t,pu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rm(this.firestore,null,new Oa(e))}withConverter(e){return new Am(this.firestore,e,this._path)}}function Pm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=It(e),Fa("collection","path",t),e instanceof Im){const n=za.fromString(t,...r);return Ba(n),new Am(e,null,n)}{if(!(e instanceof Rm||e instanceof Am))throw new ma(pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(za.fromString(t,...r));return Ba(n),new Am(e.firestore,null,n)}}function Dm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=It(e),1===arguments.length&&(t=_a.newId()),Fa("doc","path",t),e instanceof Im){const n=za.fromString(t,...r);return Ua(n),new Rm(e,null,new Oa(n))}{if(!(e instanceof Rm||e instanceof Am))throw new ma(pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(za.fromString(t,...r));return Ua(n),new Rm(e.firestore,e instanceof Am?e.converter:null,new Oa(n))}}const Nm="AsyncQueue";class zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pf(this,"async_queue_retry"),this._c=()=>{const e=Rf();e&&sa(Nm,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Rf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ga;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(mx){if(!cl(mx))throw mx;sa(Nm,"Operation failed with retryable error: "+mx)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,aa("INTERNAL UNHANDLED ERROR: ",Lm(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=yp.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ua(47125,{Pc:Lm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Mm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Om extends Im{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zm,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zm(e),this._firestoreClient=void 0,await e}}}function Fm(e){if(e._terminated)throw new ma(pa.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Um(e),e._firestoreClient}function Um(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new uc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,km(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Bm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bm($l.fromBase64String(e))}catch(e){throw new ma(pa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Bm($l.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bm._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ka(e,Bm._jsonSchema))return Bm.fromBase64String(e.bytes)}}Bm._jsonSchemaVersion="firestore/bytes/1.0",Bm._jsonSchema={type:Ga("string",Bm._jsonSchemaVersion),bytes:Ga("string")};class Wm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ma(pa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ma(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vm{constructor(e){this._methodName=e}}class qm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ma(pa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ma(pa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ta(this._lat,e._lat)||Ta(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qm._jsonSchemaVersion}}static fromJSON(e){if(Ka(e,qm._jsonSchema))return new qm(e.latitude,e.longitude)}}qm._jsonSchemaVersion="firestore/geoPoint/1.0",qm._jsonSchema={type:Ga("string",qm._jsonSchemaVersion),latitude:Ga("number"),longitude:Ga("number")};class Hm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ka(e,Hm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Hm(e.vectorValues);throw new ma(pa.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hm._jsonSchemaVersion="firestore/vectorValue/1.0",Hm._jsonSchema={type:Ga("string",Hm._jsonSchemaVersion),vectorValues:Ga("object")};const Gm=/^__.*__$/;class Km{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new md(e,this.data,this.fieldMask,t,this.fieldTransforms):new pd(e,this.data,t,this.fieldTransforms)}}class Ym{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new md(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ua(40011,{Ac:e})}}class Xm{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xm(Ie(Ie({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Qm(this.Ac)&&Gm.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Jm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Af(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Xm({Ac:e,methodName:t,Dc:n,path:Ma.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $m(e){const t=e._freezeSettings(),n=Af(e._databaseId);return new Jm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zm(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);dg("Data must be an object, but it was:",s,r);const a=cg(r,s);let l,c;if(o.merge)l=new Xl(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=hg(t,r,n);if(!s.contains(i))throw new ma(pa.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));gg(e,i)||e.push(i)}l=new Xl(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new Km(new Lc(a),l,c)}class eg extends Vm{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function tg(e,t,n){return new Xm({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ng extends Vm{_toFieldTransform(e){return new id(e.path,new Xu)}isEqual(e){return e instanceof ng}}class rg extends Vm{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=tg(this,e,!0),n=this.vc.map(e=>lg(e,t)),r=new Ju(n);return new id(e.path,r)}isEqual(e){return e instanceof rg&&wt(this.vc,e.vc)}}class ig extends Vm{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=tg(this,e,!0),n=this.vc.map(e=>lg(e,t)),r=new Zu(n);return new id(e.path,r)}isEqual(e){return e instanceof ig&&wt(this.vc,e.vc)}}function og(e,t,n,r){const i=e.Cc(1,t,n);dg("Data must be an object, but it was:",i,r);const o=[],s=Lc.empty();Vl(r,(e,r)=>{const a=pg(t,e,n);r=It(r);const l=i.yc(a);if(r instanceof eg)o.push(a);else{const e=lg(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new Xl(o);return new Ym(s,a,i.fieldTransforms)}function sg(e,t,n,r,i,o){const s=e.Cc(1,t,n),a=[hg(t,r,n)],l=[i];if(o.length%2!=0)throw new ma(pa.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(hg(t,o[h])),l.push(o[h+1]);const c=[],u=Lc.empty();for(let h=a.length-1;h>=0;--h)if(!gg(c,a[h])){const e=a[h];let t=l[h];t=It(t);const n=s.yc(e);if(t instanceof eg)c.push(e);else{const r=lg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Xl(c);return new Ym(u,d,s.fieldTransforms)}function ag(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lg(n,e.Cc(r?4:3,t))}function lg(e,t){if(ug(e=It(e)))return dg("Unsupported field value:",t,e),cg(e,t);if(e instanceof Vm)return function(e,t){if(!Qm(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=lg(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=It(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xa.fromDate(e);return{timestampValue:Xd(t.serializer,n)}}if(e instanceof Xa){const n=new Xa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xd(t.serializer,n)}}if(e instanceof qm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bm)return{bytesValue:Jd(t.serializer,e._byteString)};if(e instanceof Rm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:eh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Hm)return function(e,t){return{mapValue:{fields:{[fc]:{stringValue:gc},[yc]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Vu(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Va(e)))}(e,t)}function cg(e,t){const n={};return ql(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vl(e,(e,r)=>{const i=lg(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ug(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xa||e instanceof qm||e instanceof Bm||e instanceof Rm||e instanceof Vm||e instanceof Hm)}function dg(e,t,n){if(!ug(n)||!Wa(n)){const r=Va(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function hg(e,t,n){if((t=It(t))instanceof Wm)return t._internalPath;if("string"==typeof t)return pg(e,t);throw mg("Field path arguments must be of type string or ",e,!1,void 0,n)}const fg=new RegExp("[~\\*/\\[\\]]");function pg(e,t,n){if(t.search(fg)>=0)throw mg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Wm(...t.split("."))._internalPath}catch(r){throw mg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function mg(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new ma(pa.INVALID_ARGUMENT,a+e+l)}function gg(e,t){return e.some(e=>e.isEqual(t))}class yg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vg extends yg{data(){return super.data()}}function bg(e,t){return"string"==typeof t?pg(e,t):t instanceof Wm?t._internalPath:t._delegate._internalPath}function xg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ma(pa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class Sg extends wg{}function kg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof wg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof _g).length,n=e.filter(e=>e instanceof Eg).length;if(t>1||t>0&&n>0)throw new ma(pa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Eg extends Sg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Eg(e,t,n)}_apply(e){const t=this._parse(e);return Dg(e._query,t),new jm(e.firestore,e.converter,xu(e._query,t))}_parse(e){const t=$m(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ma(pa.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Pg(s,o);const t=[];for(const n of s)t.push(Ag(r,e,n));a={arrayValue:{values:t}}}else a=Ag(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Pg(s,o),a=ag(n,t,s,"in"===o||"not-in"===o);return Hc.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Cg(e,t,n){const r=t,i=bg("where",e);return Eg._create(i,r,n)}class _g extends wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _g(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Gc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Dg(n,i),n=xu(n,i)}(e._query,t),new jm(e.firestore,e.converter,xu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tg extends Sg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wc(t,n)}(e._query,this._field,this._direction);return new jm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new hu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ig(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=bg("orderBy",e);return Tg._create(n,t)}class jg extends Sg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new jg(e,t,n)}_apply(e){return new jm(e.firestore,e.converter,wu(e._query,this._limit,this._limitType))}}function Rg(e){return Ha("limit",e),jg._create("limit",e,"F")}function Ag(e,t,n){if("string"==typeof(n=It(n))){if(""===n)throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gu(t)&&-1!==n.indexOf("/"))throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(za.fromString(n));if(!Oa.isDocumentKey(r))throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Tc(e,new Oa(r))}if(n instanceof Rm)return Tc(e,n._key);throw new ma(pa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Va(n),"."))}function Pg(e,t){if(!Array.isArray(e)||0===e.length)throw new ma(pa.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Dg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ma(pa.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ma(pa.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ng{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ua(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Vl(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[yc].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>tc(e.doubleValue));return new Hm(n)}convertGeoPoint(e){return new qm(tc(e.latitude),tc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=lc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const t=ec(e);return new Xa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=za.fromString(e);ha(Sh(n),9688,{name:e});const r=new hc(n.get(1),n.get(3)),i=new Oa(n.popFirst(5));return r.isEqual(t)||aa("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function zg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Lg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mg extends yg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ma(pa.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mg._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Mg._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mg._jsonSchema={type:Ga("string",Mg._jsonSchemaVersion),bundleSource:Ga("string","DocumentSnapshot"),bundleName:Ga("string"),bundle:Ga("string")};class Og extends Mg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Lg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Og(this._firestore,this._userDataWriter,n.key,n,new Lg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ma(pa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Og(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Lg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Og(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Ug(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ma(pa.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fg._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_a.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ug(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ua(61501,{type:e})}}function Bg(e){e=qa(e,Rm);const t=qa(e.firestore,Om);return wm(Fm(t),e._key).then(n=>Xg(t,e,n))}Fg._jsonSchemaVersion="firestore/querySnapshot/1.0",Fg._jsonSchema={type:Ga("string",Fg._jsonSchemaVersion),bundleSource:Ga("string","QuerySnapshot"),bundleName:Ga("string"),bundle:Ga("string")};class Wg extends Ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rm(this.firestore,null,t)}}function Vg(e){e=qa(e,jm);const t=qa(e.firestore,Om),n=Fm(t),r=new Wg(t);return xg(e._query),Sm(n,e._query).then(n=>new Fg(t,r,e,n))}function qg(e,t,n){e=qa(e,Rm);const r=qa(e.firestore,Om),i=zg(e.converter,t,n);return Qg(r,[Zm($m(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sd.none())])}function Hg(e,t,n){e=qa(e,Rm);const r=qa(e.firestore,Om),i=$m(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=It(t))||t instanceof Wm?sg(i,"updateDoc",e._key,t,n,a):og(i,"updateDoc",e._key,t),Qg(r,[o.toMutation(e._key,sd.exists(!0))])}function Gg(e){return Qg(qa(e.firestore,Om),[new bd(e._key,sd.none())])}function Kg(e,t){const n=qa(e.firestore,Om),r=Dm(e),i=zg(e.converter,t);return Qg(n,[Zm($m(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sd.exists(!1))]).then(()=>r)}function Yg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=It(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||Mm(n[o])||(i=n[o++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Mm(n[o])){var a,l,c;const e=n[o];n[o]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Rm)d=qa(e.firestore,Om),h=pu(e._key.path),u={next:t=>{n[o]&&n[o](Xg(d,e,t))},error:n[o+1],complete:n[o+2]};else{const t=qa(e,jm);d=qa(t.firestore,Om),h=t._query;const r=new Wg(d);u={next:e=>{n[o]&&n[o](new Fg(d,r,t,e))},error:n[o+1],complete:n[o+2]},xg(e._query)}return function(e,t,n,r){const i=new hm(r),o=new Pp(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Cp(await xm(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>_p(await xm(e),o))}}(Fm(d),h,s,u)}function Qg(e,t){return function(e,t){const n=new ga;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=lm(e);try{const e=await function(e,t){const n=fa(e),r=Xa.now(),i=t.reduce((e,t)=>e.add(t.key),Uu());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Au(),l=Uu();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=hd(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new md(e.key,t,Mc(t.value.mapValue),sd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Nu(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Hl(Ta)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await im(r,e.changes),await ip(r.remoteStore)}catch(e){const t=vp(e,"Failed to persist write");n.reject(t)}}(await bm(e),t,n)),n.promise}(Fm(e),t)}function Xg(e,t,n){const r=n.docs.get(t._key),i=new Wg(e);return new Mg(e,i,t._key,r,new Lg(n.hasPendingWrites,n.fromCache),t.converter)}class Jg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$m(e)}set(e,t,n){this._verifyNotCommitted();const r=$g(e,this._firestore),i=zg(r.converter,t,n),o=Zm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,sd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=$g(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=It(t))||t instanceof Wm?sg(this._dataReader,"WriteBatch.update",r._key,t,n,s):og(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,sd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$g(e,this._firestore);return this._mutations=this._mutations.concat(new bd(t._key,sd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ma(pa.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $g(e,t){if((e=It(e)).firestore!==t)throw new ma(pa.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Zg(){return new ng("serverTimestamp")}function ey(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rg("arrayUnion",t)}function ty(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ig("arrayRemove",t)}function ny(e){return Fm(e=qa(e,Om)),new Jg(e,t=>Qg(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ra=e}(qn),Fn(new jt("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Om(new xa(e.getProvider("auth-internal")),new Ea(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ma(pa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(e.options.projectId,t)}(o,r),o);return i=Ie({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),Kn(ea,ta,e),Kn(ea,ta,"esm2020")}();Kn("firebase","12.3.0","app");const ry="firebasestorage.googleapis.com",iy="storageBucket";class oy extends vt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(ly(e),"Firebase Storage: ".concat(t," (").concat(ly(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ly(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var sy,ay;function ly(e){return"storage/"+e}function cy(){return new oy(sy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function uy(){return new oy(sy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dy(){return new oy(sy.CANCELED,"User canceled the upload/download.")}function hy(){return new oy(sy.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fy(e){return new oy(sy.INVALID_ARGUMENT,e)}function py(){return new oy(sy.APP_DELETED,"The Firebase app was deleted.")}function my(e,t){return new oy(sy.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function gy(e){throw new oy(sy.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(sy||(sy={}));class yy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=yy.makeFromUrl(e,t)}catch(mx){return new yy(e,"")}if(""===n.path)return n;throw r=e,new oy(sy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===ry?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new yy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new oy(sy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class vy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function by(e){return"string"===typeof e||e instanceof String}function xy(e){return wy()&&e instanceof Blob}function wy(){return"undefined"!==typeof Blob}function Sy(e,t,n,r){if(r<t)throw fy("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw fy("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ky(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Ey(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Cy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ay||(ay={}));class _y{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ty(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ay.NO_ERROR,i=n.getStatus();if(!t||Cy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ay.ABORT;return void e(!1,new Ty(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Ty(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(mx){r(mx)}else if(null!==i){const e=cy();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?py():dy())}else{r(uy())}};this.canceled_?t(0,new Ty(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ty{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Iy(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jy(){const e=Iy();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(wy())return new Blob(n);throw new oy(sy.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Ry(e){if("undefined"===typeof atob)throw t="base-64",new oy(sy.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Ay="raw",Py="base64",Dy="base64url",Ny="data_url";class zy{constructor(e,t){this.data=e,this.contentType=t||null}}function Ly(e,t){switch(e){case Ay:return new zy(My(t));case Py:case Dy:return new zy(Oy(e,t));case Ny:return new zy(function(e){const t=new Fy(e);return t.base64?Oy(Py,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(mx){throw my(Ny,"Malformed data URL.")}return My(t)}(t.rest)}(t),new Fy(t).contentType)}throw cy()}function My(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Oy(e,t){switch(e){case Py:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw my(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Dy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw my(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ry(t)}catch(mx){if(mx.message.includes("polyfill"))throw mx;throw my(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Fy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw my(Ny,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Uy{constructor(e,t){let n=0,r="";xy(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(xy(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Uy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Uy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(wy()){const e=t.map(e=>e instanceof Uy?e.data_:e);return new Uy(jy.apply(null,e))}{const e=t.map(e=>by(e)?Ly(Ay,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Uy(r,!0)}}uploadData(){return this.data_}}function By(e){let t;try{t=JSON.parse(e)}catch(mx){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Wy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Vy(e,t){return t}class qy{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Vy}}let Hy=null;function Gy(){if(Hy)return Hy;const e=[];e.push(new qy("bucket")),e.push(new qy("generation")),e.push(new qy("metageneration")),e.push(new qy("name","fullPath",!0));const t=new qy("name");t.xform=function(e,t){return function(e){return!by(e)||e.length<2?e:Wy(e)}(t)},e.push(t);const n=new qy("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new qy("timeCreated")),e.push(new qy("updated")),e.push(new qy("md5Hash",null,!0)),e.push(new qy("cacheControl",null,!0)),e.push(new qy("contentDisposition",null,!0)),e.push(new qy("contentEncoding",null,!0)),e.push(new qy("contentLanguage",null,!0)),e.push(new qy("contentType",null,!0)),e.push(new qy("metadata","customMetadata",!0)),Hy=e,Hy}function Ky(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new yy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Yy(e,t,n){const r=By(t);if(null===r)return null;return Ky(e,r,n)}function Qy(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Xy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jy(e){if(!e)throw cy()}function $y(e,t){return function(n,r){const i=Yy(e,r,t);return Jy(null!==i),i}}function Zy(e,t){return function(n,r){const i=Yy(e,r,t);return Jy(null!==i),function(e,t,n,r){const i=By(t);if(null===i)return null;if(!by(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(t=>{const i=e.bucket,o=e.fullPath;return ky("/b/"+s(i)+"/o/"+s(o),n,r)+Ey({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function ev(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new oy(sy.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new oy(sy.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new oy(sy.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new oy(sy.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function tv(e){const t=ev(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new oy(sy.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function nv(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function rv(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=nv(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qy(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Uy.getBlob(c,r,u);if(null===d)throw hy();const h={name:l.fullPath},f=ky(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Xy(f,"POST",$y(e,n),p);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=ev(t),m}class iv{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ay.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ay.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ay.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw gy("cannot .send() more than once");if(lt(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(mx){return-1}}getResponse(){if(!this.sent_)throw gy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ov extends iv{initXhr(){this.xhr_.responseType="text"}}function sv(){return new ov}class av{constructor(e,t){this._service=e,this._location=t instanceof yy?t:yy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new av(e,t)}get root(){const e=new yy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new yy(this._location.bucket,e);return new av(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new oy(sy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function lv(e,t,n){e._throwIfRoot("uploadBytes");const r=rv(e.storage,e._location,Gy(),new Uy(t,!0),n);return e.storage.makeRequestWithTokens(r,sv).then(t=>({metadata:t,ref:e}))}function cv(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=ky(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Xy(r,"GET",Zy(e,n),i);return o.errorHandler=tv(t),o}(e.storage,e._location,Gy());return e.storage.makeRequestWithTokens(t,sv).then(e=>{if(null===e)throw new oy(sy.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function uv(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new yy(e._location.bucket,n);return new av(e.storage,r)}function dv(e,t){if(e instanceof pv){const n=e;if(null==n._bucket)throw new oy(sy.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iy+"' property when initializing the app?");const r=new av(n,n._bucket);return null!=t?dv(r,t):r}return void 0!==t?uv(e,t):e}function hv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof pv)return new av(e,t);throw fy("To use ref(service, url), the first argument must be a Storage instance.")}return dv(e,t)}function fv(e,t){const n=null===t||void 0===t?void 0:t[iy];return null==n?null:yy.makeFromBucketSpec(n,e)}class pv{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=ry,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?yy.makeFromBucketSpec(r,this._host):fv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=yy.makeFromBucketSpec(this._url,e):this._bucket=fv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Sy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Sy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new av(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new vy(py());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=Ey(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new _y(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const mv="@firebase/storage",gv="0.14.0",yv="storage";function vv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn(),t=arguments.length>1?arguments[1]:void 0;e=It(e);const n=Un(e,yv).getImmediate({identifier:t}),r=it("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=lt(t);i&&(ct("https://".concat(e.host,"/b")),ft("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:ut(o,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function bv(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new pv(r,i,o,n,qn)}Fn(new jt(yv,bv,"PUBLIC").setMultipleInstances(!0)),Kn(mv,gv,""),Kn(mv,gv,"esm2020");var xv=n(403);const wv=Hn({apiKey:"AIzaSyA_z8HNFWQFC3BU1WlSd8ikhM5JVywLfhs",authDomain:"datemaker-62679.firebaseapp.com",projectId:"datemaker-62679",storageBucket:"datemaker-62679.firebasestorage.app",messagingSenderId:"931513579449",appId:"1:931513579449:web:55c2a7915fad4a7771e868",measurementId:"G-LJVXV4GP8W"});let Sv;xv.Ii.isNativePlatform()?(Sv=Di(wv,{persistence:Vo}),console.log("\u2705 Firebase Auth initialized for Capacitor (no popups)")):(Sv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();const t=Un(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Di(e,{popupRedirectResolver:Ds,persistence:[Vo,ko,Io]}),r=st("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ms)return;const r=null===t||void 0===t?void 0:t.token;Os!==r&&(Os=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){It(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){It(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=rt("auth");return o&&Ni(n,"http://".concat(o)),n}(wv),console.log("\u2705 Firebase Auth initialized for Web"));const kv=function(e,t){const n="object"==typeof e?e:Gn(),r="string"==typeof e?e:t||dc,i=Un(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=it("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=qa(e,Im);const i=lt(t),o=e._getSettings(),s=Ie(Ie({},o),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(ct("https://".concat(a)),ft("Firestore",!0)),o.host!==Cm&&o.host!==a&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Ie(Ie({},o),{},{host:a,ssl:i,emulatorOptions:r});if(!wt(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=na.MOCK_USER;else{var c;t=ut(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ma(pa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new na(i)}e._authCredentials=new ba(new ya(t,n))}}(i,...e)}return i}(wv);vv(wv);console.log("\u2705 Firebase initialized successfully");const Ev=Le("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Cv=Le("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var _v=n(579);function Tv(e){let{onSwitchToSignup:t}=e;const[n,r]=(0,i.useState)(""),[o,s]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)(0),[b,x]=(0,i.useState)(!1),[w,S]=(0,i.useState)(!1),[k,E]=(0,i.useState)("");(0,i.useEffect)(()=>{if(y>0){const e=setTimeout(()=>{v(y-1)},1e3);return()=>clearTimeout(e)}},[y]);return(0,_v.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem",paddingTop:"calc(2rem + env(safe-area-inset-top))"},children:[(0,_v.jsxs)("div",{style:{background:"white",padding:"3rem",borderRadius:"24px",maxWidth:"450px",width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.15)"},children:[(0,_v.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,_v.jsx)(Me,{style:{color:"#ec4899",margin:"0 auto 1rem"},size:48,fill:"currentColor"}),(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem"},children:"Welcome Back"}),(0,_v.jsx)("p",{style:{color:"#6b7280"},children:"Sign in to find your perfect date"})]}),d&&(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",border:"3px solid #fbbf24",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 4px 15px rgba(251, 191, 36, 0.3)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[(0,_v.jsx)("div",{style:{fontSize:"2rem",flexShrink:0},children:"\ud83d\udce7"}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsx)("h3",{style:{color:"#92400e",fontSize:"1.25rem",fontWeight:"800",marginBottom:"0.5rem",margin:0},children:"Email Not Verified"}),(0,_v.jsx)("p",{style:{color:"#78350f",fontSize:"0.95rem",lineHeight:"1.6",margin:"0.5rem 0"},children:"Please check your email inbox for a verification link."}),(0,_v.jsx)("div",{style:{background:"rgba(251, 191, 36, 0.2)",padding:"0.75rem",borderRadius:"8px",marginTop:"0.75rem"},children:(0,_v.jsx)("p",{style:{color:"#78350f",fontSize:"0.875rem",fontWeight:"700",margin:0},children:"\u26a0\ufe0f Check your SPAM/JUNK folder!"})})]})]}),m&&(0,_v.jsx)("div",{style:{background:"#d1fae5",border:"2px solid #6ee7b7",borderRadius:"10px",padding:"0.875rem",marginBottom:"1rem",animation:"fadeIn 0.3s ease-in"},children:(0,_v.jsxs)("p",{style:{color:"#065f46",fontSize:"0.875rem",fontWeight:"700",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)("span",{style:{fontSize:"1.25rem"},children:"\u2705"}),"Verification email sent! Check your inbox and spam folder."]})}),a&&d&&(0,_v.jsx)("div",{style:{background:"#fee2e2",border:"2px solid #fecaca",borderRadius:"10px",padding:"0.875rem",marginBottom:"1rem"},children:(0,_v.jsx)("p",{style:{color:"#991b1b",fontSize:"0.875rem",fontWeight:"600",margin:0},children:a})}),(0,_v.jsx)("button",{onClick:async()=>{if(!(y>0)){p(!0),g(!1),l("");try{const e=(await po(Sv,n,o)).user;await mo(e),await Sv.signOut(),g(!0),v(60),console.log("\u2705 Verification email resent successfully"),setTimeout(()=>{g(!1)},5e3)}catch(e){console.error("\u274c Error resending verification email:",e),"auth/too-many-requests"===e.code?(l("Too many requests. Please wait a few minutes before trying again."),v(120)):"auth/invalid-credential"===e.code||"auth/wrong-password"===e.code?l("Invalid password. Please check your password and try again."):l("Failed to resend verification email. Please try again later.")}finally{p(!1)}}},disabled:f||y>0,type:"button",style:{width:"100%",background:f||y>0?"#d1d5db":"linear-gradient(to right, #10b981, #059669)",color:"white",fontWeight:"700",fontSize:"1rem",padding:"1rem",borderRadius:"12px",border:"none",cursor:f||y>0?"not-allowed":"pointer",boxShadow:f||y>0?"none":"0 4px 12px rgba(16, 185, 129, 0.4)",transition:"all 0.2s ease"},children:f?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("span",{style:{display:"inline-block",animation:"spin 1s linear infinite"},children:"\u23f3"})," ","Sending..."]}):y>0?(0,_v.jsxs)(_v.Fragment,{children:["\u23f1\ufe0f Wait ",y,"s to resend"]}):(0,_v.jsx)(_v.Fragment,{children:"\ud83d\udce8 Resend Verification Email"})}),y>0&&(0,_v.jsxs)("p",{style:{color:"#78350f",fontSize:"0.75rem",textAlign:"center",marginTop:"0.5rem",marginBottom:0},children:["This prevents spam. You can request another email in ",y," seconds."]})]}),w&&(0,_v.jsx)("div",{style:{background:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)",border:"3px solid #10b981",borderRadius:"16px",padding:"1.25rem",marginBottom:"1.5rem",boxShadow:"0 4px 15px rgba(16, 185, 129, 0.3)",animation:"fadeIn 0.3s ease-in"},children:(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,_v.jsx)("div",{style:{fontSize:"1.75rem",flexShrink:0},children:"\u2705"}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h3",{style:{color:"#065f46",fontSize:"1rem",fontWeight:"800",margin:"0 0 0.25rem 0"},children:"Password Reset Email Sent!"}),(0,_v.jsx)("p",{style:{color:"#047857",fontSize:"0.875rem",margin:0},children:"Check your inbox and spam folder for the reset link."})]})]})}),(0,_v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l(""),h(!1),g(!1),S(!1),E(""),n&&o){u(!0);try{const e=(await po(Sv,n,o)).user;if(console.log("\ud83d\udd10 User logged in, checking verification..."),console.log("\ud83d\udce7 Email verified:",e.emailVerified),!e.emailVerified)return console.log("\u26a0\ufe0f Email NOT verified - showing banner"),h(!0),l("Please verify your email before logging in. Check your inbox and spam folder."),void u(!1);console.log("\u2705 Email verified! Proceeding with login...");try{(await Bg(Dm(kv,"users",e.uid))).exists()||(console.log("\ud83d\udcdd User document not found - creating it now"),await qg(Dm(kv,"users",e.uid),{email:e.email,subscriptionStatus:"free",createdAt:(new Date).toISOString(),uid:e.uid,emailVerified:!0}))}catch(t){console.error("Firestore error (non-critical):",t)}console.log("\u2705 Login successful!")}catch(r){switch(console.error("\u274c Login error:",r),r.code){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":l("Invalid email or password");break;case"auth/too-many-requests":l("Too many failed attempts. Please wait a few minutes and try again.");break;default:l(r.message||"Failed to login. Please try again.")}h(!1)}finally{u(!1)}}else l("Please enter both email and password")},style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"#374151",fontWeight:"600",fontSize:"0.95rem"},children:[(0,_v.jsx)(Ev,{size:20,style:{color:"#ec4899"}}),"Email"]}),(0,_v.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"you@example.com",required:!0,style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #fbcfe8",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"})]}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"#374151",fontWeight:"600",fontSize:"0.95rem"},children:[(0,_v.jsx)(Cv,{size:20,style:{color:"#ec4899"}}),"Password"]}),(0,_v.jsx)("input",{type:"password",value:o,onChange:e=>s(e.target.value),placeholder:"Your password",required:!0,style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #fbcfe8",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box",transition:"border-color 0.2s ease"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"}),(0,_v.jsx)("div",{style:{marginTop:"0.5rem",textAlign:"right"},children:(0,_v.jsx)("button",{onClick:async()=>{if(E(""),S(!1),!n.trim())return void E("Please enter your email address first");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){x(!0);try{await async function(e,t,n){const r=wi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ho(r,i,n),await Ai(r,i,"getOobCode",Bi,"EMAIL_PASSWORD_PROVIDER")}(Sv,n.trim().toLowerCase()),S(!0),console.log("\u2705 Password reset email sent to:",n),setTimeout(()=>{S(!1)},1e4)}catch(e){switch(console.error("\u274c Password reset error:",e),e.code){case"auth/user-not-found":S(!0);break;case"auth/too-many-requests":E("Too many requests. Please wait a few minutes and try again.");break;case"auth/invalid-email":E("Invalid email address");break;default:E("Failed to send reset email. Please try again.")}}finally{x(!1)}}else E("Please enter a valid email address")},disabled:b,type:"button",style:{background:"none",border:"none",color:b?"#9ca3af":"#a855f7",fontWeight:"600",fontSize:"0.875rem",cursor:b?"not-allowed":"pointer",textDecoration:"underline",padding:0},children:b?"Sending...":"Forgot password?"})}),k&&(0,_v.jsx)("div",{style:{marginTop:"0.5rem",padding:"0.75rem",background:"#fef2f2",border:"2px solid #fecaca",borderRadius:"10px",color:"#b91c1c",fontWeight:"600",fontSize:"0.8rem"},children:k})]}),a&&!d&&(0,_v.jsx)("div",{style:{padding:"1rem",background:"#fef2f2",border:"2px solid #fecaca",borderRadius:"12px",color:"#b91c1c",fontWeight:"600",fontSize:"0.875rem"},children:a}),(0,_v.jsx)("button",{type:"submit",disabled:c,style:{width:"100%",background:c?"#d1d5db":"linear-gradient(to right, #ec4899, #a855f7)",color:"white",fontWeight:"bold",fontSize:"1rem",padding:"1rem",borderRadius:"12px",border:"none",cursor:c?"not-allowed":"pointer",boxShadow:c?"none":"0 4px 10px rgba(236,72,153,0.3)",transition:"all 0.2s ease"},children:c?"Signing In...":"Sign In"})]}),(0,_v.jsxs)("div",{style:{marginTop:"1.5rem",textAlign:"center",color:"#6b7280",fontSize:"0.95rem"},children:["Don't have an account?"," ",(0,_v.jsx)("button",{onClick:t,type:"button",style:{background:"none",border:"none",color:"#ec4899",fontWeight:"bold",cursor:"pointer",textDecoration:"underline",fontSize:"0.95rem"},children:"Sign up"})]})]}),(0,_v.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(-10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]})}const Iv=Le("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function jv(e){let{onSwitchToLogin:t,onShowSuccess:n}=e;const[r,o]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)(!1),[g,y]=(0,i.useState)(!1);return g?(0,_v.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem"},children:(0,_v.jsxs)("div",{style:{background:"white",padding:"3rem",borderRadius:"24px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.2)",textAlign:"center"},children:[(0,_v.jsx)("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(to right, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",fontSize:"4rem",color:"white",boxShadow:"0 10px 30px rgba(16, 185, 129, 0.3)"},children:"\u2713"}),(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"900",marginBottom:"1rem",color:"#111827"},children:"\ud83c\udf89 Account Created!"}),(0,_v.jsx)("p",{style:{color:"#6b7280",fontSize:"1.125rem",lineHeight:"1.75",marginBottom:"1rem",fontWeight:"500"},children:"Almost there! Check your email to verify your account."}),(0,_v.jsxs)("div",{style:{background:"#f0fdf4",border:"2px solid #86efac",borderRadius:"16px",padding:"1.25rem",marginBottom:"1.5rem"},children:[(0,_v.jsx)("p",{style:{color:"#166534",fontSize:"1rem",marginBottom:"0.5rem",fontWeight:"600"},children:"\ud83d\udce7 Verification email sent to:"}),(0,_v.jsx)("p",{style:{color:"#ec4899",fontSize:"1.125rem",fontWeight:"700",wordBreak:"break-word",margin:0},children:r})]}),(0,_v.jsxs)("div",{style:{background:"#fef3c7",border:"3px solid #fbbf24",borderRadius:"16px",padding:"1.25rem",marginBottom:"1.5rem"},children:[(0,_v.jsx)("p",{style:{color:"#92400e",fontSize:"1rem",fontWeight:"700",marginBottom:"0.5rem"},children:"\u26a0\ufe0f IMPORTANT: Check Your Spam/Junk Folder!"}),(0,_v.jsx)("p",{style:{color:"#78350f",fontSize:"0.875rem",margin:0},children:"Verification emails often end up in spam. If you don't see it in your inbox, check your junk folder."})]}),(0,_v.jsx)("div",{style:{background:"#eff6ff",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:(0,_v.jsxs)("p",{style:{color:"#1e40af",fontSize:"0.875rem",margin:0,lineHeight:"1.5"},children:["\ud83d\udca1 ",(0,_v.jsx)("strong",{children:"Next steps:"}),(0,_v.jsx)("br",{}),"1. Open the verification email",(0,_v.jsx)("br",{}),"2. Click the verification link",(0,_v.jsx)("br",{}),"3. Come back and log in!"]})}),(0,_v.jsx)("button",{onClick:t,style:{width:"100%",background:"linear-gradient(to right, #ec4899, #a855f7)",color:"white",fontWeight:"bold",fontSize:"1.125rem",padding:"1.25rem",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 4px 14px rgba(236, 72, 153, 0.4)",transition:"transform 0.2s"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:"Go to Login Now \u2192"})]})}):(0,_v.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem"},children:(0,_v.jsxs)("div",{style:{background:"white",padding:"3rem",borderRadius:"24px",maxWidth:"450px",width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.15)"},children:[(0,_v.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,_v.jsx)(Me,{style:{color:"#ec4899",margin:"0 auto 1rem"},size:48,fill:"currentColor"}),(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem"},children:"Join DateMaker"}),(0,_v.jsx)("p",{style:{color:"#6b7280"},children:"Create your account to start planning"})]}),(0,_v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(""),y(!1),u.trim())if(r.trim())if(s.length<6)f("Password must be at least 6 characters");else if(s===l){m(!0);try{const e=await async function(e,t,n){if(Bn(e.app))return Promise.reject(mr(e));const r=wi(e),i=Ai(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",no,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&fo(e),t}),s=await ro._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(Sv,r,s),t=e.user,n=r.trim().toLowerCase(),i=u.trim();await qg(Dm(kv,"users",t.uid),{name:i,nameLower:i.toLowerCase(),email:n,subscriptionStatus:"free",createdAt:(new Date).toISOString(),uid:t.uid,emailVerified:!1}),await mo(t),await vo(Sv),console.log("User created successfully - verification email sent"),y(!0)}catch(t){switch(console.error("Signup error:",t),t.code){case"auth/email-already-in-use":f("This email is already registered. Please login instead.");break;case"auth/invalid-email":f("Invalid email address");break;case"auth/weak-password":f("Password is too weak. Please use a stronger password.");break;default:f(t.message||"Failed to create account. Please try again.")}}finally{m(!1)}}else f("Passwords do not match");else f("Please enter your email");else f("Please enter your name")},style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"#374151",fontWeight:"600"},children:[(0,_v.jsx)(Iv,{size:20,style:{color:"#ec4899"}}),"Name"]}),(0,_v.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),placeholder:"Your name",style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #fbcfe8",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"})]}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"#374151",fontWeight:"600"},children:[(0,_v.jsx)(Ev,{size:20,style:{color:"#ec4899"}}),"Email"]}),(0,_v.jsx)("input",{type:"email",value:r,onChange:e=>o(e.target.value),placeholder:"your@email.com",style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #fbcfe8",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"})]}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"#374151",fontWeight:"600"},children:[(0,_v.jsx)(Cv,{size:20,style:{color:"#ec4899"}}),"Password"]}),(0,_v.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),placeholder:"At least 6 characters",style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #fbcfe8",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"})]}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"#374151",fontWeight:"600"},children:[(0,_v.jsx)(Cv,{size:20,style:{color:"#ec4899"}}),"Confirm Password"]}),(0,_v.jsx)("input",{type:"password",value:l,onChange:e=>c(e.target.value),placeholder:"Confirm your password",style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #fbcfe8",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"})]}),h&&(0,_v.jsx)("div",{style:{padding:"1rem",background:"#fef2f2",border:"2px solid #fecaca",borderRadius:"12px",color:"#b91c1c",fontWeight:"600",fontSize:"0.875rem"},children:h}),(0,_v.jsx)("button",{type:"submit",disabled:p,style:{width:"100%",background:p?"#d1d5db":"linear-gradient(to right, #ec4899, #a855f7)",color:"white",fontWeight:"bold",fontSize:"1rem",padding:"1rem",borderRadius:"12px",border:"none",cursor:p?"not-allowed":"pointer",boxShadow:p?"none":"0 4px 10px rgba(236,72,153,0.3)"},children:p?"Creating Account...":"Sign Up"})]}),(0,_v.jsxs)("div",{style:{marginTop:"1.5rem",textAlign:"center",color:"#6b7280"},children:["Already have an account?"," ",(0,_v.jsx)("button",{onClick:t,style:{background:"none",border:"none",color:"#ec4899",fontWeight:"bold",cursor:"pointer",textDecoration:"underline"},children:"Login"})]})]})})}const Rv=Le("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Av=Le("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Pv=Le("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Dv=Le("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Nv=Le("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),zv=Le("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Lv=Le("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Mv=Le("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ov=Le("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var Fv,Uv="clover",Bv="https://js.stripe.com",Wv="".concat(Bv,"/").concat(Uv,"/stripe.js"),Vv=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,qv=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Hv="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Gv=function(e){return Vv.test(e)||qv.test(e)},Kv=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Wv).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},Yv=null,Qv=null,Xv=null,Jv=function(e){return null!==Yv?Yv:(Yv=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(Hv),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Bv,'"]')),t=0;t<e.length;t++){var n=e[t];if(Gv(n.src))return n}return null}();if(r&&e)console.warn(Hv);else if(r){if(r&&null!==Xv&&null!==Qv){var i;r.removeEventListener("load",Xv),r.removeEventListener("error",Qv),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=Kv(e)}}else r=Kv(e);Xv=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),Qv=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",Xv),r.addEventListener("error",Qv)}catch(o){return void n(o)}else t(null)})).catch(function(e){return Yv=null,Promise.reject(e)})},$v=!1,Zv=function(){return Fv||(Fv=Jv(null).catch(function(e){return Fv=null,Promise.reject(e)}))};Promise.resolve().then(function(){return Zv()}).catch(function(e){$v||console.warn(e)});!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];$v=!0;var r=Date.now();Zv().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version),o=Uv;r&&i!==o&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("8.3.0"," expected Stripe.js@").concat(o,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var s=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.3.0",startTime:t})}(s,n),s}(e,t,r)})}("pk_test_51SHmuDJk6RAXFQPWAWBeOnePU7hqHQ7aWUoSdeH0z7FLJv4IbDDQSdDLqnC4Kc6HKu0JrZvzzW7DpJYmKZe7aj8800vJO2QHFq");const eb="https://datemaker-backend-1.onrender.com";function tb(e){let{user:t,onClose:n}=e;const[r,o]=(0,i.useState)(!1),[s,a]=(0,i.useState)("annual"),l=async e=>{o(!0);try{await(async e=>{try{const t=Sv.currentUser;if(!t)throw new Error("User not authenticated");const n=await t.getIdToken(),r=xv.Ii.isNativePlatform()?"ios":"web";console.log("\ud83d\udcf1 Platform detected:",r);const i=await fetch("".concat(eb,"/api/create-checkout-session"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({userId:t.uid,plan:e,email:t.email,platform:r})});if(!i.ok){const e=await i.json();throw new Error(e.error||"Failed to create checkout session")}const{url:o}=await i.json();window.location.href=o}catch(t){console.error("Stripe checkout error:",t),alert("Payment error: ".concat(t.message))}})(e)}catch(t){console.error("Subscription error:",t),alert("Failed to start checkout. Please try again."),o(!1)}};return(0,_v.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"2rem",overflow:"auto"},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"auto",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[(0,_v.jsx)("button",{onClick:n,style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10},children:(0,_v.jsx)(Rv,{size:20})}),(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"3rem 2rem",textAlign:"center",color:"white",borderRadius:"24px 24px 0 0"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:"\ud83c\udf89"}),(0,_v.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"900",marginBottom:"0.5rem",textShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:"Start Your 7-Day FREE Trial"}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",opacity:.95,maxWidth:"600px",margin:"0 auto"},children:"Get unlimited access to all premium features. Cancel anytime, no questions asked."})]}),(0,_v.jsxs)("div",{style:{padding:"2rem",background:"linear-gradient(to bottom, #f9fafb, white)"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"800",textAlign:"center",marginBottom:"2rem",color:"#111827"},children:"What You'll Get"}),(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",maxWidth:"900px",margin:"0 auto 3rem"},children:[{icon:(0,_v.jsx)(Av,{size:24}),title:"Unlimited Date Generation",desc:"Create as many perfect dates as you want"},{icon:(0,_v.jsx)(Pv,{size:24}),title:"Complete Itineraries",desc:"Full day planning from start to finish"},{icon:(0,_v.jsx)(Dv,{size:24}),title:"Date Streaks & Goals",desc:"Track your progress and set goals"},{icon:(0,_v.jsx)(Nv,{size:24}),title:"Memory Scrapbook",desc:"Save photos and rate your experiences"},{icon:(0,_v.jsx)(Ke,{size:24}),title:"Surprise Date Mode",desc:"Progressive reveal for mystery dates"},{icon:(0,_v.jsx)(zv,{size:24}),title:"Social Features",desc:"Share dates, create groupchats and connect with friends"},{icon:(0,_v.jsx)(Fe,{size:24}),title:"XP & Achievements",desc:"Level up"},{icon:(0,_v.jsx)(Lv,{size:24}),title:"Priority Support",desc:"Get help from our team anytime"}].map((e,t)=>(0,_v.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"16px",border:"2px solid #e5e7eb",display:"flex",gap:"1rem",transition:"all 0.3s ease"},children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",borderRadius:"12px",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.icon}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h3",{style:{fontSize:"1rem",fontWeight:"700",marginBottom:"0.25rem",color:"#111827"},children:e.title}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:0},children:e.desc})]})]},t))}),(0,_v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,_v.jsxs)("div",{style:{background:"white",border:"monthly"===s?"3px solid #667eea":"2px solid #e5e7eb",borderRadius:"20px",padding:"2rem",position:"relative",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>a("monthly"),children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea, #764ba2)",padding:"0.5rem",borderRadius:"10px"},children:(0,_v.jsx)(Pv,{size:20,style:{color:"white"}})}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"800",margin:0},children:"Monthly"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[(0,_v.jsx)("span",{style:{fontSize:"3rem",fontWeight:"900",color:"#111827"},children:"$9.99"}),(0,_v.jsx)("span",{style:{fontSize:"1.125rem",color:"#6b7280"},children:"/ month"})]}),(0,_v.jsx)("div",{style:{background:"#fef3c7",color:"#92400e",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",marginTop:"0.5rem",display:"inline-block"},children:"Just $0.33/day!"})]}),(0,_v.jsx)("div",{style:{marginBottom:"1.5rem"},children:["Unlimited date generation","All premium features","Cancel anytime","Priority support"].map((e,t)=>(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,_v.jsx)(Mv,{size:20,style:{color:"#10b981",flexShrink:0}}),(0,_v.jsx)("span",{style:{fontSize:"0.95rem",color:"#374151"},children:e})]},t))}),(0,_v.jsx)("button",{onClick:e=>{e.stopPropagation(),l("monthly")},disabled:r,style:{width:"100%",background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",padding:"1rem",borderRadius:"12px",border:"none",fontSize:"1.125rem",fontWeight:"700",cursor:r?"not-allowed":"pointer",transition:"all 0.3s ease"},children:r?"Processing...":"Start Free Trial \u2192"})]}),(0,_v.jsxs)("div",{style:{background:"annual"===s?"linear-gradient(135deg, #10b981, #059669)":"white",border:"annual"===s?"none":"2px solid #e5e7eb",borderRadius:"20px",padding:"2rem",position:"relative",transition:"all 0.3s ease",cursor:"pointer",color:"annual"===s?"white":"#111827"},onClick:()=>a("annual"),children:[(0,_v.jsx)("div",{style:{position:"absolute",top:"-12px",right:"20px",background:"#fbbf24",color:"#78350f",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"900",boxShadow:"0 4px 12px rgba(251, 191, 36, 0.4)"},children:"\u2b50 SAVE 33%"}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[(0,_v.jsx)("div",{style:{background:"annual"===s?"rgba(255,255,255,0.2)":"linear-gradient(135deg, #10b981, #059669)",padding:"0.5rem",borderRadius:"10px"},children:(0,_v.jsx)(Ov,{size:20,style:{color:"white"}})}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"800",margin:0},children:"Annual"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[(0,_v.jsx)("span",{style:{fontSize:"1.5rem",textDecoration:"line-through",opacity:.6},children:"$119"}),(0,_v.jsx)("span",{style:{fontSize:"3rem",fontWeight:"900"},children:"$79"}),(0,_v.jsx)("span",{style:{fontSize:"1.125rem",opacity:.8},children:"/ year"})]}),(0,_v.jsx)("div",{style:{background:"annual"===s?"rgba(255,255,255,0.2)":"#d1fae5",color:"annual"===s?"white":"#065f46",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",marginTop:"0.5rem",display:"inline-block"},children:"Just $6.58/month - Save $40!"})]}),(0,_v.jsx)("div",{style:{marginBottom:"1.5rem"},children:["Everything in Monthly","Save $40 per year","Priority feature access"].map((e,t)=>(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,_v.jsx)(Mv,{size:20,style:{color:"annual"===s?"white":"#10b981",flexShrink:0}}),(0,_v.jsx)("span",{style:{fontSize:"0.95rem",color:"annual"===s?"white":"#374151"},children:e})]},t))}),(0,_v.jsx)("button",{onClick:e=>{e.stopPropagation(),l("annual")},disabled:r,style:{width:"100%",background:"annual"===s?"white":"linear-gradient(135deg, #10b981, #059669)",color:"annual"===s?"#059669":"white",padding:"1rem",borderRadius:"12px",border:"none",fontSize:"1.125rem",fontWeight:"700",cursor:r?"not-allowed":"pointer",transition:"all 0.3s ease"},children:r?"Processing...":"Get Annual - Best Value \u2192"})]})]}),(0,_v.jsxs)("div",{style:{marginTop:"3rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:[(0,_v.jsx)("p",{style:{marginBottom:"1rem",fontSize:"1rem",fontWeight:"600",color:"#111827"},children:"\u2705 7-Day Free Trial \u2022 \ud83d\udd12 Secure Payment via Stripe \u2022 \ud83d\udd04 Cancel Anytime"}),(0,_v.jsx)("p",{style:{margin:0},children:"Join now T&Cs apply"})]})]})]})})}const nb=Le("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),rb=Le("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ib=Le("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ob=e=>{let{message:t,onClose:n}=e;return(0,_v.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(8px)",animation:"fadeIn 0.2s ease-out"},children:[(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"0",maxWidth:"400px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",border:"3px solid #10b981",overflow:"hidden",animation:"slideUp 0.3s ease-out",position:"relative"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",padding:"2rem",textAlign:"center",position:"relative"},children:[(0,_v.jsx)("button",{onClick:n,style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)",e.target.style.transform="rotate(90deg)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="rotate(0deg)"},children:(0,_v.jsx)(Rv,{size:20,style:{color:"white"}})}),(0,_v.jsx)("div",{style:{width:"80px",height:"80px",margin:"0 auto 1rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"4px solid white",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",animation:"scaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:(0,_v.jsx)(Ye,{size:48,style:{color:"white"}})}),(0,_v.jsx)("h2",{style:{margin:0,fontSize:"2rem",fontWeight:"900",color:"white",textShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:"Success!"})]}),(0,_v.jsxs)("div",{style:{padding:"2rem",textAlign:"center"},children:[(0,_v.jsx)("p",{style:{margin:"0 0 2rem 0",fontSize:"1.125rem",lineHeight:"1.6",color:"#1f2937",fontWeight:"600"},children:t}),(0,_v.jsx)("button",{onClick:n,style:{width:"100%",padding:"1rem 2rem",borderRadius:"16px",border:"none",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",fontWeight:"900",fontSize:"1.125rem",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 6px 20px rgba(16, 185, 129, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 24px rgba(16, 185, 129, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 6px 20px rgba(16, 185, 129, 0.3)"},children:"Close"})]})]}),(0,_v.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        @keyframes slideUp {\n          from {\n            opacity: 0;\n            transform: translateY(30px) scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n        \n        @keyframes scaleIn {\n          from {\n            transform: scale(0);\n          }\n          to {\n            transform: scale(1);\n          }\n        }\n      "})]})},sb=e=>{let{user:t,dateData:n,onClose:r}=e;const[o,s]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)("18:00"),[y,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)([]),[w,S]=(0,i.useState)([]),[k,E]=(0,i.useState)(!1),[C,_]=(0,i.useState)([]),[T,I]=(0,i.useState)(""),[j,R]=(0,i.useState)(null);(0,i.useEffect)(()=>{const e=new Date;e.setDate(e.getDate()+1),p(e.toISOString().split("T")[0])},[]),(0,i.useEffect)(()=>{null!==n&&void 0!==n&&n.title&&s(n.title)},[n]),(0,i.useEffect)(()=>{t&&(async()=>{try{const e=[],n=new Set,r=kg(Pm(kv,"friendRequests"),Cg("fromUserId","==",t.uid),Cg("status","==","accepted")),i=kg(Pm(kv,"friendRequests"),Cg("toUserId","==",t.uid),Cg("status","==","accepted")),[o,s]=await Promise.all([Vg(r),Vg(i)]);o.docs.forEach(t=>{const r=t.data();var i;n.has(r.toUserId)||(n.add(r.toUserId),e.push({id:r.toUserId,email:r.toUserEmail,name:(null===(i=r.toUserEmail)||void 0===i?void 0:i.split("@")[0])||"Friend"}))}),s.docs.forEach(t=>{const r=t.data();var i;n.has(r.fromUserId)||(n.add(r.fromUserId),e.push({id:r.fromUserId,email:r.fromUserEmail,name:(null===(i=r.fromUserEmail)||void 0===i?void 0:i.split("@")[0])||"Friend"}))}),x(e),console.log("\u2705 Loaded ".concat(e.length," unique friends"))}catch(e){console.error("Error loading friends:",e)}})()},[t]),(0,i.useEffect)(()=>{if(!j)return;const e=Yg(Pm(kv,"sharedDates",j,"messages"),e=>{const t=e.docs.map(e=>Ie({id:e.id},e.data())).sort((e,t)=>{var n,r;return(null===(n=e.timestamp)||void 0===n?void 0:n.seconds)-(null===(r=t.timestamp)||void 0===r?void 0:r.seconds)});_(t)});return()=>e()},[j]);const A=async()=>{if(T.trim()&&j)try{const e=Pm(kv,"sharedDates",j,"messages");await Kg(e,{text:T,userId:t.uid,userEmail:t.email,timestamp:Zg()}),I("")}catch(e){console.error("Error sending message:",e)}};return k&&j?(0,_v.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},children:(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #fff5f0 100%)",borderRadius:"24px",width:"100%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 25px 50px rgba(251, 146, 60, 0.3)",border:"2px solid #fb923c"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",padding:"1.5rem",borderRadius:"24px 24px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)(nb,{size:28,style:{color:"white"}}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h2",{style:{margin:0,color:"white",fontSize:"1.5rem",fontWeight:"900"},children:o||"Date Group Chat"}),(0,_v.jsxs)("p",{style:{margin:0,color:"rgba(255,255,255,0.9)",fontSize:"0.875rem"},children:[w.length+1," participants"]})]})]}),(0,_v.jsx)("button",{onClick:r,style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"rgba(255,255,255,0.3)",border:"none",color:"white",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",zIndex:100,fontSize:"1.5rem",fontWeight:"bold"},onMouseEnter:e=>e.target.style.background="rgba(255,255,255,0.5)",onMouseLeave:e=>e.target.style.background="rgba(255,255,255,0.3)",children:"\u2715"})]}),(0,_v.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem",background:"white"},children:0===C.length?(0,_v.jsxs)("div",{style:{textAlign:"center",color:"#9ca3af",padding:"3rem 1rem"},children:[(0,_v.jsx)(nb,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"1rem"},children:"Start planning your date together!"})]}):C.map(e=>{var n;const r=e.userId===t.uid;return(0,_v.jsx)("div",{style:{display:"flex",justifyContent:r?"flex-end":"flex-start"},children:(0,_v.jsxs)("div",{style:{maxWidth:"70%",display:"flex",flexDirection:"column",alignItems:r?"flex-end":"flex-start"},children:[!r&&(0,_v.jsx)("p",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#fb923c",margin:"0 0 0.25rem 0"},children:e.userEmail.split("@")[0]}),(0,_v.jsx)("div",{style:{padding:"0.875rem 1.25rem",borderRadius:r?"18px 18px 4px 18px":"18px 18px 18px 4px",background:r?"linear-gradient(135deg, #fb923c 0%, #f97316 100%)":"#f3f4f6",color:r?"white":"#1f2937",fontSize:"1rem",lineHeight:"1.5",boxShadow:r?"0 4px 12px rgba(251, 146, 60, 0.3)":"none"},children:e.text}),(0,_v.jsx)("p",{style:{fontSize:"0.6875rem",color:"#9ca3af",margin:"0.25rem 0 0 0"},children:null===(n=e.timestamp)||void 0===n?void 0:n.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)})}),(0,_v.jsx)("div",{style:{padding:"1.5rem",borderTop:"2px solid #fed7aa",background:"white"},children:(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end"},children:[(0,_v.jsx)("textarea",{value:T,onChange:e=>I(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},placeholder:"Type a message...",rows:1,style:{flex:1,padding:"1rem 1.25rem",borderRadius:"14px",border:"2px solid #fed7aa",fontSize:"1rem",outline:"none",resize:"none",fontFamily:"inherit",transition:"all 0.2s"},onFocus:e=>{e.target.style.borderColor="#fb923c",e.target.style.boxShadow="0 0 0 3px rgba(251, 146, 60, 0.1)"},onBlur:e=>{e.target.style.borderColor="#fed7aa",e.target.style.boxShadow="none"}}),(0,_v.jsxs)("button",{onClick:A,disabled:!T.trim(),style:{padding:"1rem 1.5rem",borderRadius:"14px",border:"none",background:T.trim()?"linear-gradient(135deg, #fb923c 0%, #f97316 100%)":"#d1d5db",color:"white",fontWeight:"800",fontSize:"1rem",cursor:T.trim()?"pointer":"not-allowed",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:T.trim()?"0 6px 20px rgba(251, 146, 60, 0.3)":"none"},onMouseEnter:e=>{T.trim()&&(e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 8px 24px rgba(251, 146, 60, 0.4)")},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow=T.trim()?"0 6px 20px rgba(251, 146, 60, 0.3)":"none"},children:[(0,_v.jsx)(rb,{size:20}),"Send"]})]})})]})}):(0,_v.jsxs)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem",animation:"fadeIn 0.2s ease-out"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #fff5f0 100%)",borderRadius:"24px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 25px 50px rgba(251, 146, 60, 0.3)",border:"2px solid #fb923c",animation:"slideUp 0.3s ease-out"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",padding:"2rem",borderRadius:"24px 24px 0 0",position:"relative"},children:[(0,_v.jsx)("button",{onClick:r,style:{position:"absolute",top:"1.5rem",right:"1.5rem",background:"rgba(255,255,255,0.3)",border:"none",color:"white",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",zIndex:100,fontSize:"1.5rem",fontWeight:"bold"},onMouseEnter:e=>e.target.style.background="rgba(255,255,255,0.5)",onMouseLeave:e=>e.target.style.background="rgba(255,255,255,0.3)",children:"\u2715"}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[(0,_v.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_v.jsx)(zv,{size:32,style:{color:"white"}})}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h1",{style:{margin:0,color:"white",fontSize:"2rem",fontWeight:"900"},children:"Share This Date! \ud83c\udf89"}),(0,_v.jsx)("p",{style:{margin:0,color:"rgba(255,255,255,0.9)",fontSize:"1rem"},children:"Invite friends and plan together!"})]})]})]}),(0,_v.jsxs)("div",{style:{padding:"2rem"},children:[(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("label",{style:{display:"block",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",fontSize:"1rem"},children:"\ud83d\udcdd Give your date a name *"}),(0,_v.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"e.g., Romantic Evening at the Beach, Adventure Day...",style:{width:"100%",padding:"1.25rem",borderRadius:"16px",border:"2px solid #fed7aa",fontSize:"1rem",outline:"none",fontFamily:"inherit",transition:"all 0.2s",fontWeight:"600"},onFocus:e=>{e.target.style.borderColor="#fb923c",e.target.style.boxShadow="0 0 0 3px rgba(251, 146, 60, 0.1)"},onBlur:e=>{e.target.style.borderColor="#fed7aa",e.target.style.boxShadow="none"}}),(0,_v.jsx)("p",{style:{fontSize:"0.8125rem",color:"#6b7280",margin:"0.5rem 0 0",fontStyle:"italic"},children:"* This name will appear in your feed"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("label",{style:{display:"block",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",fontSize:"1rem"},children:"\ud83d\udcc5 When is this happening? *"}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,_v.jsxs)("div",{style:{flex:"1 1 200px"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,_v.jsx)(Pv,{size:20,style:{color:"#fb923c"}}),(0,_v.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#6b7280"},children:"Date"})]}),(0,_v.jsx)("input",{type:"date",value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:"1rem 1.25rem",borderRadius:"14px",border:"2px solid #fed7aa",fontSize:"1rem",outline:"none",transition:"all 0.2s",cursor:"pointer"},onFocus:e=>e.target.style.borderColor="#fb923c",onBlur:e=>e.target.style.borderColor="#fed7aa"})]}),(0,_v.jsxs)("div",{style:{flex:"1 1 150px"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,_v.jsx)(Oe,{size:20,style:{color:"#fb923c"}}),(0,_v.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#6b7280"},children:"Time"})]}),(0,_v.jsx)("input",{type:"time",value:m,onChange:e=>g(e.target.value),style:{width:"100%",padding:"1rem 1.25rem",borderRadius:"14px",border:"2px solid #fed7aa",fontSize:"1rem",outline:"none",transition:"all 0.2s",cursor:"pointer"},onFocus:e=>e.target.style.borderColor="#fb923c",onBlur:e=>e.target.style.borderColor="#fed7aa"})]})]})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("label",{style:{display:"block",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",fontSize:"1rem"},children:"\ud83c\udf0d Visibility"}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,_v.jsxs)("button",{onClick:()=>h(!0),style:{flex:1,padding:"1.25rem",borderRadius:"16px",border:d?"3px solid #fb923c":"2px solid #e5e7eb",background:d?"linear-gradient(135deg, #fb923c15 0%, #f9731615 100%)":"white",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem"},onMouseEnter:e=>{d||(e.currentTarget.style.background="#f9fafb")},onMouseLeave:e=>{d||(e.currentTarget.style.background="white")},children:[(0,_v.jsx)(ib,{size:32,style:{color:d?"#fb923c":"#9ca3af"}}),(0,_v.jsxs)("div",{style:{textAlign:"center"},children:[(0,_v.jsx)("p",{style:{margin:0,fontWeight:"900",fontSize:"1.0625rem",color:"#1f2937"},children:"Public"}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.8125rem",color:"#6b7280"},children:"Everyone can see and join"})]})]}),(0,_v.jsxs)("button",{onClick:()=>h(!1),style:{flex:1,padding:"1.25rem",borderRadius:"16px",border:d?"2px solid #e5e7eb":"3px solid #fb923c",background:d?"white":"linear-gradient(135deg, #fb923c15 0%, #f9731615 100%)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.75rem"},onMouseEnter:e=>{d&&(e.currentTarget.style.background="#f9fafb")},onMouseLeave:e=>{d&&(e.currentTarget.style.background="white")},children:[(0,_v.jsx)(Cv,{size:32,style:{color:d?"#9ca3af":"#fb923c"}}),(0,_v.jsxs)("div",{style:{textAlign:"center"},children:[(0,_v.jsx)("p",{style:{margin:0,fontWeight:"900",fontSize:"1.0625rem",color:"#1f2937"},children:"Private"}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.8125rem",color:"#6b7280"},children:"Only invited friends"})]})]})]})]}),b.length>0&&(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsxs)("label",{style:{display:"block",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",fontSize:"1rem"},children:["\ud83d\udc65 Invite Friends (",w.length," selected)"]}),(0,_v.jsx)("div",{style:{background:"white",borderRadius:"20px",border:"2px solid #fed7aa",padding:"1rem",maxHeight:"200px",overflowY:"auto"},children:b.map(e=>(0,_v.jsxs)("div",{onClick:()=>{return t=e.id,void S(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.875rem",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",background:w.includes(e.id)?"linear-gradient(135deg, #fb923c15 0%, #f9731615 100%)":"transparent",border:w.includes(e.id)?"2px solid #fb923c":"2px solid transparent",marginBottom:"0.5rem"},onMouseEnter:t=>{w.includes(e.id)||(t.currentTarget.style.background="#f9fafb")},onMouseLeave:t=>{w.includes(e.id)||(t.currentTarget.style.background="transparent")},children:[(0,_v.jsx)("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.125rem",flexShrink:0},children:e.name[0].toUpperCase()}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsx)("p",{style:{margin:0,fontWeight:"700",color:"#1f2937",fontSize:"1rem"},children:e.name}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.8125rem",color:"#6b7280"},children:e.email})]}),(0,_v.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",border:"3px solid",borderColor:w.includes(e.id)?"#fb923c":"#d1d5db",background:w.includes(e.id)?"#fb923c":"white",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:w.includes(e.id)&&(0,_v.jsx)(Mv,{size:16,style:{color:"white"}})})]},e.id))})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("label",{style:{display:"block",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",fontSize:"1rem"},children:"\ud83d\udcad Tell everyone about this date! *"}),(0,_v.jsx)("textarea",{value:a,onChange:e=>l(e.target.value),placeholder:"What makes this date special? Share your excitement...",rows:4,style:{width:"100%",padding:"1.25rem",borderRadius:"16px",border:"2px solid #fed7aa",fontSize:"1rem",outline:"none",resize:"vertical",fontFamily:"inherit",transition:"all 0.2s"},onFocus:e=>e.target.style.borderColor="#fb923c",onBlur:e=>e.target.style.borderColor="#fed7aa"}),(0,_v.jsx)("p",{style:{fontSize:"0.8125rem",color:"#6b7280",margin:"0.5rem 0 0",fontStyle:"italic"},children:"* Required field"})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,_v.jsx)("button",{onClick:r,style:{flex:1,padding:"1.25rem",borderRadius:"16px",border:"2px solid #e5e7eb",background:"white",color:"#6b7280",fontWeight:"700",fontSize:"1.0625rem",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="#f9fafb",e.target.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.target.style.background="white",e.target.style.transform="translateY(0)"},children:"Cancel"}),(0,_v.jsx)("button",{onClick:async()=>{if(o.trim())if(a.trim())if(f){v(!0);try{var e,i,s;const y=n.stops||(null===(e=n.itinerary)||void 0===e?void 0:e.stops)||[];console.log("\ud83d\udce4 SHARING DATE (RAW):",{title:o,stopsCount:y.length,rawFirstStop:y[0],hasPlaceObject:y.some(e=>e.place),firstPlacePhotos:null===(i=y[0])||void 0===i||null===(s=i.place)||void 0===s?void 0:s.photos});const v={title:o,stops:y.map(e=>{const t=e.place||e;let n="";if(t.photos&&t.photos.length>0){const e=t.photos[0];"function"===typeof e.getUrl?n=e.getUrl({maxWidth:800,maxHeight:600}):e.photo_reference?n="https://maps.googleapis.com/maps/api/place/photo?maxwidth=800&photo_reference=".concat(e.photo_reference,"&key=AIzaSyCKCweUu3EEWa8VfNZJ3I0druTc6u5gJKc"):"string"===typeof e?n=e:e.url&&(n=e.url)}return n||(n=t.image||t.photo||t.icon||e.image||""),{title:e.title||e.name||t.name||"Untitled Stop",name:e.name||e.title||t.name,category:e.category||e.icon||"",description:e.description||t.description||"",time:e.time||"",duration:e.duration||"",image:n,rating:t.rating||e.rating||null,vicinity:t.vicinity||t.formatted_address||t.address||e.vicinity||"",venueName:t.name||e.venueName||e.name||"",geometry:t.geometry?{location:{lat:"function"===typeof t.geometry.location.lat?t.geometry.location.lat():t.geometry.location.lat||t.geometry.location.latitude||0,lng:"function"===typeof t.geometry.location.lng?t.geometry.location.lng():t.geometry.location.lng||t.geometry.location.longitude||0}}:null,challenges:e.challenges||[]}})};console.log("\u2705 PROCESSED DATA:",{stopsCount:v.stops.length,stopDetails:v.stops.map(e=>{var t;return{title:e.title,hasImage:!!e.image,imageUrl:e.image,hasLocation:!!e.vicinity,hasGeometry:!!e.geometry,challengeCount:(null===(t=e.challenges)||void 0===t?void 0:t.length)||0,venueName:e.venueName}})});const b=await Kg(Pm(kv,"sharedDates"),{userId:t.uid,userEmail:t.email,dateData:v,caption:a,scheduledDate:f,scheduledTime:m,isPublic:d,invitedFriends:w,participants:[t.uid],likes:[],comments:[],createdAt:Zg()});R(b.id);try{var l,c,h,p;const e=Dm(kv,"users",t.uid),n=await Bg(e),r=(null===(l=n.data())||void 0===l||null===(c=l.gameStats)||void 0===c?void 0:c.datesShared)||0,i=(null===(h=n.data())||void 0===h||null===(p=h.gameStats)||void 0===p?void 0:p.photosShared)||0;await Hg(e,{"gameStats.datesShared":r+1,"gameStats.photosShared":i+1}),console.log("\ud83d\udcf8 Dates shared incremented:",r+1)}catch(g){console.error("Error tracking share:",g)}w.length>0?(E(!0),u('\u2728 "'.concat(o,'" shared! ').concat(w.length," friend").concat(w.length>1?"s":""," invited!"))):(u('\u2728 "'.concat(o,'" shared with the community!')),setTimeout(()=>r(),2e3))}catch(g){console.error("Error sharing date:",g),u("Failed to share date. Please try again.")}finally{v(!1)}}else u("Please select a date!");else u("Please write something about this date!");else u("Please give your date a name!")},disabled:y||!a.trim()||!o.trim(),style:{flex:2,padding:"1.25rem",borderRadius:"16px",border:"none",background:!y&&a.trim()&&o.trim()?"linear-gradient(135deg, #fb923c 0%, #f97316 100%)":"#d1d5db",color:"white",fontWeight:"900",fontSize:"1.125rem",cursor:!y&&a.trim()&&o.trim()?"pointer":"not-allowed",transition:"all 0.3s",boxShadow:!y&&a.trim()&&o.trim()?"0 8px 20px rgba(251, 146, 60, 0.4)":"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},onMouseEnter:e=>{!y&&a.trim()&&o.trim()&&(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 12px 30px rgba(251, 146, 60, 0.5)")},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 8px 20px rgba(251, 146, 60, 0.4)"},children:y?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{style:{width:"20px",height:"20px",border:"3px solid rgba(255,255,255,0.3)",borderTop:"3px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Sharing..."]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(zv,{size:24}),"Share Date"]})})]})]})]}),c&&(0,_v.jsx)(ob,{message:c,onClose:()=>u(null)}),(0,_v.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        @keyframes slideUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]})},ab=Le("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),lb=Le("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),cb=Le("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ub=Le("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),db=Le("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),hb=Le("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),fb=Le("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var pb,mb;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(pb||(pb={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(mb||(mb={}));const gb=(0,xv.F3)("StatusBar"),yb=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DARK";if(xv.Ii.isNativePlatform())try{await gb.setBackgroundColor({color:e}),await gb.setStyle({style:"LIGHT"===t?pb.Light:pb.Dark})}catch(n){console.log("StatusBar error:",n)}},vb="#667eea",bb="#667eea",xb="#1e293b";function wb(e){var t,n,r,o,s,a,l,c;let{user:u,onBack:d,feedNotificationCount:h=0}=e;const[f,p]=(0,i.useState)("feed"),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)([]),[b,x]=(0,i.useState)([]),[w,S]=(0,i.useState)([]),[k,E]=(0,i.useState)([]),[C,_]=(0,i.useState)([]),[T,I]=(0,i.useState)([]),[j,R]=(0,i.useState)(null),[A,P]=(0,i.useState)([]),[D,N]=(0,i.useState)(""),[z,L]=(0,i.useState)(!1),[M,O]=(0,i.useState)(null),[F,U]=(0,i.useState)({}),[B,W]=(0,i.useState)(new Set),[V,q]=(0,i.useState)(!1),[H,G]=(0,i.useState)({}),[K,Y]=(0,i.useState)(null),[Q,X]=(0,i.useState)([]),[J,$]=(0,i.useState)({}),[Z,ee]=(0,i.useState)(navigator.onLine),[te,ne]=(0,i.useState)(null),re=(0,i.useRef)(null),ie=(0,i.useRef)(null),oe=(0,i.useRef)(new Map);(0,i.useEffect)(()=>()=>{console.log("\ud83e\uddf9 Cleaning up Social component - canceling all timeouts"),ie.current&&clearTimeout(ie.current),oe.current.forEach(e=>clearTimeout(e)),oe.current.clear()},[]),(0,i.useEffect)(()=>(yb(bb),()=>{yb(vb)}),[]),(0,i.useEffect)(()=>{"requests"!==f&&"messages"!==f&&"feed"!==f||(async e=>{try{if("requests"===e&&w.length>0){const e=ny(kv);w.forEach(t=>{const n=Dm(kv,"friendRequests",t.id);e.update(n,{seen:!0})}),await e.commit(),console.log("\u2705 Marked friend requests as seen")}if("messages"===e&&j){const e=Dm(kv,"users",u.uid);await Hg(e,{["lastReadMessages.".concat(j.id)]:Zg()}),console.log("\u2705 Marked messages as read")}if("feed"===e){const e=Dm(kv,"users",u.uid);await Hg(e,{lastFeedVisit:Zg()}),console.log("\u2705 Marked feed as viewed")}}catch(t){console.error("Error clearing tab notification:",t)}})(f)},[f,j,w,u.uid]);const[se,ae]=(0,i.useState)(!1);(0,i.useEffect)(()=>{j&&A.length>0&&!se&&setTimeout(()=>{var e;null===(e=re.current)||void 0===e||e.scrollIntoView({behavior:"auto"}),ae(!0)},100)},[A,j,se]),(0,i.useEffect)(()=>{ae(!1)},[null===j||void 0===j?void 0:j.id]),(0,i.useEffect)(()=>{(async()=>{const e=await Bg(Dm(kv,"users",u.uid));e.exists()&&O(e.data())})()},[u.uid]),(0,i.useEffect)(()=>{(async()=>{await qg(Dm(kv,"userStatus",u.uid),{online:!0,lastSeen:Zg()},{merge:!0})})();const e=async()=>{await qg(Dm(kv,"userStatus",u.uid),{online:!1,lastSeen:Zg()},{merge:!0})};return window.addEventListener("beforeunload",e),()=>{e(),window.removeEventListener("beforeunload",e)}},[u.uid]),(0,i.useEffect)(()=>{if(0===b.length)return;const e=b.map(e=>Yg(Dm(kv,"userStatus",e.id),t=>{t.exists()&&t.data().online?W(t=>new Set([...t,e.id])):W(t=>{const n=new Set(t);return n.delete(e.id),n})}));return()=>e.forEach(e=>e())},[b]),(0,i.useEffect)(()=>{const e=Yg(kg(Pm(kv,"friendRequests"),Cg("toUserId","==",u.uid),Cg("status","==","pending")),e=>{const t=e.docs.map(e=>Ie({id:e.id},e.data()));S(t);const n=t.filter(e=>!e.seen).length;console.log("\ud83d\udcec Friend requests: ".concat(t.length," total, ").concat(n," unseen"))});return()=>e()},[u.uid]),(0,i.useEffect)(()=>{const e=Yg(kg(Pm(kv,"friendRequests"),Cg("fromUserId","==",u.uid),Cg("status","==","pending")),e=>{const t=e.docs.map(e=>Ie({id:e.id},e.data()));E(t)});return()=>e()},[u.uid]),(0,i.useEffect)(()=>{if(!j)return void $({});(async()=>{const e={},t=j.isGroup?j.participants:j.participants.filter(e=>e!==u.uid);for(const r of t)if(!e[r]&&r!==u.uid)try{const t=await Bg(Dm(kv,"users",r));t.exists()&&(e[r]=t.data())}catch(n){console.error("Error loading profile for",r,n)}$(e)})()},[j,u.uid]),(0,i.useEffect)(()=>{console.log("\ud83d\udd25 Setting up real-time friends listener...");const e=kg(Pm(kv,"friendRequests"),Cg("fromUserId","==",u.uid),Cg("status","==","accepted")),t=kg(Pm(kv,"friendRequests"),Cg("toUserId","==",u.uid),Cg("status","==","accepted")),n=new Map,r=()=>{const e=Array.from(n.values());x(e),console.log("\u2705 Friends updated in real-time: ".concat(e.length," friends"))},i=Yg(e,e=>{e.docs.forEach(e=>{const t=e.data();n.set(t.toUserId,{id:t.toUserId,email:t.toUserEmail,name:t.toUserEmail.split("@")[0]})}),r()}),o=Yg(t,e=>{e.docs.forEach(e=>{const t=e.data();n.set(t.fromUserId,{id:t.fromUserId,email:t.fromUserEmail,name:t.fromUserEmail.split("@")[0]})}),r()});return()=>{i(),o()}},[u.uid]),(0,i.useEffect)(()=>{if(!u)return;console.log("\ud83d\udd25 Setting up feed listener...");const e=Yg(kg(Pm(kv,"sharedDates"),Ig("createdAt","desc"),Rg(50)),e=>{console.log("\ud83d\udce5 Feed snapshot received: ".concat(e.docs.length," total documents"));const t=e.docs.map(e=>Ie({id:e.id},e.data())).filter(e=>{var t;const n=!0===e.isPublic,r=e.userId===u.uid,i=null===(t=e.invitedFriends)||void 0===t?void 0:t.includes(u.uid),o=n||r||i;return o&&console.log("\u2705 Showing date: ".concat(e.id," (public: ").concat(n,", creator: ").concat(r,", invited: ").concat(i,")")),o});console.log("\u2728 Displaying ".concat(t.length," dates in feed")),_(t)},e=>{console.error("\u274c Feed listener error:",e)});return()=>{console.log("\ud83d\udd0c Cleaning up feed listener"),e()}},[u]),(0,i.useEffect)(()=>{const e=Yg(kg(Pm(kv,"conversations"),Cg("participants","array-contains",u.uid)),e=>{const t={},n=e.docs.map(e=>{var n;const r=e.data(),i=(null===(n=r.unreadCount)||void 0===n?void 0:n[u.uid])||0;return i>0&&(t[e.id]=i),Ie(Ie({id:e.id},r),{},{unreadCount:i})});n.sort((e,t)=>{var n,r,i,o;const s=(null===(n=e.lastMessageTime)||void 0===n||null===(r=n.toMillis)||void 0===r?void 0:r.call(n))||0;return((null===(i=t.lastMessageTime)||void 0===i||null===(o=i.toMillis)||void 0===o?void 0:o.call(i))||0)-s}),I(n),G(t),console.log("\ud83d\udcac Loaded",n.length,"conversations in ONE query (0ms) \u26a1")});return()=>e()},[u.uid]);const le=(0,i.useCallback)(async e=>{try{const t=Dm(kv,"conversations",e);await Hg(t,{["unreadCount.".concat(u.uid)]:0}),console.log("\u2705 Marked messages as read for conversation:",e)}catch(t){console.error("Error marking messages as read:",t)}},[u.uid]);(0,i.useEffect)(()=>{if(!j)return P([]),void X([]);console.log("\ud83d\udd35 Loading messages for conversation:",j.id);const e=Yg(kg(Pm(kv,"messages"),Cg("conversationId","==",j.id)),async e=>{const t=new Date(Date.now()-2592e5),n=[],r=[];if(e.docs.forEach(e=>{var i;const o=e.data(),s=null===(i=o.createdAt)||void 0===i?void 0:i.toDate();s&&(s<t?r.push(e.ref):n.push(Ie({id:e.id},o)))}),r.length>0){console.log("\ud83d\uddd1\ufe0f Deleting",r.length,"old messages (3+ days)");const e=ny(kv);r.forEach(t=>e.delete(t)),e.commit().catch(e=>console.error("Error deleting old messages:",e))}const i=n.sort((e,t)=>{var n,r,i,o;return((null===(n=e.createdAt)||void 0===n||null===(r=n.toMillis)||void 0===r?void 0:r.call(n))||0)-((null===(i=t.createdAt)||void 0===i||null===(o=i.toMillis)||void 0===o?void 0:o.call(i))||0)});console.log("\u2705 Loaded",i.length,"messages (deleted",r.length,"old)"),P(i),X(e=>e.filter(e=>!i.some(t=>{var n;return t.text===e.text&&t.userId===e.userId&&Math.abs(((null===(n=t.createdAt)||void 0===n?void 0:n.toMillis())||0)-e.createdAt)<5e3}))),i.length>0&&le(j.id)},e=>{console.error("\u274c Error loading messages:",e)});return()=>{console.log("\ud83d\udd0c Unsubscribing from messages"),e()}},[null===j||void 0===j?void 0:j.id,u.uid]),(0,i.useEffect)(()=>{if(!j)return;const e=Yg(kg(Pm(kv,"typing"),Cg("conversationId","==",j.id)),e=>{const t={};e.docs.forEach(e=>{const n=e.data();var r;n.userId!==u.uid&&n.isTyping&&(t[n.userId]=(null===(r=n.userEmail)||void 0===r?void 0:r.split("@")[0])||"Someone")}),U(t)});return()=>e()},[j,u.uid,u.email]);const ce=async()=>{if(m.trim()){L(!0);try{const t=m.toLowerCase().trim(),n=kg(Pm(kv,"users"),Cg("email",">=",t),Cg("email","<=",t+"\uf8ff"),Rg(20)),r=(await Vg(n)).docs.map(e=>Ie({id:e.id},e.data())).filter(e=>e.id!==u.uid);let i=[];try{const e=kg(Pm(kv,"users"),Cg("nameLower",">=",t),Cg("nameLower","<=",t+"\uf8ff"),Rg(20));i=(await Vg(e)).docs.map(e=>Ie({id:e.id},e.data())).filter(e=>e.id!==u.uid)}catch(e){console.log("Name search skipped (nameLower field may not exist)")}const o=new Map;[...r,...i].forEach(e=>{o.set(e.id,e)});const s=Array.from(o.values());v(s),console.log("\ud83d\udd0d Search results: ".concat(s.length," users found (case-insensitive)"))}catch(t){console.error("Search error:",t)}L(!1)}},ue=(e,t)=>{var n;const r=J[e];return null!==r&&void 0!==r&&r.photoURL?(0,_v.jsx)("img",{src:r.photoURL,alt:"avatar",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):null===(n=(t||"?")[0])||void 0===n?void 0:n.toUpperCase()},de=e=>{var t;const n=J[e];return(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t.split("@")[0])||"User"},he=[...A,...Q].sort((e,t)=>{var n,r;return(null!==(n=e.createdAt)&&void 0!==n&&n.toMillis?e.createdAt.toMillis():e.createdAt)-(null!==(r=t.createdAt)&&void 0!==r&&r.toMillis?t.createdAt.toMillis():t.createdAt)}),fe=async e=>{if(j)try{const t=Dm(kv,"typing","".concat(j.id,"_").concat(u.uid));e?(await qg(t,{conversationId:j.id,userId:u.uid,userEmail:u.email,isTyping:!0,timestamp:Zg()},{merge:!0}),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{fe(!1)},5e3)):await Gg(t)}catch(t){console.error("Error updating typing status:",t)}},pe=async()=>{if(!D.trim()||!j)return;if(D.length>1e3)return void alert("Message too long! Maximum 1000 characters.");const e=D.trim(),t="temp_".concat(Date.now(),"_").concat(Math.random()),n={id:t,text:e,userId:u.uid,userEmail:u.email,conversationId:j.id,createdAt:Date.now(),isOptimistic:!0};X(e=>[...e,n]),N(""),fe(!1),console.log("\ud83d\udce4 Sending message:",e);try{const t=Xa.fromDate(new Date);await Kg(Pm(kv,"messages"),{conversationId:j.id,userId:u.uid,userEmail:u.email,text:e,createdAt:t}),console.log("\u2705 Message sent! Cloud Function will update conversation.")}catch(r){console.error("\u274c Error sending message:",r),X(e=>e.filter(e=>e.id!==t)),alert("Failed to send message. Please try again.")}},me=Object.values(H).reduce((e,t)=>e+t,0);return(0,_v.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 25%, #fcd34d 50%, #fbbf24 75%, #f59e0b 100%)",padding:"2rem",paddingTop:"calc(2rem + env(safe-area-inset-top))"},children:[!Z&&(0,_v.jsxs)("div",{style:{position:"fixed",top:"1rem",right:"1rem",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"14px",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.75rem",zIndex:9999,fontWeight:"800",border:"2px solid white"},children:[(0,_v.jsx)(ab,{size:24}),"You are offline"]}),(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #ec4899 0%, #a855f7 50%, #8b5cf6 100%)",borderRadius:"24px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 10px 30px rgba(168, 85, 247, 0.3)",border:"3px solid rgba(255, 255, 255, 0.3)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",marginBottom:"1rem"},children:[(0,_v.jsx)("button",{onClick:d,style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"16px",padding:"0.875rem",cursor:"pointer",display:"flex",alignItems:"center",backdropFilter:"blur(10px)",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="scale(1)"},children:(0,_v.jsx)(lb,{size:24,style:{color:"white"}})}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsxs)("h1",{style:{fontSize:"3rem",fontWeight:"900",margin:"0 0 0.5rem",background:"linear-gradient(to right, #fde68a, #ffffff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["DateMaker ",(0,_v.jsx)("span",{style:{color:"#8b5cf6"},children:"Social"})]}),(0,_v.jsx)("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.95)",fontSize:"1.125rem",fontWeight:"600"},children:"Connect, share, and plan amazing dates together! \u2728"})]})]}),(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1.5rem"},children:[{id:"feed",icon:Qe,label:"Feed",count:h},{id:"search",icon:cb,label:"Search",count:0},{id:"friends",icon:zv,label:"Friends",count:0},{id:"requests",icon:ub,label:"Requests",count:w.filter(e=>!e.seen).length},{id:"messages",icon:nb,label:"Messages",count:me}].map(e=>(0,_v.jsxs)("button",{onClick:()=>p(e.id),style:{padding:"1rem",borderRadius:"16px",border:f===e.id?"3px solid white":"3px solid transparent",background:f===e.id?"white":"rgba(255, 255, 255, 0.15)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",fontWeight:"800",fontSize:"0.95rem",color:f===e.id?"#8b5cf6":"white",backdropFilter:"blur(10px)",position:"relative"},onMouseEnter:t=>{f!==e.id&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.25)",t.currentTarget.style.transform="scale(1.02)")},onMouseLeave:t=>{f!==e.id&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.15)",t.currentTarget.style.transform="scale(1)")},children:[(0,_v.jsx)(e.icon,{size:22}),(0,_v.jsx)("span",{children:e.label}),e.count>0&&(0,_v.jsx)("span",{style:{position:"absolute",top:"-6px",right:"-6px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",borderRadius:"50%",width:"22px",height:"22px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",fontWeight:"900",border:"2px solid white",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.5)"},children:e.count>99?"9+":e.count})]},e.id))})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2rem",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",border:"3px solid rgba(168, 85, 247, 0.2)",minHeight:"400px",marginBottom:"2rem"},children:["feed"===f&&!K&&(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,_v.jsx)(Qe,{size:32,style:{color:"#a855f7"}}),(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"900",margin:0,background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Your Feed \ud83c\udf89"})]}),(0,_v.jsx)("p",{style:{color:"#6b7280",fontSize:"1rem",marginBottom:"2rem",fontWeight:"600"},children:1===C.length?"1 amazing date shared":"".concat(C.length," amazing dates shared")}),0===C.length?(0,_v.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#9ca3af"},children:[(0,_v.jsx)(Qe,{size:64,style:{margin:"0 auto 1rem",opacity:.3}}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"No dates shared yet"}),(0,_v.jsx)("p",{style:{fontSize:"1rem"},children:"Share your amazing dates with friends or make them public!"})]}):(0,_v.jsx)("div",{style:{display:"grid",gap:"1.5rem"},children:C.map(e=>{var t,n,r,i,o;return(0,_v.jsxs)("div",{onClick:t=>{t.target.closest("button")||Y(e)},style:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",borderRadius:"20px",padding:"1.75rem",border:"2px solid #e9d5ff",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.1)",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(168, 85, 247, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(168, 85, 247, 0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1.25rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.25rem",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)"},children:(null===(t=e.userEmail)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toUpperCase())||"?"}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem",fontWeight:"800",fontSize:"1.125rem",color:"#1f2937"},children:(null===(r=e.userEmail)||void 0===r?void 0:r.split("@")[0])||"Unknown"}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"600"},children:null===(i=e.createdAt)||void 0===i?void 0:i.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.userId===u.uid&&(0,_v.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this shared date?"))try{await Gg(Dm(kv,"sharedDates",e))}catch(t){console.error("Error deleting shared date:",t)}})(e.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"0.625rem",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.transform="scale(1)"},children:(0,_v.jsx)(db,{size:18,style:{color:"#ef4444"}})})]}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"900",margin:"0 0 1rem",color:"#1f2937"},children:(null===(o=e.dateData)||void 0===o?void 0:o.title)||e.name||"Untitled Date"}),e.activities&&e.activities.length>0&&(0,_v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",marginBottom:"1.25rem"},children:e.activities.map((e,t)=>(0,_v.jsx)("div",{style:{background:"white",padding:"0.625rem 1.125rem",borderRadius:"14px",border:"2px solid #e9d5ff",fontSize:"0.9375rem",fontWeight:"700",color:"#8b5cf6",boxShadow:"0 2px 6px rgba(168, 85, 247, 0.1)"},children:e},t))}),(0,_v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.25rem"},children:[e.location&&(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",background:"white",padding:"0.875rem 1.125rem",borderRadius:"14px",border:"2px solid #dbeafe"},children:[(0,_v.jsx)(Ue,{size:18,style:{color:"#3b82f6"}}),(0,_v.jsx)("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:"#1f2937"},children:e.location})]}),e.budget&&(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.625rem",background:"white",padding:"0.875rem 1.125rem",borderRadius:"14px",border:"2px solid #dcfce7"},children:[(0,_v.jsx)("span",{style:{fontSize:"1.125rem"},children:"\ud83d\udcb0"}),(0,_v.jsx)("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:"#1f2937"},children:e.budget})]})]}),e.notes&&(0,_v.jsx)("p",{style:{background:"white",padding:"1rem",borderRadius:"14px",border:"2px solid #fef3c7",margin:"0 0 1.25rem",fontSize:"0.9375rem",lineHeight:"1.6",color:"#374151",fontWeight:"500"},children:e.notes}),(0,_v.jsx)("div",{style:{display:"flex",gap:"1rem",paddingTop:"1rem",borderTop:"2px solid #e9d5ff"},children:(0,_v.jsxs)("button",{onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const n=Dm(kv,"sharedDates",e),r=t.includes(u.uid);_(n=>n.map(n=>{if(n.id===e){const e=r?t.filter(e=>e!==u.uid):[...t,u.uid];return Ie(Ie({},n),{},{likes:e})}return n})),r?await Hg(n,{likes:ty(u.uid)}):await Hg(n,{likes:ey(u.uid)})}catch(n){console.error("\u274c Error toggling like:",n),_(n=>n.map(n=>n.id===e?Ie(Ie({},n),{},{likes:t}):n))}}(e.id,e.likes||[]),style:{flex:1,padding:"0.875rem",borderRadius:"14px",border:(e.likes||[]).includes(u.uid)?"2px solid #ec4899":"2px solid #e9d5ff",background:(e.likes||[]).includes(u.uid)?"rgba(236, 72, 153, 0.1)":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.625rem",fontWeight:"800",fontSize:"1rem",color:(e.likes||[]).includes(u.uid)?"#ec4899":"#8b5cf6",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 4px 12px rgba(168, 85, 247, 0.2)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="none"},children:[(0,_v.jsx)(Me,{size:20,fill:(e.likes||[]).includes(u.uid)?"#ec4899":"none"}),(e.likes||[]).length," ",1===(e.likes||[]).length?"Like":"Likes"]})})]},e.id)})})]}),"feed"===f&&K&&(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("button",{onClick:()=>Y(null),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.5rem",borderRadius:"14px",border:"2px solid #e9d5ff",background:"white",color:"#a855f7",fontWeight:"800",fontSize:"1.0625rem",cursor:"pointer",marginBottom:"2rem",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="#faf5ff",e.target.style.transform="translateX(-4px)"},onMouseLeave:e=>{e.target.style.background="white",e.target.style.transform="translateX(0)"},children:[(0,_v.jsx)(lb,{size:20}),"Back to Feed"]}),(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",borderRadius:"24px",padding:"2rem",border:"2px solid #e9d5ff",boxShadow:"0 8px 24px rgba(168, 85, 247, 0.15)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"2px solid #f3e8ff"},children:[(0,_v.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.5rem",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)"},children:(null===(t=K.userEmail)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toUpperCase())||"?"}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"900",color:"#1f2937",margin:0},children:(null===(r=K.dateData)||void 0===r?void 0:r.title)||K.name||"Date Night"}),(0,_v.jsxs)("p",{style:{margin:0,fontSize:"1rem",color:"#6b7280",fontWeight:"600"},children:["by ",(null===(o=K.userEmail)||void 0===o?void 0:o.split("@")[0])||"Unknown"]})]})]}),K.caption&&(0,_v.jsx)("div",{style:{background:"#faf5ff",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem",border:"2px solid #f3e8ff"},children:(0,_v.jsx)("p",{style:{fontSize:"1.125rem",color:"#1f2937",lineHeight:"1.7",margin:0},children:K.caption})}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[K.scheduledDate&&(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.5rem",background:"rgba(168, 85, 247, 0.1)",borderRadius:"14px",border:"2px solid #e9d5ff"},children:[(0,_v.jsx)(Pv,{size:24,style:{color:"#a855f7"}}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("p",{style:{fontSize:"0.8125rem",fontWeight:"700",color:"#a855f7",margin:0},children:"Date"}),(0,_v.jsx)("p",{style:{fontSize:"1rem",fontWeight:"800",color:"#1f2937",margin:0},children:new Date(K.scheduledDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),K.scheduledTime&&(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.5rem",background:"rgba(236, 72, 153, 0.1)",borderRadius:"14px",border:"2px solid #fce7f3"},children:[(0,_v.jsx)(Oe,{size:24,style:{color:"#ec4899"}}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("p",{style:{fontSize:"0.8125rem",fontWeight:"700",color:"#ec4899",margin:0},children:"Start Time"}),(0,_v.jsx)("p",{style:{fontSize:"1rem",fontWeight:"800",color:"#1f2937",margin:0},children:K.scheduledTime})]})]})]}),(0,_v.jsx)("div",{children:((e,t,n)=>{const r=(null===(e=K.dateData)||void 0===e?void 0:e.stops)||(null===(t=K.dateData)||void 0===t||null===(n=t.itinerary)||void 0===n?void 0:n.stops)||K.stops||[];return(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("h3",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#1f2937",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,_v.jsx)(Ue,{size:28,style:{color:"#a855f7"}}),"Itinerary (",r.length," stops)"]}),0===r.length?(0,_v.jsx)("div",{style:{textAlign:"center",padding:"3rem",background:"#faf5ff",borderRadius:"16px",border:"2px dashed #e9d5ff"},children:(0,_v.jsx)("p",{style:{fontSize:"1rem",color:"#6b7280",margin:0},children:"No activities added to this date yet"})}):(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:r.map((e,t)=>{var n;return(0,_v.jsxs)("div",{style:{background:"#ffffff",borderRadius:"24px",padding:"0",border:"3px solid #e9d5ff",overflow:"hidden",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(168, 85, 247, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #a855f7 0%, #ec4899 100%)",padding:"1rem 1.5rem",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.5rem",border:"3px solid white"},children:t+1}),(0,_v.jsxs)("div",{style:{flex:1},children:[e.time&&(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[(0,_v.jsx)(Oe,{size:18,style:{color:"white"}}),(0,_v.jsxs)("span",{style:{fontSize:"1rem",fontWeight:"800",color:"white"},children:[e.time," ",e.duration&&"\u2022 ".concat(e.duration)]})]}),e.category&&(0,_v.jsx)("p",{style:{fontSize:"0.875rem",fontWeight:"700",color:"rgba(255, 255, 255, 0.9)",textTransform:"uppercase",letterSpacing:"0.05em",margin:0},children:e.category})]})]}),(0,_v.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,_v.jsx)("h4",{style:{fontSize:"1.5rem",fontWeight:"900",color:"#1f2937",margin:"0 0 1rem 0"},children:e.title||e.name||"Untitled Stop"}),e.description&&(0,_v.jsx)("p",{style:{fontSize:"1rem",color:"#6b7280",lineHeight:"1.6",margin:"0 0 1.5rem 0"},children:e.description}),e.image&&(0,_v.jsxs)("div",{style:{width:"100%",height:"300px",borderRadius:"16px",overflow:"hidden",marginBottom:"1.5rem",position:"relative"},children:[(0,_v.jsx)("img",{src:e.image,alt:e.title||e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.target.style.display="none"}}),e.rating&&(0,_v.jsxs)("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"white",padding:"0.5rem 1rem",borderRadius:"12px",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[(0,_v.jsx)(Fe,{size:20,style:{color:"#f59e0b",fill:"#f59e0b"}}),(0,_v.jsx)("span",{style:{fontSize:"1.125rem",fontWeight:"900",color:"#1f2937"},children:e.rating.toFixed(1)})]})]}),e.venueName&&e.venueName!==e.title&&(0,_v.jsx)("h5",{style:{fontSize:"1.25rem",fontWeight:"800",color:"#1f2937",margin:"0 0 1rem 0"},children:e.venueName}),e.vicinity&&(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem",marginBottom:"1.5rem",padding:"1rem",background:"#faf5ff",borderRadius:"12px"},children:[(0,_v.jsx)(Ue,{size:20,style:{color:"#ec4899",flexShrink:0,marginTop:"0.125rem"}}),(0,_v.jsx)("p",{style:{fontSize:"1rem",fontWeight:"700",color:"#1f2937",margin:0},children:e.vicinity})]}),(null===(n=e.geometry)||void 0===n?void 0:n.location)&&(0,_v.jsx)("div",{style:{width:"100%",height:"200px",borderRadius:"12px",overflow:"hidden",marginBottom:"1.5rem",border:"2px solid #e9d5ff"},children:(0,_v.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e.geometry.location.lat,",").concat(e.geometry.location.lng,"&zoom=15&size=600x200&markers=color:red%7C").concat(e.geometry.location.lat,",").concat(e.geometry.location.lng,"&key=AIzaSyCKCweUu3EEWa8VfNZJ3I0druTc6u5gJKc"),alt:"Map",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.challenges&&e.challenges.length>0&&(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fff5f5 0%, #fef2f2 100%)",borderRadius:"16px",padding:"1.5rem",border:"2px solid #fecaca"},children:[(0,_v.jsxs)("h5",{style:{fontSize:"1.25rem",fontWeight:"900",color:"#ef4444",margin:"0 0 1rem 0",display:"flex",alignItems:"center",gap:"0.75rem"},children:["\ud83c\udfaf Challenges (",e.challenges.length,")"]}),(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.challenges.map((e,t)=>(0,_v.jsxs)("div",{style:{background:"white",padding:"1rem 1.25rem",borderRadius:"12px",border:"2px solid #fed7aa",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem",flex:1},children:[(0,_v.jsx)("span",{style:{fontSize:"1.25rem",flexShrink:0},children:e.emoji||"\ud83c\udfaf"}),(0,_v.jsx)("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1f2937",lineHeight:"1.5"},children:e.text||e})]}),e.points&&(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",color:"white",padding:"0.5rem 1rem",borderRadius:"10px",fontWeight:"900",fontSize:"1rem",flexShrink:0,boxShadow:"0 2px 8px rgba(251, 146, 60, 0.3)"},children:["+",e.points," XP"]})]},t))})]})]})]},t)})})]})})()}),(0,_v.jsx)("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid #f3e8ff",display:"flex",justifyContent:"center"},children:(0,_v.jsxs)("button",{onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const n=Dm(kv,"sharedDates",e),r=t.includes(u.uid);console.log("\ud83d\udc4d Detail view like clicked:",{dateId:e,hasLiked:r}),Y(t=>{if(!t||t.id!==e)return t;const n=r?(t.likes||[]).filter(e=>e!==u.uid):[...t.likes||[],u.uid];return Ie(Ie({},t),{},{likes:n})}),_(t=>t.map(t=>{if(t.id===e){const e=r?(t.likes||[]).filter(e=>e!==u.uid):[...t.likes||[],u.uid];return Ie(Ie({},t),{},{likes:e})}return t})),r?(await Hg(n,{likes:ty(u.uid)}),console.log("\ud83d\udc94 Unliked post (detail view)")):(await Hg(n,{likes:ey(u.uid)}),console.log("\u2764\ufe0f Liked post (detail view)"))}catch(n){console.error("\u274c Error toggling like in detail view:",n),Y(n=>n&&n.id===e?Ie(Ie({},n),{},{likes:t}):n),alert("Failed to like. Please try again.")}}(K.id,K.likes||[]),style:{padding:"1.125rem 2rem",borderRadius:"16px",border:(K.likes||[]).includes(u.uid)?"2px solid #ec4899":"2px solid #e9d5ff",background:(K.likes||[]).includes(u.uid)?"rgba(236, 72, 153, 0.1)":"white",color:(K.likes||[]).includes(u.uid)?"#ec4899":"#a855f7",fontWeight:"900",fontSize:"1.125rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.2s",boxShadow:(K.likes||[]).includes(u.uid)?"0 4px 12px rgba(236, 72, 153, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 6px 16px rgba(236, 72, 153, 0.3)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow=(K.likes||[]).includes(u.uid)?"0 4px 12px rgba(236, 72, 153, 0.2)":"0 2px 6px rgba(0,0,0,0.05)"},children:[(0,_v.jsx)(Me,{size:24,fill:(K.likes||[]).includes(u.uid)?"#ec4899":"none"}),(K.likes||[]).length," ",1===(K.likes||[]).length?"Like":"Likes"]})})]})]}),"search"===f&&(0,_v.jsxs)("div",{style:{padding:"0 0.5rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,_v.jsx)(cb,{size:32,style:{color:"#a855f7"}}),(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"900",margin:0,background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Find Friends"})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[(0,_v.jsx)("input",{type:"email",value:m,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"===e.key&&ce()},placeholder:"Search by email or name...",style:{flex:1,padding:"1.125rem 1.5rem",borderRadius:"18px",border:"2px solid #e9d5ff",fontSize:"1rem",outline:"none",transition:"all 0.2s"},onFocus:e=>{e.target.style.borderColor="#a855f7",e.target.style.boxShadow="0 0 0 3px rgba(168, 85, 247, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e9d5ff",e.target.style.boxShadow="none"}}),(0,_v.jsxs)("button",{onClick:ce,disabled:z,style:{padding:"0.875rem 1.25rem",borderRadius:"18px",border:"none",background:z?"#d1d5db":"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)",color:"white",fontWeight:"800",fontSize:"0.875rem",cursor:z?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s",boxShadow:z?"none":"0 6px 20px rgba(168, 85, 247, 0.3)",minWidth:"fit-content",whiteSpace:"nowrap"},onMouseEnter:e=>{z||(e.target.style.transform="scale(1.03)",e.target.style.boxShadow="0 8px 24px rgba(168, 85, 247, 0.4)")},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow=z?"none":"0 6px 20px rgba(168, 85, 247, 0.3)"},children:[(0,_v.jsx)(cb,{size:18}),(0,_v.jsx)("span",{style:{display:window.innerWidth>640?"inline":"none"},children:z?"Searching...":"Search"})]})]}),0===y.length&&m.trim()&&!z&&(0,_v.jsxs)("div",{style:{textAlign:"center",padding:"3rem 2rem",color:"#6b7280"},children:[(0,_v.jsx)(cb,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),(0,_v.jsx)("p",{style:{fontSize:"1.125rem",fontWeight:"700",marginBottom:"0.5rem",color:"#374151"},children:"No users found"}),(0,_v.jsx)("p",{style:{fontSize:"0.95rem"},children:'Try the start of their email address (e.g., "john" or "j")'})]}),y.length>0&&(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"0"},children:y.map(e=>(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",padding:"1.25rem",borderRadius:"16px",border:"2px solid #e9d5ff",boxShadow:"0 2px 8px rgba(168, 85, 247, 0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",width:"100%"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.25rem",flexShrink:0,boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)"},children:e.email[0].toUpperCase()}),(0,_v.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem",fontWeight:"800",fontSize:"1.125rem",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name||e.email.split("@")[0]}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.email})]})]}),(0,_v.jsx)("button",{onClick:()=>!k.some(t=>t.toUserId===e.id)&&(async e=>{try{if(!(await Vg(kg(Pm(kv,"friendRequests"),Cg("fromUserId","==",u.uid),Cg("toUserId","==",e.id)))).empty)return void ne("Friend request already sent!");await Kg(Pm(kv,"friendRequests"),{fromUserId:u.uid,fromUserEmail:u.email,toUserId:e.id,toUserEmail:e.email,status:"pending",createdAt:Zg()}),ne("Friend request sent! \ud83c\udf89"),v(t=>t.filter(t=>t.id!==e.id))}catch(t){console.error("Error sending friend request:",t)}})(e),disabled:k.some(t=>t.toUserId===e.id),style:{width:"100%",padding:"0.875rem",borderRadius:"14px",border:"none",background:k.some(t=>t.toUserId===e.id)?"linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)":"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)",color:"white",fontWeight:"800",fontSize:"1rem",cursor:k.some(t=>t.toUserId===e.id)?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",boxShadow:k.some(t=>t.toUserId===e.id)?"none":"0 4px 12px rgba(168, 85, 247, 0.3)"},onMouseEnter:t=>{k.some(t=>t.toUserId===e.id)||(t.target.style.transform="scale(1.02)",t.target.style.boxShadow="0 6px 16px rgba(168, 85, 247, 0.4)")},onMouseLeave:t=>{t.target.style.transform="scale(1)",t.target.style.boxShadow=k.some(t=>t.toUserId===e.id)?"none":"0 4px 12px rgba(168, 85, 247, 0.3)"},children:k.some(t=>t.toUserId===e.id)?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(Oe,{size:20}),"Pending"]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(ub,{size:20}),"Add Friend"]})})]},e.id))})]}),"friends"===f&&(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,_v.jsx)(zv,{size:32,style:{color:"#a855f7"}}),(0,_v.jsxs)("h2",{style:{fontSize:"2rem",fontWeight:"900",margin:0,background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["My Friends (",b.length,")"]})]}),0===b.length?(0,_v.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#9ca3af"},children:[(0,_v.jsx)(zv,{size:64,style:{margin:"0 auto 1rem",opacity:.3}}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"No friends yet"}),(0,_v.jsx)("p",{style:{fontSize:"1rem"},children:"Search for users and send friend requests to get started!"})]}):(0,_v.jsx)("div",{style:{display:"grid",gap:"1rem"},children:b.map(e=>(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",padding:"1.5rem",borderRadius:"18px",border:"2px solid #e9d5ff",boxShadow:"0 2px 8px rgba(168, 85, 247, 0.1)",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateX(4px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(168, 85, 247, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateX(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(168, 85, 247, 0.1)"},children:[B.has(e.id)&&(0,_v.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",width:"12px",height:"12px",borderRadius:"50%",background:"#10b981",border:"2px solid white",boxShadow:"0 2px 6px rgba(16, 185, 129, 0.3)"}}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:B.has(e.id)?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.25rem",boxShadow:B.has(e.id)?"0 4px 12px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(107, 114, 128, 0.3)"},children:e.email[0].toUpperCase()}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem",fontWeight:"800",fontSize:"1.125rem",color:"#1f2937"},children:e.name}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.875rem",color:B.has(e.id)?"#10b981":"#6b7280",fontWeight:"700"},children:B.has(e.id)?"\ud83d\udfe2 Online":"Offline"})]})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,_v.jsxs)("button",{onClick:()=>(async e=>{try{const t=b.find(t=>t.id===e);if(!t)return;const n=T.find(t=>!t.isGroup&&t.participants.includes(e)&&t.participants.includes(u.uid));if(n)return R(n),void p("messages");const r={participants:[u.uid,e],participantEmails:[u.email,t.email],isGroup:!1,createdAt:Zg()},i=await Kg(Pm(kv,"conversations"),r);R(Ie({id:i.id},r)),p("messages")}catch(t){console.error("Error starting conversation:",t)}})(e.id),style:{padding:"0.625rem 1rem",borderRadius:"14px",border:"none",background:"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)",color:"white",fontWeight:"800",fontSize:"0.875rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)",minWidth:"0"},onMouseEnter:e=>{e.target.style.transform="scale(1.03)",e.target.style.boxShadow="0 6px 16px rgba(168, 85, 247, 0.4)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 12px rgba(168, 85, 247, 0.3)"},children:[(0,_v.jsx)(nb,{size:18}),(0,_v.jsx)("span",{style:{display:window.innerWidth>640?"inline":"none"},children:"Message"})]}),(0,_v.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Remove this friend?"))try{const t=kg(Pm(kv,"friendRequests"),Cg("status","==","accepted")),n=await Vg(t),r=ny(kv);n.docs.forEach(t=>{const n=t.data();(n.fromUserId===u.uid&&n.toUserId===e||n.toUserId===u.uid&&n.fromUserId===e)&&r.delete(Dm(kv,"friendRequests",t.id))}),await r.commit()}catch(t){console.error("Error removing friend:",t)}})(e.id),style:{padding:"0.875rem",borderRadius:"14px",border:"2px solid rgba(239, 68, 68, 0.3)",background:"rgba(239, 68, 68, 0.1)",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.transform="scale(1)"},children:(0,_v.jsx)(hb,{size:20,style:{color:"#ef4444"}})})]})]},e.id))})]}),"requests"===f&&(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,_v.jsx)(ub,{size:32,style:{color:"#a855f7"}}),(0,_v.jsxs)("h2",{style:{fontSize:"2rem",fontWeight:"900",margin:0,background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Friend Requests (",w.length,")"]})]}),0===w.length?(0,_v.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#9ca3af"},children:[(0,_v.jsx)(ub,{size:64,style:{margin:"0 auto 1rem",opacity:.3}}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"No pending requests"}),(0,_v.jsx)("p",{style:{fontSize:"1rem"},children:"You'll see friend requests here when someone sends you one!"})]}):(0,_v.jsx)("div",{style:{display:"grid",gap:"1rem"},children:w.map(e=>(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",padding:"1.25rem",borderRadius:"18px",border:"2px solid #fef3c7",boxShadow:"0 2px 8px rgba(251, 191, 36, 0.1)",transition:"all 0.2s"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.125rem",flexShrink:0,boxShadow:"0 4px 12px rgba(251, 191, 36, 0.3)"},children:e.fromUserEmail[0].toUpperCase()}),(0,_v.jsxs)("div",{style:{minWidth:0,flex:1},children:[(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem",fontWeight:"800",fontSize:"1rem",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.fromUserEmail.split("@")[0]}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.8rem",color:"#6b7280",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.fromUserEmail})]})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,_v.jsxs)("button",{onClick:()=>(async e=>{try{const t=Dm(kv,"friendRequests",e);await Hg(t,{status:"accepted",acceptedAt:Zg()});const n=w.find(t=>t.id===e);n&&await Kg(Pm(kv,"conversations"),{participants:[u.uid,n.fromUserId],participantEmails:[u.email,n.fromUserEmail],isGroup:!1,createdAt:Zg()})}catch(t){console.error("Error accepting friend request:",t)}})(e.id),style:{flex:1,padding:"0.75rem 1rem",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",fontWeight:"800",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[(0,_v.jsx)(Mv,{size:18}),"Accept"]}),(0,_v.jsxs)("button",{onClick:()=>(async e=>{try{await Gg(Dm(kv,"friendRequests",e))}catch(t){console.error("Error rejecting friend request:",t)}})(e.id),style:{flex:1,padding:"0.75rem 1rem",borderRadius:"12px",border:"2px solid rgba(239, 68, 68, 0.3)",background:"rgba(239, 68, 68, 0.1)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"800",fontSize:"0.9rem",color:"#ef4444",transition:"all 0.2s"},children:[(0,_v.jsx)(Rv,{size:18}),"Decline"]})]})]},e.id))}),k.length>0&&(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",margin:"3rem 0 2rem"},children:[(0,_v.jsx)(Oe,{size:32,style:{color:"#6b7280"}}),(0,_v.jsxs)("h2",{style:{fontSize:"2rem",fontWeight:"900",margin:0,color:"#6b7280"},children:["Sent Requests (",k.length,")"]})]}),(0,_v.jsx)("div",{style:{display:"grid",gap:"1rem"},children:k.map(e=>(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",padding:"1.5rem",borderRadius:"18px",border:"2px solid #e5e7eb",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.25rem",boxShadow:"0 4px 12px rgba(107, 114, 128, 0.3)"},children:e.toUserEmail[0].toUpperCase()}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem",fontWeight:"800",fontSize:"1.125rem",color:"#1f2937"},children:e.toUserEmail.split("@")[0]}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"600"},children:"Pending..."})]})]}),(0,_v.jsxs)("button",{onClick:()=>(async e=>{try{await Gg(Dm(kv,"friendRequests",e)),ne("Friend request cancelled")}catch(t){console.error("Error cancelling friend request:",t),ne("Failed to cancel request")}})(e.id),style:{padding:"0.75rem 1.25rem",borderRadius:"12px",border:"2px solid rgba(239, 68, 68, 0.3)",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",fontWeight:"700",fontSize:"0.875rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[(0,_v.jsx)(Rv,{size:18}),"Cancel"]})]},e.id))})]})]}),"messages"===f&&(0,_v.jsxs)("div",{style:{display:"flex",height:"600px",gap:"1.5rem"},children:[!j&&(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)(nb,{size:32,style:{color:"#a855f7"}}),(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"900",margin:0,background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Messages"})]}),(0,_v.jsxs)("button",{onClick:()=>q(!0),style:{padding:"0.75rem 1rem",borderRadius:"14px",border:"none",background:"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)",color:"white",fontWeight:"800",fontSize:"0.875rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)",whiteSpace:"nowrap"},onMouseEnter:e=>{e.target.style.transform="scale(1.03)",e.target.style.boxShadow="0 6px 16px rgba(168, 85, 247, 0.4)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 12px rgba(168, 85, 247, 0.3)"},children:[(0,_v.jsx)(fb,{size:18}),(0,_v.jsx)("span",{style:{display:window.innerWidth>640?"inline":"none"},children:"Create Group Chat"}),(0,_v.jsx)("span",{style:{display:window.innerWidth<=640?"inline":"none"},children:"Group"})]})]}),0===T.length?(0,_v.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#9ca3af"},children:[(0,_v.jsx)(nb,{size:64,style:{margin:"0 auto 1rem",opacity:.3}}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"No conversations yet"}),(0,_v.jsx)("p",{style:{fontSize:"1rem"},children:"Start a conversation with your friends or create a group chat!"})]}):(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",overflowY:"auto",maxHeight:"calc(600px - 100px)"},children:T.filter(e=>e.lastMessage||e.lastMessageTime||e.isGroup).map(e=>{var t,n,r,i,o;const s=H[e.id]||0;return(0,_v.jsxs)("button",{onClick:()=>R(e),style:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",border:"2px solid #e9d5ff",borderRadius:"18px",padding:"1.25rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",textAlign:"left",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateX(4px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(168, 85, 247, 0.2)",e.currentTarget.style.borderColor="#a855f7"},onMouseLeave:e=>{e.currentTarget.style.transform="translateX(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="#e9d5ff"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:e.isGroup?"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.25rem",flexShrink:0,boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)"},children:e.isGroup?(0,_v.jsx)(zv,{size:24}):(null===(t=e.participantEmails)||void 0===t||null===(n=t.find(e=>e!==u.email))||void 0===n||null===(r=n[0])||void 0===r?void 0:r.toUpperCase())||"?"}),(0,_v.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem",fontWeight:"800",fontSize:"1.125rem",color:"#1f2937",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.isGroup?e.name:(null===(i=e.participantEmails)||void 0===i||null===(o=i.find(e=>e!==u.email))||void 0===o?void 0:o.split("@")[0])||"Unknown"}),(0,_v.jsx)("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.lastMessage?"string"===typeof e.lastMessage?e.lastMessage:e.lastMessage.text||"No messages yet":"No messages yet"})]}),s>0&&(0,_v.jsx)("span",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8125rem",fontWeight:"900",border:"2px solid white",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.5)",flexShrink:0},children:s>99?"99+":s})]},e.id)})})]}),V&&(0,_v.jsx)(Sb,{friends:b,onClose:()=>q(!1),onCreate:async(e,t)=>{try{const n=[u.uid,...t.map(e=>e.id)],r={name:e,participants:n,participantEmails:[u.email,...t.map(e=>e.email)],isGroup:!0,createdBy:u.uid,createdAt:Zg()},i=await Kg(Pm(kv,"conversations"),r);R(Ie({id:i.id},r)),q(!1),p("messages")}catch(n){console.error("Error creating group chat:",n)}}}),j&&(0,_v.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",borderRadius:"20px",border:"2px solid #e9d5ff",overflow:"hidden",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.1)"},children:[(0,_v.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"2px solid #e9d5ff",background:"white",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("button",{onClick:()=>R(null),style:{background:"rgba(168, 85, 247, 0.15)",border:"2px solid rgba(168, 85, 247, 0.3)",borderRadius:"14px",padding:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(168, 85, 247, 0.25)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(168, 85, 247, 0.15)",e.target.style.transform="scale(1)"},children:(0,_v.jsx)(lb,{size:20,style:{color:"#a855f7"}})}),(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:j.isGroup?"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.25rem",boxShadow:"0 4px 12px rgba(168, 85, 247, 0.3)"},children:j.isGroup?(0,_v.jsx)(zv,{size:24}):(null===(s=j.participantEmails)||void 0===s||null===(a=s.find(e=>e!==u.email))||void 0===a||null===(l=a[0])||void 0===l?void 0:l.toUpperCase())||"?"}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsx)("h3",{style:{margin:"0 0 0.125rem",fontSize:"1.25rem",fontWeight:"900",color:"#1f2937"},children:j.isGroup?j.name:(null===(c=j.participantEmails)||void 0===c?void 0:c.find(e=>e!==u.email))||"Unknown"}),Object.keys(F).length>0&&(0,_v.jsxs)("p",{style:{margin:0,fontSize:"0.875rem",color:"#a855f7",fontWeight:"600"},children:[Object.values(F)[0]," is typing..."]})]})]}),A.length>0&&(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%)",padding:"0.875rem 1.5rem",borderBottom:"2px solid rgba(251, 191, 36, 0.2)",display:"flex",alignItems:"center",gap:"0.875rem",fontSize:"0.875rem",color:"#92400e",fontWeight:"700",backdropFilter:"blur(10px)"},children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",flexShrink:0,boxShadow:"0 2px 8px rgba(251, 191, 36, 0.3)"},children:"\ud83d\uddd1\ufe0f"}),(0,_v.jsx)("div",{style:{flex:1},children:(0,_v.jsx)("span",{style:{fontWeight:"800"},children:"Chats auto-delete after 3 days"})})]}),(0,_v.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",background:"linear-gradient(135deg, #ffffff 0%, #fefbff 100%)"},children:[he.map((e,t)=>{var n;const r=e.userId===u.uid||e.userEmail===u.email,i=j.isGroup&&!r;return(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:r?"flex-end":"flex-start",gap:"0.75rem",marginBottom:"1rem",opacity:e.isOptimistic?.7:1},children:[i&&(0,_v.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"0.875rem",flexShrink:0,alignSelf:"flex-end"},children:ue(e.userId,e.userEmail)}),(0,_v.jsxs)("div",{style:{maxWidth:"70%",display:"flex",flexDirection:"column",alignItems:r?"flex-end":"flex-start"},children:[i&&(0,_v.jsx)("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.75rem",fontWeight:"700",color:"#6b7280"},children:de(e.userId)}),(0,_v.jsx)("div",{style:{padding:"1rem 1.25rem",borderRadius:r?"22px 22px 4px 22px":"22px 22px 22px 4px",background:r?"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)":"white",color:r?"white":"#1f2937",border:r?"none":"2px solid #e9d5ff",boxShadow:r?"0 4px 12px rgba(168, 85, 247, 0.3)":"0 2px 8px rgba(0,0,0,0.05)",wordBreak:"break-word"},children:(0,_v.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.5",fontWeight:"500"},children:e.text})}),(0,_v.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.75rem",color:"#9ca3af"},children:[null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e.isOptimistic&&" (sending...)"]})]})]},e.id||t)}),(0,_v.jsx)("div",{ref:re})]}),(0,_v.jsx)("div",{style:{padding:"1rem",borderTop:"2px solid #e9d5ff",background:"white",borderRadius:"0 0 20px 20px"},children:(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,_v.jsx)("input",{type:"text",value:D,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"===e.key&&pe()},onFocus:e=>{fe(!0),e.target.style.borderColor="#a855f7",e.target.style.boxShadow="0 0 0 3px rgba(168, 85, 247, 0.1)"},onBlur:e=>{fe(!1),e.target.style.borderColor="#e9d5ff",e.target.style.boxShadow="none"},placeholder:"Type a message...",style:{flex:1,minWidth:0,padding:"0.875rem 1rem",borderRadius:"16px",border:"2px solid #e9d5ff",fontSize:"1rem",outline:"none",transition:"all 0.2s"}}),(0,_v.jsx)("button",{onClick:pe,disabled:!D.trim(),style:{padding:"0.875rem",borderRadius:"16px",border:"none",background:D.trim()?"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)":"#d1d5db",color:"white",fontWeight:"800",fontSize:"1rem",cursor:D.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"48px",height:"48px",transition:"all 0.2s",boxShadow:D.trim()?"0 4px 12px rgba(168, 85, 247, 0.3)":"none"},children:(0,_v.jsx)(rb,{size:20})})]})})]})]})]}),te&&(0,_v.jsx)(ob,{message:te,onClose:()=>ne(null)}),(0,_v.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n        \n        @keyframes pulse {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.5;\n          }\n        }\n      "})]})}function Sb(e){let{friends:t,onClose:n,onCreate:r}=e;const[o,s]=(0,i.useState)(""),[a,l]=(0,i.useState)([]);return(0,_v.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid #a855f7"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"900",margin:0,background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Create Group Chat"}),(0,_v.jsx)("button",{onClick:n,style:{background:"rgba(239, 68, 68, 0.1)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)"},children:(0,_v.jsx)(Rv,{size:20,style:{color:"#ef4444"}})})]}),(0,_v.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"Group name...",style:{width:"100%",padding:"1rem 1.25rem",borderRadius:"14px",border:"2px solid #e9d5ff",fontSize:"1rem",marginBottom:"1.5rem",outline:"none",transition:"all 0.2s"},onFocus:e=>{e.target.style.borderColor="#a855f7",e.target.style.boxShadow="0 0 0 3px rgba(168, 85, 247, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e9d5ff",e.target.style.boxShadow="none"}}),(0,_v.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"800",marginBottom:"1rem",color:"#1f2937"},children:["Select Friends (",a.length,")"]}),(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem"},children:t.map(e=>(0,_v.jsxs)("button",{onClick:()=>(e=>{l(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])})(e),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"14px",border:a.some(t=>t.id===e.id)?"2px solid #a855f7":"2px solid #e5e7eb",background:a.some(t=>t.id===e.id)?"rgba(168, 85, 247, 0.1)":"white",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:e=>{e.currentTarget.style.transform="translateX(4px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateX(0)"},children:[(0,_v.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:a.some(t=>t.id===e.id)?"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)":"linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"1.125rem",flexShrink:0},children:e.email[0].toUpperCase()}),(0,_v.jsx)("span",{style:{fontSize:"1rem",fontWeight:"700",color:"#1f2937"},children:e.name})]},e.id))}),(0,_v.jsx)("button",{onClick:()=>{o.trim()&&0!==a.length?r(o,a):alert("Please enter a group name and select at least one friend")},disabled:!o.trim()||0===a.length,style:{width:"100%",padding:"1.125rem",borderRadius:"14px",border:"none",background:o.trim()&&a.length>0?"linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%)":"#d1d5db",color:"white",fontWeight:"800",fontSize:"1.125rem",cursor:o.trim()&&a.length>0?"pointer":"not-allowed",transition:"all 0.2s",boxShadow:o.trim()&&a.length>0?"0 6px 20px rgba(168, 85, 247, 0.3)":"none"},onMouseEnter:e=>{o.trim()&&a.length>0&&(e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 8px 24px rgba(168, 85, 247, 0.4)")},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow=o.trim()&&a.length>0?"0 6px 20px rgba(168, 85, 247, 0.3)":"none"},children:"Create Group Chat"})]})})}const kb={en:{flag:"\ud83c\uddec\ud83c\udde7",name:"English",appName:"DateMaker",social:"Social",saved:"Saved",profile:"Profile",logout:"Logout",back:"Back",freePlan:"Free Plan",premiumPlan:"Premium",heroTitle1:"Unforgettable",heroTitle2:"Dates",heroSubtitle:"Start Here",heroDescription:"Get a complete itinerary with custom timing: Dinner \u2192 Drinks \u2192 Entertainment. We'll plan your whole night!",upgradeTitle:"Upgrade to Premium",upgradeDescription:"Unlock unlimited date generation with complete itineraries & custom timing!",upgradeButton:"Upgrade Now",whenHowLong:"When & How Long?",startTime:"Start Time",duration:"Duration",quickDate:"Quick Date",fullEvening:"Full Evening",allNight:"All Night",dateWillRun:"Your date will run from",to:"to",location:"Where are you located?",locationPlaceholder:"e.g., London, Paris, New York",hobbies:"What are your hobbies?",activities:"What activities do you enjoy?",addCustomActivity:" Add your activities in correct order",customActivityPlaceholder:"e.g., Dinner, cocktails, Nightclub...",add:"Add",includeEvents:"Include upcoming events, concerts & festivals",whenLookingForEvents:"When are you looking for events?",anytime:"Anytime",today:"Today",thisWeek:"This Week",thisMonth:"This Month",pickDate:"Pick a Date",selectDate:"Select specific date:",generateDate:"Generate My Perfect Date",creating:"Creating Your Perfect Itinerary...",refresh:"Refresh",loading:"Loading...",saveItinerary:"Save Itinerary",save:"Save",share:"Share",remove:"Remove",directions:"Directions",website:"Website",tickets:"Tickets",message:"Message",yourPerfectDate:"Your Perfect Date",dateNightItinerary:"Your Date Night Itinerary",alternativeOptions:"Alternative Options",alternativeDescription:"Looking for something different? Here are more great options:",scenicWalk:"Scenic Walk",scenicWalkDesc:"Start with a beautiful walk together",dinner:"Dinner",dinnerDesc:"Start your evening with a delicious meal",coffeeDate:"Coffee Date",coffeeDateDesc:"Start with coffee and conversation",firstStop:"First Stop",firstStopDesc:"Start your adventure",coffeeChat:"Coffee & Chat",coffeeChatDesc:"Relax with great conversation",cocktails:"Cocktails & Drinks",cocktailsDesc:"Enjoy craft cocktails",secondStop:"Second Stop",secondStopDesc:"Continue your date",liveMusic:"Live Music",liveMusicDesc:"Experience live music together",comedyShow:"Comedy Show",comedyShowDesc:"Laugh the night away",theater:"Theater",theaterDesc:"Catch a show",cultural:"Cultural Experience",culturalDesc:"Explore art and culture",specialEvent:"Special Event",specialEventDesc:"Attend this exciting event",dancing:"Dancing",dancingDesc:"Hit the dance floor",karaoke:"Karaoke",karaokeDesc:"Sing your hearts out",funGames:"Fun & Games",funGamesDesc:"Challenge yourselves",eveningStroll:"Evening Stroll",eveningStrollDesc:"End with a beautiful walk",nightCap:"Night Cap",nightCapDesc:"End with drinks",finalStop:"Final Stop",finalStopDesc:"Complete your perfect date",additionalStop:"Additional Stop",additionalStopDesc:"Another great spot",mySavedDates:"My Saved Dates",noSavedDates:"No saved dates yet",noSavedDatesDesc:"Start generating dates and save your favorites!",findPerfectDate:"Find Your Perfect Date",myProfile:"My Profile",accountInfo:"Account Information",email:"Email",plan:"Plan",changePassword:"Change Password",newPassword:"New Password",confirmPassword:"Confirm New Password",updatePassword:"Update Password",uploadPhoto:"Upload Photo",subscription:"Subscription",premiumActive:"Premium Plan Active",premiumDesc:"Enjoy unlimited date generation and all premium features!",cancelSubscription:"Cancel Subscription",upgradeToPremium:"Upgrade to Premium",unlockPremium:"Unlock Premium Features",premiumFeatures:["Unlimited date generation","Complete itinerary planning","Custom timing & duration","Save unlimited dates","Social features & messaging","Share dates with friends"],socialFeature:"Social features are for premium members only!",locationNotFound:"Location not found. Try adding country.",noPlacesFound:"No places found. Try different activities or location.",login:"Login",signup:"Sign Up",datesCreated:"Dates Created",happyCouples:"Happy Couples",premiumMembers:"Premium Members",citiesCovered:"Cities Covered",hours:"hours",hour:"hour",dateSaved:"Date saved!",itinerarySaved:"Complete itinerary saved!",alreadySaved:"Already saved!"},es:{flag:"\ud83c\uddea\ud83c\uddf8",name:"Espa\xf1ol",appName:"DateMaker",social:"Social",saved:"Guardado",profile:"Perfil",logout:"Cerrar Sesi\xf3n",back:"Atr\xe1s",freePlan:"Plan Gratis",premiumPlan:"Premium",heroTitle1:"Citas",heroTitle2:"Inolvidables",heroSubtitle:"Comienza Aqu\xed",heroDescription:"\xa1Obt\xe9n un itinerario completo con horarios personalizados: Cena \u2192 Bebidas \u2192 Entretenimiento. Planificaremos toda tu noche!",upgradeTitle:"Actualizar a Premium",upgradeDescription:"\xa1Desbloquea generaci\xf3n ilimitada de citas con itinerarios completos y horarios personalizados!",upgradeButton:"Actualizar Ahora",whenHowLong:"\xbfCu\xe1ndo y Por Cu\xe1nto Tiempo?",startTime:"Hora de Inicio",duration:"Duraci\xf3n",quickDate:"Cita R\xe1pida",fullEvening:"Noche Completa",allNight:"Toda la Noche",dateWillRun:"Tu cita ser\xe1 de",to:"a",location:"\xbfD\xf3nde est\xe1s ubicado?",locationPlaceholder:"ej., Madrid, Barcelona, Valencia",hobbies:"\xbfCu\xe1les son tus pasatiempos?",activities:"\xbfQu\xe9 actividades disfrutas?",addCustomActivity:"O agrega tu propia actividad:",customActivityPlaceholder:"ej., cata de vinos, clase de cer\xe1mica...",add:"Agregar",includeEvents:"Incluir pr\xf3ximos eventos, conciertos y festivales",whenLookingForEvents:"\xbfCu\xe1ndo buscas eventos?",anytime:"Cualquier Momento",today:"Hoy",thisWeek:"Esta Semana",thisMonth:"Este Mes",pickDate:"Elegir Fecha",selectDate:"Seleccionar fecha espec\xedfica:",generateDate:"Generar Mi Cita Perfecta",creating:"Creando Tu Itinerario Perfecto...",refresh:"Actualizar",loading:"Cargando...",saveItinerary:"Guardar Itinerario",save:"Guardar",share:"Compartir",remove:"Eliminar",directions:"Direcciones",website:"Sitio Web",tickets:"Entradas",message:"Mensaje",yourPerfectDate:"Tu Cita Perfecta",dateNightItinerary:"Tu Itinerario de Cita Nocturna",alternativeOptions:"Opciones Alternativas",alternativeDescription:"\xbfBuscas algo diferente? Aqu\xed hay m\xe1s excelentes opciones:",scenicWalk:"Paseo Esc\xe9nico",scenicWalkDesc:"Comienza con un hermoso paseo juntos",dinner:"Cena",dinnerDesc:"Comienza tu noche con una deliciosa comida",coffeeDate:"Cita de Caf\xe9",coffeeDateDesc:"Comienza con caf\xe9 y conversaci\xf3n",firstStop:"Primera Parada",firstStopDesc:"Comienza tu aventura",coffeeChat:"Caf\xe9 y Charla",coffeeChatDesc:"Rel\xe1jate con una gran conversaci\xf3n",cocktails:"C\xf3cteles y Bebidas",cocktailsDesc:"Disfruta de c\xf3cteles artesanales",secondStop:"Segunda Parada",secondStopDesc:"Contin\xfaa tu cita",liveMusic:"M\xfasica en Vivo",liveMusicDesc:"Experimenta m\xfasica en vivo juntos",comedyShow:"Show de Comedia",comedyShowDesc:"R\xedete toda la noche",theater:"Teatro",theaterDesc:"Ver un espect\xe1culo",cultural:"Experiencia Cultural",culturalDesc:"Explora arte y cultura",specialEvent:"Evento Especial",specialEventDesc:"Asiste a este emocionante evento",dancing:"Bailar",dancingDesc:"Ve a la pista de baile",karaoke:"Karaoke",karaokeDesc:"Canten con todo su coraz\xf3n",funGames:"Juegos Divertidos",funGamesDesc:"Desaf\xedense",eveningStroll:"Paseo Nocturno",eveningStrollDesc:"Termina con un hermoso paseo",nightCap:"Copa de la Noche",nightCapDesc:"Termina con bebidas",finalStop:"Parada Final",finalStopDesc:"Completa tu cita perfecta",additionalStop:"Parada Adicional",additionalStopDesc:"Otro gran lugar",mySavedDates:"Mis Citas Guardadas",noSavedDates:"A\xfan no hay citas guardadas",noSavedDatesDesc:"\xa1Comienza a generar citas y guarda tus favoritas!",findPerfectDate:"Encuentra Tu Cita Perfecta",myProfile:"Mi Perfil",accountInfo:"Informaci\xf3n de la Cuenta",email:"Correo Electr\xf3nico",plan:"Plan",changePassword:"Cambiar Contrase\xf1a",newPassword:"Nueva Contrase\xf1a",confirmPassword:"Confirmar Nueva Contrase\xf1a",updatePassword:"Actualizar Contrase\xf1a",uploadPhoto:"Subir Foto",subscription:"Suscripci\xf3n",premiumActive:"Plan Premium Activo",premiumDesc:"\xa1Disfruta de generaci\xf3n ilimitada de citas y todas las funciones premium!",cancelSubscription:"Cancelar Suscripci\xf3n",upgradeToPremium:"Actualizar a Premium",unlockPremium:"Desbloquear Funciones Premium",premiumFeatures:["Generaci\xf3n ilimitada de citas","Planificaci\xf3n completa de itinerarios","Horarios y duraci\xf3n personalizados","Guardar citas ilimitadas","Funciones sociales y mensajer\xeda","Compartir citas con amigos"],socialFeature:"\xa1Las funciones sociales son solo para miembros premium!",locationNotFound:"Ubicaci\xf3n no encontrada. Intenta agregar el pa\xeds.",noPlacesFound:"No se encontraron lugares. Prueba diferentes actividades o ubicaci\xf3n.",login:"Iniciar Sesi\xf3n",signup:"Registrarse",datesCreated:"Citas Creadas",happyCouples:"Parejas Felices",premiumMembers:"Miembros Premium",citiesCovered:"Ciudades Cubiertas",hours:"horas",hour:"hora",dateSaved:"\xa1Cita guardada!",itinerarySaved:"\xa1Itinerario completo guardado!",alreadySaved:"\xa1Ya guardado!"},fr:{flag:"\ud83c\uddeb\ud83c\uddf7",name:"Fran\xe7ais",appName:"DateMaker",social:"Social",saved:"Enregistr\xe9",profile:"Profil",logout:"D\xe9connexion",back:"Retour",freePlan:"Plan Gratuit",premiumPlan:"Premium",heroTitle1:"Rendez-vous",heroTitle2:"Inoubliables",heroSubtitle:"Commencez Ici",heroDescription:"Obtenez un itin\xe9raire complet avec horaires personnalis\xe9s : D\xeener \u2192 Boissons \u2192 Divertissement. Nous planifierons toute votre soir\xe9e !",upgradeTitle:"Passer \xe0 Premium",upgradeDescription:"D\xe9bloquez la g\xe9n\xe9ration illimit\xe9e de rendez-vous avec des itin\xe9raires complets et des horaires personnalis\xe9s !",upgradeButton:"Passer \xe0 Premium Maintenant",whenHowLong:"Quand et Combien de Temps ?",startTime:"Heure de D\xe9but",duration:"Dur\xe9e",quickDate:"Rendez-vous Rapide",fullEvening:"Soir\xe9e Compl\xe8te",allNight:"Toute la Nuit",dateWillRun:"Votre rendez-vous sera de",to:"\xe0",location:"O\xf9 \xeates-vous situ\xe9 ?",locationPlaceholder:"ex., Paris, Lyon, Marseille",hobbies:"Quels sont vos loisirs ?",activities:"Quelles activit\xe9s aimez-vous ?",addCustomActivity:"Ou ajoutez votre propre activit\xe9 :",customActivityPlaceholder:"ex., d\xe9gustation de vin, cours de poterie...",add:"Ajouter",includeEvents:"Inclure les \xe9v\xe9nements, concerts et festivals \xe0 venir",whenLookingForEvents:"Quand cherchez-vous des \xe9v\xe9nements ?",anytime:"N'importe Quand",today:"Aujourd'hui",thisWeek:"Cette Semaine",thisMonth:"Ce Mois-ci",pickDate:"Choisir une Date",selectDate:"S\xe9lectionner une date sp\xe9cifique :",generateDate:"G\xe9n\xe9rer Mon Rendez-vous Parfait",creating:"Cr\xe9ation de Votre Itin\xe9raire Parfait...",refresh:"Actualiser",loading:"Chargement...",saveItinerary:"Enregistrer l'Itin\xe9raire",save:"Enregistrer",share:"Partager",remove:"Supprimer",directions:"Directions",website:"Site Web",tickets:"Billets",message:"Message",yourPerfectDate:"Votre Rendez-vous Parfait",dateNightItinerary:"Votre Itin\xe9raire de Soir\xe9e",alternativeOptions:"Options Alternatives",alternativeDescription:"Vous cherchez quelque chose de diff\xe9rent ? Voici plus d'excellentes options :",scenicWalk:"Promenade Panoramique",scenicWalkDesc:"Commencez par une belle promenade ensemble",dinner:"D\xeener",dinnerDesc:"Commencez votre soir\xe9e avec un d\xe9licieux repas",coffeeDate:"Rendez-vous Caf\xe9",coffeeDateDesc:"Commencez avec un caf\xe9 et une conversation",firstStop:"Premier Arr\xeat",firstStopDesc:"Commencez votre aventure",coffeeChat:"Caf\xe9 et Discussion",coffeeChatDesc:"D\xe9tendez-vous avec une bonne conversation",cocktails:"Cocktails et Boissons",cocktailsDesc:"Profitez de cocktails artisanaux",secondStop:"Deuxi\xe8me Arr\xeat",secondStopDesc:"Continuez votre rendez-vous",liveMusic:"Musique Live",liveMusicDesc:"Vivez la musique live ensemble",comedyShow:"Spectacle Comique",comedyShowDesc:"Riez toute la nuit",theater:"Th\xe9\xe2tre",theaterDesc:"Assistez \xe0 un spectacle",cultural:"Exp\xe9rience Culturelle",culturalDesc:"Explorez l'art et la culture",specialEvent:"\xc9v\xe9nement Sp\xe9cial",specialEventDesc:"Assistez \xe0 cet \xe9v\xe9nement passionnant",dancing:"Danse",dancingDesc:"Allez sur la piste de danse",karaoke:"Karaok\xe9",karaokeDesc:"Chantez de tout votre c\u0153ur",funGames:"Jeux Amusants",funGamesDesc:"D\xe9fiez-vous",eveningStroll:"Promenade du Soir",eveningStrollDesc:"Terminez par une belle promenade",nightCap:"Dernier Verre",nightCapDesc:"Terminez avec des boissons",finalStop:"Arr\xeat Final",finalStopDesc:"Compl\xe9tez votre rendez-vous parfait",additionalStop:"Arr\xeat Suppl\xe9mentaire",additionalStopDesc:"Un autre excellent endroit",mySavedDates:"Mes Rendez-vous Enregistr\xe9s",noSavedDates:"Pas encore de rendez-vous enregistr\xe9s",noSavedDatesDesc:"Commencez \xe0 g\xe9n\xe9rer des rendez-vous et enregistrez vos favoris !",findPerfectDate:"Trouvez Votre Rendez-vous Parfait",myProfile:"Mon Profil",accountInfo:"Informations du Compte",email:"E-mail",plan:"Plan",changePassword:"Changer le Mot de Passe",newPassword:"Nouveau Mot de Passe",confirmPassword:"Confirmer le Nouveau Mot de Passe",updatePassword:"Mettre \xe0 Jour le Mot de Passe",uploadPhoto:"T\xe9l\xe9charger une Photo",subscription:"Abonnement",premiumActive:"Plan Premium Actif",premiumDesc:"Profitez de la g\xe9n\xe9ration illimit\xe9e de rendez-vous et de toutes les fonctionnalit\xe9s premium !",cancelSubscription:"Annuler l'Abonnement",upgradeToPremium:"Passer \xe0 Premium",unlockPremium:"D\xe9bloquer les Fonctionnalit\xe9s Premium",premiumFeatures:["G\xe9n\xe9ration illimit\xe9e de rendez-vous","Planification compl\xe8te d'itin\xe9raires","Horaires et dur\xe9e personnalis\xe9s","Enregistrer des rendez-vous illimit\xe9s","Fonctionnalit\xe9s sociales et messagerie","Partager des rendez-vous avec des amis"],socialFeature:"Les fonctionnalit\xe9s sociales sont r\xe9serv\xe9es aux membres premium !",locationNotFound:"Lieu non trouv\xe9. Essayez d'ajouter le pays.",noPlacesFound:"Aucun lieu trouv\xe9. Essayez diff\xe9rentes activit\xe9s ou un autre lieu.",login:"Connexion",signup:"S'inscrire",datesCreated:"Rendez-vous Cr\xe9\xe9s",happyCouples:"Couples Heureux",premiumMembers:"Membres Premium",citiesCovered:"Villes Couvertes",hours:"heures",hour:"heure",dateSaved:"Rendez-vous enregistr\xe9 !",itinerarySaved:"Itin\xe9raire complet enregistr\xe9 !",alreadySaved:"D\xe9j\xe0 enregistr\xe9 !"},de:{flag:"\ud83c\udde9\ud83c\uddea",name:"Deutsch",appName:"DateMaker",social:"Sozial",saved:"Gespeichert",profile:"Profil",logout:"Abmelden",back:"Zur\xfcck",freePlan:"Kostenloser Plan",premiumPlan:"Premium",heroTitle1:"Unvergessliche",heroTitle2:"Dates",heroSubtitle:"Hier Beginnen",heroDescription:"Erhalten Sie einen vollst\xe4ndigen Reiseplan mit individuellen Zeiten: Abendessen \u2192 Drinks \u2192 Unterhaltung. Wir planen Ihren ganzen Abend!",upgradeTitle:"Auf Premium Upgraden",upgradeDescription:"Schalten Sie unbegrenzte Date-Generierung mit vollst\xe4ndigen Reisepl\xe4nen und individuellen Zeiten frei!",upgradeButton:"Jetzt Upgraden",whenHowLong:"Wann und Wie Lange?",startTime:"Startzeit",duration:"Dauer",quickDate:"Schnelles Date",fullEvening:"Ganzer Abend",allNight:"Die Ganze Nacht",dateWillRun:"Ihr Date l\xe4uft von",to:"bis",location:"Wo befinden Sie sich?",locationPlaceholder:"z.B., Berlin, M\xfcnchen, Hamburg",hobbies:"Was sind Ihre Hobbys?",activities:"Welche Aktivit\xe4ten genie\xdfen Sie?",addCustomActivity:"Oder f\xfcgen Sie Ihre eigene Aktivit\xe4t hinzu:",customActivityPlaceholder:"z.B., Weinprobe, T\xf6pferkurs...",add:"Hinzuf\xfcgen",includeEvents:"Bevorstehende Veranstaltungen, Konzerte und Festivals einbeziehen",whenLookingForEvents:"Wann suchen Sie nach Veranstaltungen?",anytime:"Jederzeit",today:"Heute",thisWeek:"Diese Woche",thisMonth:"Diesen Monat",pickDate:"Datum W\xe4hlen",selectDate:"Bestimmtes Datum ausw\xe4hlen:",generateDate:"Mein Perfektes Date Generieren",creating:"Erstelle Ihren Perfekten Reiseplan...",refresh:"Aktualisieren",loading:"L\xe4dt...",saveItinerary:"Reiseplan Speichern",save:"Speichern",share:"Teilen",remove:"Entfernen",directions:"Wegbeschreibung",website:"Webseite",tickets:"Tickets",message:"Nachricht",yourPerfectDate:"Ihr Perfektes Date",dateNightItinerary:"Ihr Date-Abend Reiseplan",alternativeOptions:"Alternative Optionen",alternativeDescription:"Suchen Sie etwas anderes? Hier sind weitere gro\xdfartige Optionen:",mySavedDates:"Meine Gespeicherten Dates",noSavedDates:"Noch keine gespeicherten Dates",noSavedDatesDesc:"Beginnen Sie mit der Generierung von Dates und speichern Sie Ihre Favoriten!",findPerfectDate:"Finden Sie Ihr Perfektes Date",myProfile:"Mein Profil",accountInfo:"Kontoinformationen",email:"E-Mail",plan:"Plan",changePassword:"Passwort \xc4ndern",newPassword:"Neues Passwort",confirmPassword:"Neues Passwort Best\xe4tigen",updatePassword:"Passwort Aktualisieren",uploadPhoto:"Foto Hochladen",locationNotFound:"Standort nicht gefunden. Versuchen Sie, das Land hinzuzuf\xfcgen.",noPlacesFound:"Keine Orte gefunden. Probieren Sie andere Aktivit\xe4ten oder Standorte aus.",dateSaved:"Date gespeichert!",itinerarySaved:"Vollst\xe4ndiger Reiseplan gespeichert!",alreadySaved:"Bereits gespeichert!"},it:{flag:"\ud83c\uddee\ud83c\uddf9",name:"Italiano",appName:"DateMaker",social:"Sociale",saved:"Salvato",profile:"Profilo",logout:"Disconnetti",back:"Indietro",freePlan:"Piano Gratuito",premiumPlan:"Premium",heroTitle1:"Appuntamenti",heroTitle2:"Indimenticabili",heroSubtitle:"Inizia Qui",heroDescription:"Ottieni un itinerario completo con orari personalizzati: Cena \u2192 Drink \u2192 Intrattenimento. Pianificheremo tutta la tua serata!",upgradeTitle:"Passa a Premium",upgradeDescription:"Sblocca la generazione illimitata di appuntamenti con itinerari completi e orari personalizzati!",upgradeButton:"Passa a Premium Ora",location:"Dove ti trovi?",locationPlaceholder:"es., Roma, Milano, Napoli",hobbies:"Quali sono i tuoi hobby?",activities:"Quali attivit\xe0 ti piacciono?",generateDate:"Genera il Mio Appuntamento Perfetto",mySavedDates:"I Miei Appuntamenti Salvati",dateSaved:"Appuntamento salvato!"},pt:{flag:"\ud83c\uddf5\ud83c\uddf9",name:"Portugu\xeas",appName:"DateMaker",social:"Social",saved:"Guardado",profile:"Perfil",logout:"Sair",back:"Voltar",freePlan:"Plano Gr\xe1tis",premiumPlan:"Premium",heroTitle1:"Encontros",heroTitle2:"Inesquec\xedveis",heroSubtitle:"Comece Aqui",heroDescription:"Obtenha um itiner\xe1rio completo com hor\xe1rios personalizados: Jantar \u2192 Bebidas \u2192 Entretenimento. Planejamos sua noite inteira!",upgradeTitle:"Atualizar para Premium",upgradeDescription:"Desbloqueie gera\xe7\xe3o ilimitada de encontros com itiner\xe1rios completos e hor\xe1rios personalizados!",upgradeButton:"Atualizar Agora",location:"Onde voc\xea est\xe1 localizado?",locationPlaceholder:"ex., Lisboa, Porto, Faro",hobbies:"Quais s\xe3o seus hobbies?",activities:"Quais atividades voc\xea gosta?",generateDate:"Gerar Meu Encontro Perfeito",mySavedDates:"Meus Encontros Salvos",dateSaved:"Encontro salvo!"},ja:{flag:"\ud83c\uddef\ud83c\uddf5",name:"\u65e5\u672c\u8a9e",appName:"DateMaker",social:"\u30bd\u30fc\u30b7\u30e3\u30eb",saved:"\u4fdd\u5b58\u6e08\u307f",profile:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb",logout:"\u30ed\u30b0\u30a2\u30a6\u30c8",back:"\u623b\u308b",freePlan:"\u7121\u6599\u30d7\u30e9\u30f3",premiumPlan:"\u30d7\u30ec\u30df\u30a2\u30e0",heroTitle1:"\u5fd8\u308c\u3089\u308c\u306a\u3044",heroTitle2:"\u30c7\u30fc\u30c8",heroSubtitle:"\u3053\u3053\u304b\u3089\u59cb\u3081\u308b",heroDescription:"\u30ab\u30b9\u30bf\u30e0\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b8c\u5168\u306a\u65c5\u7a0b\u3092\u53d6\u5f97\uff1a\u30c7\u30a3\u30ca\u30fc \u2192 \u30c9\u30ea\u30f3\u30af \u2192 \u30a8\u30f3\u30bf\u30fc\u30c6\u30a4\u30e1\u30f3\u30c8\u3002\u3042\u306a\u305f\u306e\u591c\u5168\u4f53\u3092\u8a08\u753b\u3057\u307e\u3059\uff01",location:"\u3069\u3053\u306b\u3044\u307e\u3059\u304b\uff1f",locationPlaceholder:"\u4f8b\uff1a\u6771\u4eac\u3001\u5927\u962a\u3001\u4eac\u90fd",hobbies:"\u3042\u306a\u305f\u306e\u8da3\u5473\u306f\u4f55\u3067\u3059\u304b\uff1f",activities:"\u3069\u3093\u306a\u6d3b\u52d5\u304c\u597d\u304d\u3067\u3059\u304b\uff1f",generateDate:"\u5b8c\u74a7\u306a\u30c7\u30fc\u30c8\u3092\u751f\u6210",mySavedDates:"\u4fdd\u5b58\u3055\u308c\u305f\u30c7\u30fc\u30c8",dateSaved:"\u30c7\u30fc\u30c8\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\uff01"},zh:{flag:"\ud83c\udde8\ud83c\uddf3",name:"\u4e2d\u6587",appName:"DateMaker",social:"\u793e\u4ea4",saved:"\u5df2\u4fdd\u5b58",profile:"\u4e2a\u4eba\u8d44\u6599",logout:"\u767b\u51fa",back:"\u8fd4\u56de",freePlan:"\u514d\u8d39\u8ba1\u5212",premiumPlan:"\u9ad8\u7ea7\u4f1a\u5458",heroTitle1:"\u96be\u5fd8\u7684",heroTitle2:"\u7ea6\u4f1a",heroSubtitle:"\u4ece\u8fd9\u91cc\u5f00\u59cb",heroDescription:"\u83b7\u53d6\u5b8c\u6574\u7684\u884c\u7a0b\u548c\u81ea\u5b9a\u4e49\u65f6\u95f4\uff1a\u665a\u9910 \u2192 \u996e\u54c1 \u2192 \u5a31\u4e50\u3002\u6211\u4eec\u5c06\u8ba1\u5212\u60a8\u7684\u6574\u4e2a\u591c\u665a\uff01",location:"\u60a8\u5728\u54ea\u91cc\uff1f",locationPlaceholder:"\u4f8b\u5982\uff1a\u5317\u4eac\u3001\u4e0a\u6d77\u3001\u6df1\u5733",hobbies:"\u4f60\u7684\u7231\u597d\u662f\u4ec0\u4e48\uff1f",activities:"\u4f60\u559c\u6b22\u4ec0\u4e48\u6d3b\u52a8\uff1f",generateDate:"\u751f\u6210\u6211\u7684\u5b8c\u7f8e\u7ea6\u4f1a",mySavedDates:"\u6211\u4fdd\u5b58\u7684\u7ea6\u4f1a",dateSaved:"\u7ea6\u4f1a\u5df2\u4fdd\u5b58\uff01"},ar:{flag:"\ud83c\uddf8\ud83c\udde6",name:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",dir:"rtl",appName:"DateMaker",social:"\u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a",saved:"\u0627\u0644\u0645\u062d\u0641\u0648\u0638\u0629",profile:"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a",logout:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",back:"\u0631\u062c\u0648\u0639",freePlan:"\u062e\u0637\u0629 \u0645\u062c\u0627\u0646\u064a\u0629",premiumPlan:"\u0628\u0631\u064a\u0645\u064a\u0648\u0645",heroTitle1:"\u0645\u0648\u0627\u0639\u064a\u062f",heroTitle2:"\u0644\u0627 \u062a\u064f\u0646\u0633\u0649",heroSubtitle:"\u0627\u0628\u062f\u0623 \u0645\u0646 \u0647\u0646\u0627",heroDescription:"\u0627\u062d\u0635\u0644 \u0639\u0644\u0649 \u0645\u0633\u0627\u0631 \u0643\u0627\u0645\u0644 \u0645\u0639 \u062a\u0648\u0642\u064a\u062a \u0645\u062e\u0635\u0635: \u0639\u0634\u0627\u0621 \u2190 \u0645\u0634\u0631\u0648\u0628\u0627\u062a \u2190 \u062a\u0631\u0641\u064a\u0647. \u0633\u0646\u062e\u0637\u0637 \u0644\u0644\u064a\u0644\u062a\u0643 \u0628\u0623\u0643\u0645\u0644\u0647\u0627!",location:"\u0623\u064a\u0646 \u0645\u0648\u0642\u0639\u0643\u061f",locationPlaceholder:"\u0645\u062b\u0627\u0644: \u062f\u0628\u064a\u060c \u0627\u0644\u0631\u064a\u0627\u0636\u060c \u0627\u0644\u0642\u0627\u0647\u0631\u0629",hobbies:"\u0645\u0627 \u0647\u064a \u0647\u0648\u0627\u064a\u0627\u062a\u0643\u061f",activities:"\u0645\u0627 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u062a\u064a \u062a\u0633\u062a\u0645\u062a\u0639 \u0628\u0647\u0627\u061f",generateDate:"\u0625\u0646\u0634\u0627\u0621 \u0645\u0648\u0639\u062f\u064a \u0627\u0644\u0645\u062b\u0627\u0644\u064a",mySavedDates:"\u0645\u0648\u0627\u0639\u064a\u062f\u064a \u0627\u0644\u0645\u062d\u0641\u0648\u0638\u0629",dateSaved:"\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0645\u0648\u0639\u062f!"},ru:{flag:"\ud83c\uddf7\ud83c\uddfa",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",appName:"DateMaker",social:"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435",saved:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",logout:"\u0412\u044b\u0439\u0442\u0438",back:"\u041d\u0430\u0437\u0430\u0434",freePlan:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u041f\u043b\u0430\u043d",premiumPlan:"\u041f\u0440\u0435\u043c\u0438\u0443\u043c",heroTitle1:"\u041d\u0435\u0437\u0430\u0431\u044b\u0432\u0430\u0435\u043c\u044b\u0435",heroTitle2:"\u0421\u0432\u0438\u0434\u0430\u043d\u0438\u044f",heroSubtitle:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0417\u0434\u0435\u0441\u044c",heroDescription:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u044b\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0441 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c: \u0423\u0436\u0438\u043d \u2192 \u041d\u0430\u043f\u0438\u0442\u043a\u0438 \u2192 \u0420\u0430\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f. \u041c\u044b \u0441\u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u043c \u0432\u0435\u0441\u044c \u0432\u0430\u0448 \u0432\u0435\u0447\u0435\u0440!",location:"\u0413\u0434\u0435 \u0432\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c?",locationPlaceholder:"\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u041c\u043e\u0441\u043a\u0432\u0430, \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433, \u041a\u0430\u0437\u0430\u043d\u044c",hobbies:"\u041a\u0430\u043a\u0438\u0435 \u0443 \u0432\u0430\u0441 \u0445\u043e\u0431\u0431\u0438?",activities:"\u041a\u0430\u043a\u0438\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u044f \u0432\u0430\u043c \u043d\u0440\u0430\u0432\u044f\u0442\u0441\u044f?",generateDate:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041c\u043e\u0435 \u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e\u0435 \u0421\u0432\u0438\u0434\u0430\u043d\u0438\u0435",mySavedDates:"\u041c\u043e\u0438 \u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0421\u0432\u0438\u0434\u0430\u043d\u0438\u044f",dateSaved:"\u0421\u0432\u0438\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e!"},nl:{flag:"\ud83c\uddf3\ud83c\uddf1",name:"Nederlands",appName:"DateMaker",social:"Sociaal",saved:"Opgeslagen",profile:"Profiel",logout:"Uitloggen",back:"Terug",freePlan:"Gratis Plan",premiumPlan:"Premium",heroTitle1:"Onvergetelijke",heroTitle2:"Dates",heroSubtitle:"Begin Hier",heroDescription:"Krijg een compleet reisschema met aangepaste tijden: Diner \u2192 Drankjes \u2192 Entertainment. We plannen je hele avond!",location:"Waar bevind je je?",locationPlaceholder:"bijv., Amsterdam, Rotterdam, Utrecht",hobbies:"Wat zijn je hobby's?",activities:"Welke activiteiten vind je leuk?",generateDate:"Genereer Mijn Perfecte Date",mySavedDates:"Mijn Opgeslagen Dates",dateSaved:"Date opgeslagen!"},sv:{flag:"\ud83c\uddf8\ud83c\uddea",name:"Svenska",appName:"DateMaker",social:"Socialt",saved:"Sparade",profile:"Profil",logout:"Logga Ut",back:"Tillbaka",freePlan:"Gratis Plan",premiumPlan:"Premium",heroTitle1:"Of\xf6rgl\xf6mliga",heroTitle2:"Dejter",heroSubtitle:"B\xf6rja H\xe4r",heroDescription:"F\xe5 en komplett resplan med anpassade tider: Middag \u2192 Drinkar \u2192 Underh\xe5llning. Vi planerar hela din kv\xe4ll!",location:"Var befinner du dig?",locationPlaceholder:"t.ex., Stockholm, G\xf6teborg, Malm\xf6",hobbies:"Vilka \xe4r dina hobbyer?",activities:"Vilka aktiviteter gillar du?",generateDate:"Skapa Min Perfekta Dejt",mySavedDates:"Mina Sparade Dejter",dateSaved:"Dejt sparad!"},pl:{flag:"\ud83c\uddf5\ud83c\uddf1",name:"Polski",appName:"DateMaker",social:"Spo\u0142eczno\u015b\u0107",saved:"Zapisane",profile:"Profil",logout:"Wyloguj",back:"Wstecz",freePlan:"Darmowy Plan",premiumPlan:"Premium",heroTitle1:"Niezapomniane",heroTitle2:"Randki",heroSubtitle:"Zacznij Tutaj",heroDescription:"Uzyskaj pe\u0142en plan z niestandardowymi godzinami: Kolacja \u2192 Drinki \u2192 Rozrywka. Zaplanujemy ca\u0142y tw\xf3j wiecz\xf3r!",location:"Gdzie si\u0119 znajdujesz?",locationPlaceholder:"np., Warszawa, Krak\xf3w, Wroc\u0142aw",hobbies:"Jakie s\u0105 twoje hobby?",activities:"Jakie aktywno\u015bci lubisz?",generateDate:"Wygeneruj Moj\u0105 Idealn\u0105 Randk\u0119",mySavedDates:"Moje Zapisane Randki",dateSaved:"Randka zapisana!"},tr:{flag:"\ud83c\uddf9\ud83c\uddf7",name:"T\xfcrk\xe7e",appName:"DateMaker",social:"Sosyal",saved:"Kaydedildi",profile:"Profil",logout:"\xc7\u0131k\u0131\u015f",back:"Geri",freePlan:"\xdccretsiz Plan",premiumPlan:"Premium",heroTitle1:"Unutulmaz",heroTitle2:"Randevular",heroSubtitle:"Buradan Ba\u015fla",heroDescription:"\xd6zel zamanlamayla tam bir g\xfczergah al\u0131n: Ak\u015fam Yeme\u011fi \u2192 \u0130\xe7kiler \u2192 E\u011flence. T\xfcm gecenizi planlayaca\u011f\u0131z!",location:"Neredesiniz?",locationPlaceholder:"\xf6rn., \u0130stanbul, Ankara, \u0130zmir",hobbies:"Hobileriniz neler?",activities:"Hangi aktivitelerden ho\u015flan\u0131rs\u0131n\u0131z?",generateDate:"M\xfckemmel Randevumu Olu\u015ftur",mySavedDates:"Kay\u0131tl\u0131 Randevular\u0131m",dateSaved:"Randevu kaydedildi!"},ko:{flag:"\ud83c\uddf0\ud83c\uddf7",name:"\ud55c\uad6d\uc5b4",appName:"DateMaker",social:"\uc18c\uc15c",saved:"\uc800\uc7a5\ub428",profile:"\ud504\ub85c\ud544",logout:"\ub85c\uadf8\uc544\uc6c3",back:"\ub4a4\ub85c",freePlan:"\ubb34\ub8cc \ud50c\ub79c",premiumPlan:"\ud504\ub9ac\ubbf8\uc5c4",heroTitle1:"\uc78a\uc744 \uc218 \uc5c6\ub294",heroTitle2:"\ub370\uc774\ud2b8",heroSubtitle:"\uc5ec\uae30\uc11c \uc2dc\uc791",heroDescription:"\ub9de\ucda4 \uc2dc\uac04\uc73c\ub85c \uc644\uc804\ud55c \uc77c\uc815\uc744 \ubc1b\uc544\ubcf4\uc138\uc694: \uc800\ub141\uc2dd\uc0ac \u2192 \uc74c\ub8cc \u2192 \uc5d4\ud130\ud14c\uc778\uba3c\ud2b8. \ub2f9\uc2e0\uc758 \ubc24 \uc804\uccb4\ub97c \uacc4\ud68d\ud574\ub4dc\ub9bd\ub2c8\ub2e4!",location:"\uc5b4\ub514\uc5d0 \uacc4\uc2e0\uac00\uc694?",locationPlaceholder:"\uc608: \uc11c\uc6b8, \ubd80\uc0b0, \uc81c\uc8fc",hobbies:"\ucde8\ubbf8\uac00 \ubb34\uc5c7\uc778\uac00\uc694?",activities:"\uc5b4\ub5a4 \ud65c\ub3d9\uc744 \uc990\uae30\uc2dc\ub098\uc694?",generateDate:"\uc644\ubcbd\ud55c \ub370\uc774\ud2b8 \uc0dd\uc131",mySavedDates:"\uc800\uc7a5\ub41c \ub370\uc774\ud2b8",dateSaved:"\ub370\uc774\ud2b8\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"},hi:{flag:"\ud83c\uddee\ud83c\uddf3",name:"\u0939\u093f\u0928\u094d\u0926\u0940",appName:"DateMaker",social:"\u0938\u093e\u092e\u093e\u091c\u093f\u0915",saved:"\u0938\u0939\u0947\u091c\u093e \u0917\u092f\u093e",profile:"\u092a\u094d\u0930\u094b\u092b\u093c\u093e\u0907\u0932",logout:"\u0932\u0949\u0917 \u0906\u0909\u091f",back:"\u0935\u093e\u092a\u0938",freePlan:"\u092e\u0941\u092b\u094d\u0924 \u092f\u094b\u091c\u0928\u093e",premiumPlan:"\u092a\u094d\u0930\u0940\u092e\u093f\u092f\u092e",heroTitle1:"\u0905\u0935\u093f\u0938\u094d\u092e\u0930\u0923\u0940\u092f",heroTitle2:"\u0921\u0947\u091f\u094d\u0938",heroSubtitle:"\u092f\u0939\u093e\u0901 \u0938\u0947 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902",heroDescription:"\u0915\u0938\u094d\u091f\u092e \u0938\u092e\u092f \u0915\u0947 \u0938\u093e\u0925 \u092a\u0942\u0930\u094d\u0923 \u092f\u093e\u0924\u094d\u0930\u093e \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0930\u092e \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0947\u0902: \u0930\u093e\u0924 \u0915\u093e \u0916\u093e\u0928\u093e \u2192 \u0921\u094d\u0930\u093f\u0902\u0915\u094d\u0938 \u2192 \u092e\u0928\u094b\u0930\u0902\u091c\u0928\u0964 \u0939\u092e \u0906\u092a\u0915\u0940 \u092a\u0942\u0930\u0940 \u0930\u093e\u0924 \u0915\u0940 \u092f\u094b\u091c\u0928\u093e \u092c\u0928\u093e\u090f\u0902\u0917\u0947!",location:"\u0906\u092a \u0915\u0939\u093e\u0901 \u0938\u094d\u0925\u093f\u0924 \u0939\u0948\u0902?",locationPlaceholder:"\u0909\u0926\u093e., \u092e\u0941\u0902\u092c\u0908, \u0926\u093f\u0932\u094d\u0932\u0940, \u092c\u0948\u0902\u0917\u0932\u094b\u0930",hobbies:"\u0906\u092a\u0915\u0947 \u0936\u094c\u0915 \u0915\u094d\u092f\u093e \u0939\u0948\u0902?",activities:"\u0906\u092a \u0915\u094c\u0928 \u0938\u0940 \u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u093e \u0906\u0928\u0902\u0926 \u0932\u0947\u0924\u0947 \u0939\u0948\u0902?",generateDate:"\u092e\u0947\u0930\u093e \u092a\u0930\u092b\u0947\u0915\u094d\u091f \u0921\u0947\u091f \u092c\u0928\u093e\u090f\u0902",mySavedDates:"\u092e\u0947\u0930\u0940 \u0938\u0939\u0947\u091c\u0940 \u0917\u0908 \u0921\u0947\u091f\u094d\u0938",dateSaved:"\u0921\u0947\u091f \u0938\u0939\u0947\u091c\u0940 \u0917\u0908!"}};function Eb(e){let{currentLanguage:t,onLanguageChange:n}=e;const[r,o]=(0,i.useState)(!1),s=(0,i.useRef)(null),a=Object.keys(kb).map(e=>({code:e,flag:kb[e].flag,name:kb[e].name}));(0,i.useEffect)(()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const l=a.find(e=>e.code===t);return(0,_v.jsxs)("div",{ref:s,style:{position:"relative"},children:[(0,_v.jsxs)("button",{onClick:()=>o(!r),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"white",border:"2px solid #e5e7eb",borderRadius:"9999px",cursor:"pointer",fontWeight:"600",fontSize:"1rem",transition:"all 0.2s ease",boxShadow:r?"0 4px 12px rgba(0,0,0,0.1)":"none"},children:[(0,_v.jsx)("span",{style:{fontSize:"1.5rem"},children:null===l||void 0===l?void 0:l.flag}),(0,_v.jsx)("span",{style:{color:"#374151"},children:null===l||void 0===l?void 0:l.name}),(0,_v.jsx)(ib,{size:16,style:{color:"#6b7280"}})]}),r&&(0,_v.jsx)("div",{style:{position:"absolute",top:"calc(100% + 0.5rem)",right:0,background:"white",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)",padding:"0.5rem",minWidth:"200px",maxHeight:"400px",overflowY:"auto",zIndex:99999,animation:"fadeIn 0.2s ease-out"},children:a.map(e=>(0,_v.jsxs)("button",{onClick:()=>{n(e.code),o(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:t===e.code?"#fce7f3":"transparent",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"1rem",fontWeight:t===e.code?"600":"400",color:"#374151",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:n=>{t!==e.code&&(n.target.style.background="#f3f4f6")},onMouseLeave:n=>{t!==e.code&&(n.target.style.background="transparent")},children:[(0,_v.jsx)("span",{style:{fontSize:"1.5rem"},children:e.flag}),(0,_v.jsx)("span",{children:e.name}),t===e.code&&(0,_v.jsx)("span",{style:{marginLeft:"auto",color:"#ec4899"},children:"\u2713"})]},e.code))}),(0,_v.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      "})]})}const Cb=[{level:1,name:"First Timers",minXP:0,maxXP:500,color:"#94a3b8",icon:"\ud83c\udf31"},{level:2,name:"Date Rookies",minXP:500,maxXP:1500,color:"#60a5fa",icon:"\u2b50"},{level:3,name:"Romance Enthusiasts",minXP:1500,maxXP:3500,color:"#a78bfa",icon:"\ud83d\udcab"},{level:4,name:"Adventure Seekers",minXP:3500,maxXP:7e3,color:"#f472b6",icon:"\ud83d\ude80"},{level:5,name:"Relationship Masters",minXP:7e3,maxXP:12e3,color:"#fb923c",icon:"\ud83d\udc51"},{level:6,name:"Legendary Lovers",minXP:12e3,maxXP:2e4,color:"#FFD700",icon:"\ud83d\udc8e"},{level:7,name:"Date Master",minXP:2e4,maxXP:999999,color:"#FF1493",icon:"\ud83e\udee1"}],_b=10,Tb=20,Ib=50,jb=25,Rb=e=>{for(let t=Cb.length-1;t>=0;t--)if(e>=Cb[t].minXP)return Cb[t];return Cb[0]},Ab=e=>{const t=Rb(e),n=Cb.find(e=>e.level===t.level+1);if(!n)return{percentage:100,pointsNeeded:0,currentLevelXP:e};const r=e-t.minXP,i=n.minXP-t.minXP;return{percentage:r/i*100,pointsNeeded:n.minXP-e,currentLevelXP:r,totalNeeded:i}},Pb=e=>e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString(),Db={food:[{id:"food_1",text:"\ud83c\udf7d\ufe0f Order something you can't pronounce",points:20,type:"dare"},{id:"food_2",text:"\ud83c\udf36\ufe0f Try the spiciest item on the menu",points:25,type:"dare"},{id:"food_3",text:"\ud83d\udc68\u200d\ud83c\udf73 Ask the chef for their secret favorite dish",points:20,type:"social"},{id:"food_4",text:"\ud83e\udd62 Eat with only chopsticks (if you don't normally)",points:20,type:"challenge"},{id:"food_5",text:"\ud83d\udcf1 No phones during the meal (30 min)",points:30,type:"challenge"},{id:"food_6",text:'\ud83c\udfb2 Order a "mystery dish" - let your date choose',points:25,type:"trust"},{id:"food_7",text:"\ud83c\udf70 Share a dessert without using hands",points:30,type:"dare"},{id:"food_8",text:"\ud83e\udd57 Try a dish you've never had before",points:25,type:"adventure"},{id:"food_9",text:"\ud83d\udcf8 Take a creative food photo for Instagram",points:15,type:"photo"},{id:"food_10",text:"\ud83d\udde3\ufe0f Compliment the chef personally",points:20,type:"social"}],drinks:[{id:"drink_1",text:"\ud83c\udf79 Create a custom cocktail with the bartender",points:25,type:"creative"},{id:"drink_2",text:"\ud83c\udfa4 Make up a story about someone else at the bar",points:20,type:"creative"},{id:"drink_3",text:"\ud83e\udd43 Try a drink you've never had",points:20,type:"adventure"},{id:"drink_4",text:"\ud83c\udfb2 Blind taste test - guess the ingredients",points:25,type:"challenge"},{id:"drink_5",text:"\ud83d\udcf8 Toast selfie with permission from strangers",points:30,type:"dare"},{id:"drink_6",text:"\ud83d\udc83 Dance for 30 seconds when your song plays",points:25,type:"dare"},{id:"drink_7",text:"\ud83c\udf78 Order the bartender's special recommendation",points:20,type:"trust"},{id:"drink_8",text:"\ud83c\udfaf Play a bar game together (darts, pool, etc)",points:20,type:"challenge"},{id:"drink_9",text:"\ud83c\udf1f Name your own cocktail and describe it",points:20,type:"creative"},{id:"drink_10",text:"\ud83e\udd42 Make a toast to something unexpected",points:15,type:"creative"}],entertainment:[{id:"ent_1",text:"\ud83c\udfb5 Request a dedication song",points:20,type:"romantic"},{id:"ent_2",text:"\ud83d\ude02 Don't laugh challenge for 5 minutes",points:25,type:"challenge"},{id:"ent_3",text:"\ud83c\udfad Predict the ending before it happens",points:20,type:"challenge"},{id:"ent_4",text:"\ud83c\udfa8 Find art that represents your relationship",points:25,type:"romantic"},{id:"ent_5",text:"\ud83d\udcf8 Recreate a famous pose or scene",points:20,type:"photo"},{id:"ent_6",text:"\ud83c\udfaa Reenact a scene from the show afterwards",points:30,type:"dare"},{id:"ent_7",text:"\ud83c\udf1f Give a standing ovation",points:15,type:"social"},{id:"ent_8",text:"\ud83c\udfac Discuss what you'd change about the performance",points:15,type:"conversation"},{id:"ent_9",text:"\ud83d\udcdd Write a mini review together",points:20,type:"creative"},{id:"ent_10",text:"\ud83c\udfa4 Sing along if it's a musical",points:25,type:"dare"}],activity:[{id:"act_1",text:"\ud83d\udc83 Learn a new dance move together",points:25,type:"challenge"},{id:"act_2",text:"\ud83c\udfa4 Duet on a song neither of you know",points:30,type:"dare"},{id:"act_3",text:"\ud83c\udfaf Loser buys next round",points:20,type:"challenge"},{id:"act_4",text:"\ud83e\udde9 Complete it without hints",points:25,type:"challenge"},{id:"act_5",text:"\ud83c\udfc6 Make it competitive and see who wins",points:20,type:"challenge"},{id:"act_6",text:"\ud83d\udcf8 Get an action shot mid-activity",points:15,type:"photo"},{id:"act_7",text:"\ud83c\udfa8 Create something together in 15 minutes",points:25,type:"creative"},{id:"act_8",text:"\ud83c\udfaa Try the hardest difficulty level",points:30,type:"dare"},{id:"act_9",text:"\ud83e\udd1d Work as a perfect team",points:25,type:"teamwork"},{id:"act_10",text:"\ud83c\udf1f Set a personal record",points:30,type:"challenge"}],outdoor:[{id:"out_1",text:"\ud83c\udf33 Find the oldest or most unique tree",points:20,type:"adventure"},{id:"out_2",text:"\ud83e\udd8b Spot 3 different animals or birds",points:25,type:"challenge"},{id:"out_3",text:"\ud83d\udcf8 Take the most creative nature photo",points:20,type:"photo"},{id:"out_4",text:'\ud83d\uddfa\ufe0f Find a "secret spot" locals know',points:30,type:"adventure"},{id:"out_5",text:"\ud83c\udf05 Watch sunset/sunrise together",points:25,type:"romantic"},{id:"out_6",text:"\ud83c\udfc3 Walk backwards for 50 steps (safely!)",points:20,type:"dare"},{id:"out_7",text:"\ud83c\udf43 Collect interesting leaves or stones",points:15,type:"adventure"},{id:"out_8",text:"\ud83c\udfaf Have a mini photoshoot in nature",points:20,type:"photo"},{id:"out_9",text:"\ud83e\uddd8 Do a 5-minute meditation together",points:20,type:"mindful"},{id:"out_10",text:"\ud83c\udf38 Find the prettiest flower or view",points:15,type:"adventure"}],cafe:[{id:"cafe_1",text:"\u2615 Try a new coffee blend you've never had",points:20,type:"adventure"},{id:"cafe_2",text:"\ud83c\udf70 Share a pastry - no hands allowed",points:25,type:"dare"},{id:"cafe_3",text:"\ud83d\udcdd Write each other notes on napkins",points:20,type:"romantic"},{id:"cafe_4",text:"\ud83c\udfa8 Draw portraits of each other",points:25,type:"creative"},{id:"cafe_5",text:"\ud83d\udcda Read aloud to each other",points:20,type:"romantic"},{id:"cafe_6",text:"\ud83c\udfb2 Play a quick word game",points:15,type:"challenge"},{id:"cafe_7",text:"\ud83d\udcad Share your biggest dream",points:25,type:"deep"},{id:"cafe_8",text:"\ud83d\udcf8 Latte art photo competition",points:15,type:"photo"},{id:"cafe_9",text:"\ud83c\udf1f Compliment a stranger's order choice",points:20,type:"social"},{id:"cafe_10",text:"\u2615 Guess each other's favorite coffee order",points:20,type:"challenge"}],universal:[{id:"uni_1",text:"\ud83d\udcac Ask each other a deep question",points:25,type:"conversation"},{id:"uni_2",text:"\ud83c\udf81 Buy something small for each other (under $5)",points:20,type:"romantic"},{id:"uni_3",text:"\ud83d\udc4b Compliment a stranger",points:20,type:"social"},{id:"uni_4",text:"\ud83d\udcdd Leave a nice note for the next person",points:15,type:"kindness"},{id:"uni_5",text:"\ud83c\udfad Speak in accents for 10 minutes",points:25,type:"dare"},{id:"uni_6",text:'\ud83e\udd1d No saying "no" for the next hour',points:30,type:"dare"},{id:"uni_7",text:"\ud83d\udcf8 Take a silly selfie together",points:15,type:"photo"},{id:"uni_8",text:"\ud83c\udfb5 Share your favorite song and why",points:20,type:"conversation"},{id:"uni_9",text:"\ud83c\udf1f Tell each other something you admire",points:25,type:"romantic"},{id:"uni_10",text:"\ud83c\udfb2 Play rock-paper-scissors - best of 5",points:10,type:"challenge"}]},Nb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return[...Db[e]||Db.universal].sort(()=>.5-Math.random()).slice(0,t)},zb=Le("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),Lb=Le("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Mb=Le("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Ob=Le("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Fb=e=>{var t;let{gameStats:n,onClose:r}=e;if((0,i.useEffect)(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0},[]),!n)return null;const o=[{label:"Dates Completed",value:n.datesCompleted||0,icon:(0,_v.jsx)(zb,{size:24}),color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",bgColor:"#f0f4ff"},{label:"Challenges Won",value:n.challengesCompleted||0,icon:(0,_v.jsx)(Lb,{size:24}),color:"linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%)",bgColor:"#fff4f0"},{label:"Places Visited",value:n.placesVisited||0,icon:(0,_v.jsx)(Ue,{size:24}),color:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",bgColor:"#f0fbff"},{label:"Dates Shared",value:n.datesShared||0,icon:(0,_v.jsx)(Nv,{size:24}),color:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",bgColor:"#fff9f0"},{label:"Current Streak",value:"".concat(n.currentStreak||0," days"),icon:(0,_v.jsx)(Mb,{size:24}),color:"linear-gradient(135deg, #FF0033 0%, #FF6B35 100%)",bgColor:"#fff0f0"},{label:"Longest Streak",value:"".concat(n.longestStreak||0," days"),icon:(0,_v.jsx)(Dv,{size:24}),color:"linear-gradient(135deg, #9D4EDD 0%, #C77DFF 100%)",bgColor:"#faf0ff"},{label:"Total XP",value:n.xp||0,icon:(0,_v.jsx)(Fe,{size:24}),color:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",bgColor:"#fffbf0"},{label:"Achievements",value:(null===(t=n.achievements)||void 0===t?void 0:t.length)||0,icon:(0,_v.jsx)(Ob,{size:24}),color:"linear-gradient(135deg, #06D6A0 0%, #1B9AAA 100%)",bgColor:"#f0fff9"}],s=n.venueStats||{food:0,drinks:0,entertainment:0,outdoor:0,activity:0};return(0,_v.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)",paddingTop:"env(safe-area-inset-top)",position:"relative",overflow:"hidden"},children:[(0,_v.jsxs)("div",{style:{padding:"2rem"},children:[(0,_v.jsx)("div",{style:{position:"absolute",top:"10%",left:"5%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%)",borderRadius:"50%",animation:"float 6s ease-in-out infinite"}}),(0,_v.jsx)("div",{style:{position:"absolute",bottom:"10%",right:"5%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%)",borderRadius:"50%",animation:"float 8s ease-in-out infinite reverse"}}),(0,_v.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",position:"relative",zIndex:1},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3rem"},children:[(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"900",color:"white",marginBottom:"0.5rem",textShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"\ud83d\udcca Your Stats Dashboard"}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",color:"rgba(255,255,255,0.9)",fontWeight:"500"},children:"Track your dating journey"})]}),(0,_v.jsx)("button",{onClick:r,style:{background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"2px solid rgba(255,255,255,0.3)",color:"white",padding:"0.75rem 2rem",borderRadius:"50px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:"\u2190 Back"})]}),(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:o.map((e,t)=>(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2rem",boxShadow:"0 10px 30px rgba(0,0,0,0.15)",position:"relative",overflow:"hidden",animation:"slideIn 0.5s ease-out ".concat(.1*t,"s both")},children:[(0,_v.jsx)("div",{style:{position:"absolute",top:0,right:0,width:"120px",height:"120px",background:e.bgColor,borderRadius:"0 24px 0 100%",opacity:.6}}),(0,_v.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,_v.jsx)("div",{style:{width:"60px",height:"60px",background:e.color,borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.icon}),(0,_v.jsx)("h3",{style:{fontSize:"0.95rem",color:"#6b7280",fontWeight:"600",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:e.label}),(0,_v.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:"900",background:e.color,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:e.value})]})]},t))}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"32px",padding:"3rem",boxShadow:"0 20px 40px rgba(0,0,0,0.15)"},children:[(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"900",marginBottom:"2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"\ud83c\udfaf Your Favorite Activities"}),(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[{label:"\ud83c\udf7d\ufe0f Food Venues",value:s.food||0,color:"#FF6B35"},{label:"\ud83c\udf78 Drink Spots",value:s.drinks||0,color:"#9D4EDD"},{label:"\ud83c\udfad Entertainment",value:s.entertainment||0,color:"#667eea"},{label:"\ud83c\udf33 Outdoor",value:s.outdoor||0,color:"#06D6A0"},{label:"\ud83c\udfaf Activities",value:s.activity||0,color:"#4facfe"}].map((e,t)=>(0,_v.jsxs)("div",{style:{padding:"1.5rem",background:"".concat(e.color,"15"),borderRadius:"16px",border:"2px solid ".concat(e.color,"40"),textAlign:"center"},children:[(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem",fontWeight:"600"},children:e.label}),(0,_v.jsx)("p",{style:{fontSize:"2rem",fontWeight:"900",color:e.color,margin:0},children:e.value})]},t))})]})]})]}),(0,_v.jsx)("style",{children:"\n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-20px); }\n        }\n        \n        @keyframes slideIn {\n          from {\n            opacity: 0;\n            transform: translateY(30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      "})]})},Ub={starter:[{id:"first_quest",name:"First Quest Complete",description:"Complete your first date",icon:"\ud83c\udfaf",requirement:{type:"datesCompleted",value:1},points:50,rarity:"common"},{id:"conversation_master",name:"Conversation Master",description:"Complete 5 conversation challenges",icon:"\ud83d\udde3\ufe0f",requirement:{type:"conversationChallenges",value:5},points:50,rarity:"common"},{id:"foodie_explorer",name:"Foodie Explorer",description:"Try 10 new dishes",icon:"\ud83c\udf7d\ufe0f",requirement:{type:"newDishes",value:10},points:75,rarity:"common"}],intermediate:[{id:"dare_devil",name:"Dare Devil",description:"Complete 25 dare challenges",icon:"\ud83d\udd25",requirement:{type:"dareChallenges",value:25},points:100,rarity:"uncommon"},{id:"local_explorer",name:"Local Explorer",description:"Visit 20 different places",icon:"\ud83c\udf0d",requirement:{type:"placesVisited",value:20},points:100,rarity:"uncommon"},{id:"challenge_champion",name:"Challenge Champion",description:"Complete 50 challenges",icon:"\ud83d\udcaa",requirement:{type:"challengesCompleted",value:50},points:150,rarity:"uncommon"},{id:"social_butterfly",name:"Social Butterfly",description:"Share 10 dates with the community",icon:"\ud83c\udfad",requirement:{type:"datesShared",value:10},points:100,rarity:"uncommon"}],advanced:[{id:"date_royalty",name:"Date Royalty",description:"Complete 100 dates",icon:"\ud83d\udc51",requirement:{type:"datesCompleted",value:100},points:500,rarity:"rare"},{id:"five_star",name:"5-Star Rating",description:"Get 50 perfect ratings",icon:"\u2b50",requirement:{type:"perfectRatings",value:50},points:300,rarity:"rare"},{id:"renaissance_couple",name:"Renaissance Couple",description:"Try all activity types",icon:"\ud83c\udfaa",requirement:{type:"allActivityTypes",value:!0},points:250,rarity:"rare"},{id:"legendary_status",name:"Legendary Status",description:"Reach max level",icon:"\ud83d\udc8e",requirement:{type:"level",value:6},points:1e3,rarity:"legendary"}],special:[{id:"night_owl",name:"Night Owl",description:"Complete 10 late-night dates",icon:"\ud83c\udf19",requirement:{type:"lateNightDates",value:10},points:150,rarity:"uncommon"},{id:"early_bird",name:"Early Bird",description:"Complete 10 morning dates",icon:"\u2600\ufe0f",requirement:{type:"morningDates",value:10},points:150,rarity:"uncommon"},{id:"Going for a walk",name:"Going for a walk",description:"Complete dates in 5+ cities",icon:"\ud83c\udf0d",requirement:{type:"citiesVisited",value:5},points:1e3,rarity:"rare"},{id:"lucky_seven",name:"Lucky 7",description:"Complete 7 mystery dates",icon:"\ud83c\udfb2",requirement:{type:"mysteryDates",value:7},points:250,rarity:"rare"},{id:"streak_master",name:"Streak Master",description:"7 consecutive weeks of dates",icon:"\ud83d\udd25",requirement:{type:"weeklyStreak",value:7},points:2e3,rarity:"rare"}]},Bb=(e,t)=>{const{type:n,value:r}=e.requirement;var i;return"allActivityTypes"===n?(null===(i=t.activityTypes)||void 0===i?void 0:i.length)>=5:t[n]>=r},Wb=e=>{let{userStats:t,onClose:n}=e;const r=(e=>[...Ub.starter,...Ub.intermediate,...Ub.advanced,...Ub.special].map(t=>Ie(Ie({},t),{},{unlocked:Bb(t,e)})))(t),o=r.filter(e=>e.unlocked).length,s=r.length,a=o/s*100;(0,i.useEffect)(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0},[]);const l={common:{bg:"#94a3b8",glow:"#94a3b820"},uncommon:{bg:"#22c55e",glow:"#22c55e20"},rare:{bg:"#3b82f6",glow:"#3b82f620"},legendary:{bg:"#a855f7",glow:"#a855f720"}};return(0,_v.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%)",paddingTop:"env(safe-area-inset-top)",position:"relative",overflow:"hidden"},children:[(0,_v.jsxs)("div",{style:{padding:"2rem"},children:[[...Array(20)].map((e,t)=>(0,_v.jsx)("div",{style:{position:"absolute",top:"".concat(100*Math.random(),"%"),left:"".concat(100*Math.random(),"%"),width:"2px",height:"2px",background:"white",borderRadius:"50%",animation:"twinkle ".concat(2+3*Math.random(),"s ease-in-out infinite"),animationDelay:"".concat(2*Math.random(),"s")}},t)),(0,_v.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",position:"relative",zIndex:1},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3rem",flexWrap:"wrap",gap:"1rem"},children:[(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"900",color:"white",marginBottom:"0.5rem",textShadow:"0 0 20px rgba(168, 85, 247, 0.5)"},children:"\ud83c\udfc6 Achievements"}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",color:"rgba(255,255,255,0.7)",fontWeight:"500"},children:"Unlock badges as you explore"})]}),(0,_v.jsx)("button",{onClick:n,style:{background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",border:"2px solid rgba(255,255,255,0.2)",color:"white",padding:"0.75rem 2rem",borderRadius:"50px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",transition:"all 0.3s ease"},children:"\u2190 Back"})]}),(0,_v.jsxs)("div",{style:{background:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",borderRadius:"24px",padding:"2rem",marginBottom:"3rem",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"white",margin:0},children:"Overall Progress"}),(0,_v.jsxs)("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:"white"},children:[o,"/",s]})]}),(0,_v.jsx)("div",{style:{width:"100%",height:"20px",background:"rgba(255,255,255,0.1)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:(0,_v.jsx)("div",{style:{width:"".concat(a,"%"),height:"100%",background:"linear-gradient(90deg, #a855f7 0%, #ec4899 100%)",borderRadius:"10px",transition:"width 1s ease-out",boxShadow:"0 0 20px rgba(168, 85, 247, 0.5)"}})})]}),Object.entries(Ub).map(e=>{let[n,r]=e;return(0,_v.jsxs)("div",{style:{marginBottom:"3rem"},children:[(0,_v.jsxs)("h2",{style:{fontSize:"1.75rem",fontWeight:"700",color:"white",marginBottom:"1.5rem",textTransform:"capitalize",display:"flex",alignItems:"center",gap:"0.5rem"},children:["starter"===n&&"\ud83c\udf31","intermediate"===n&&"\u2b50","advanced"===n&&"\ud83d\ude80","special"===n&&"\u2728",n," Achievements"]}),(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:r.map(e=>{const n=Bb(e,t),r=l[e.rarity];return(0,_v.jsxs)("div",{style:{background:n?"linear-gradient(135deg, ".concat(r.bg,"20 0%, ").concat(r.bg,"10 100%)"):"rgba(255,255,255,0.03)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"1.5rem",border:n?"2px solid ".concat(r.bg,"60"):"2px solid rgba(255,255,255,0.1)",position:"relative",overflow:"hidden",boxShadow:n?"0 0 30px ".concat(r.glow):"none"},children:[(0,_v.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",opacity:n?1:.3},children:n?(0,_v.jsx)(Ye,{size:24,style:{color:r.bg}}):(0,_v.jsx)(Cv,{size:24,style:{color:"rgba(255,255,255,0.3)"}})}),(0,_v.jsx)("div",{style:{fontSize:"3.5rem",marginBottom:"1rem",filter:n?"none":"grayscale(100%)",opacity:n?1:.3},children:e.icon}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:n?"white":"rgba(255,255,255,0.4)",marginBottom:"0.5rem"},children:e.name}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:n?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.3)",marginBottom:"1rem",lineHeight:"1.5"},children:e.description}),(0,_v.jsxs)("div",{style:{display:"inline-block",background:n?r.bg:"rgba(255,255,255,0.1)",color:"white",padding:"0.25rem 0.75rem",borderRadius:"50px",fontSize:"0.875rem",fontWeight:"700"},children:["+",e.points," XP"]})]},e.id)})})]},n)})]})]}),(0,_v.jsx)("style",{children:"\n        @keyframes twinkle {\n          0%, 100% { opacity: 0.3; transform: scale(1); }\n          50% { opacity: 1; transform: scale(1.5); }\n        }\n      "})]})},Vb=e=>{let{oldLevel:t,newLevel:n,onClose:r}=e;const[o,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{setTimeout(()=>s(!0),100)},[]),(0,_v.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.3s ease-out"},children:[(0,_v.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[...Array(30)].map((e,t)=>(0,_v.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",width:"4px",height:"4px",background:["#FFD700","#FF6B35","#9D4EDD","#06D6A0","#4facfe","#ec4899"][t%6],borderRadius:"50%",animation:"explode ".concat(1.5+Math.random(),"s ease-out forwards"),animationDelay:"".concat(.5*Math.random(),"s"),transform:"rotate(".concat(12*t,"deg) translateX(0)"),boxShadow:"0 0 10px currentColor"}},t))}),(0,_v.jsxs)("div",{style:{position:"relative",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",borderRadius:"32px",padding:"4rem 3rem",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflowY:"auto",textAlign:"center",border:"3px solid rgba(255,215,0,0.3)",boxShadow:"0 0 60px rgba(255,215,0,0.3), inset 0 0 60px rgba(255,215,0,0.05)",transform:o?"scale(1) rotate(0deg)":"scale(0.8) rotate(-5deg)",opacity:o?1:0,transition:"all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[(0,_v.jsx)("button",{onClick:r,style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255,255,255,0.2)",e.target.style.transform="rotate(90deg)"},onMouseLeave:e=>{e.target.style.background="rgba(255,255,255,0.1)",e.target.style.transform="rotate(0deg)"},children:(0,_v.jsx)(Rv,{size:24,style:{color:"white"}})}),(0,_v.jsx)("div",{style:{width:"150px",height:"150px",margin:"0 auto 2rem",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 0 50px rgba(255,215,0,0.6), inset 0 0 30px rgba(255,255,255,0.3)",animation:"pulse 2s ease-in-out infinite",border:"5px solid rgba(255,255,255,0.5)"},children:(0,_v.jsx)("div",{style:{fontSize:"4rem",animation:"bounce 1s ease-in-out infinite"},children:n.icon})}),(0,_v.jsx)("h1",{style:{fontSize:"4rem",fontWeight:"900",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FFD700 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"1rem",textShadow:"0 0 40px rgba(255,215,0,0.5)",animation:"glow 2s ease-in-out infinite"},children:"LEVEL UP!"}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,_v.jsx)("div",{style:{padding:"0.75rem 1.5rem",background:"rgba(255,255,255,0.1)",borderRadius:"50px",border:"2px solid rgba(255,255,255,0.2)"},children:(0,_v.jsxs)("p",{style:{fontSize:"1.25rem",color:"rgba(255,255,255,0.7)",margin:0,fontWeight:"600"},children:["Level ",t.level]})}),(0,_v.jsx)(Dv,{size:32,style:{color:"#FFD700"}}),(0,_v.jsx)("div",{style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",borderRadius:"50px",boxShadow:"0 4px 20px rgba(255,215,0,0.4)"},children:(0,_v.jsxs)("p",{style:{fontSize:"1.25rem",color:"white",margin:0,fontWeight:"700"},children:["Level ",n.level]})})]}),(0,_v.jsx)("div",{style:{padding:"2rem 1.5rem",background:"rgba(255,215,0,0.1)",borderRadius:"20px",border:"2px solid rgba(255,215,0,0.3)",marginBottom:"2rem"},children:(0,_v.jsxs)("p",{style:{fontSize:"2rem",fontWeight:"700",color:"white",margin:0,lineHeight:"1.4"},children:["You're now a"," ",(0,_v.jsx)("span",{style:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"},children:n.name}),"!"]})}),(0,_v.jsx)("div",{style:{padding:"1.5rem",background:"rgba(255,255,255,0.05)",borderRadius:"16px",marginBottom:"2rem"},children:(0,_v.jsx)("p",{style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.9)",margin:0,lineHeight:"1.6"},children:"Keep completing challenges and exploring new dates to level up even more!"})}),(0,_v.jsx)("button",{onClick:r,style:{width:"100%",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"white",fontWeight:"900",fontSize:"1.25rem",padding:"1.25rem 3rem",borderRadius:"50px",border:"none",cursor:"pointer",boxShadow:"0 8px 30px rgba(255,215,0,0.4)",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px"},onMouseEnter:e=>{e.target.style.transform="translateY(-3px)",e.target.style.boxShadow="0 12px 40px rgba(255,215,0,0.6)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 8px 30px rgba(255,215,0,0.4)"},children:"Continue Your Journey"})]}),(0,_v.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        @keyframes explode {\n          to {\n            transform: rotate(".concat(360*Math.random(),"deg) translateX(300px);\n            opacity: 0;\n          }\n        }\n        \n        @keyframes pulse {\n          0%, 100% {\n            transform: scale(1);\n            box-shadow: 0 0 50px rgba(255,215,0,0.6), inset 0 0 30px rgba(255,255,255,0.3);\n          }\n          50% {\n            transform: scale(1.05);\n            box-shadow: 0 0 80px rgba(255,215,0,0.8), inset 0 0 40px rgba(255,255,255,0.4);\n          }\n        }\n        \n        @keyframes bounce {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n        \n        @keyframes glow {\n          0%, 100% {\n            text-shadow: 0 0 40px rgba(255,215,0,0.5);\n          }\n          50% {\n            text-shadow: 0 0 60px rgba(255,215,0,0.8);\n          }\n        }\n      ")})]})},qb=e=>{let{level:t,progress:n,xp:r,onClick:i}=e;const o=Math.min(n.percentage||0,100),s=7===t.level;return(0,_v.jsxs)("div",{onClick:i,style:{background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1rem 1.5rem",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(0,0,0,0.05)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 15px rgba(0,0,0,0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, ".concat(t.color,", ").concat(t.color,"dd)"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",boxShadow:"0 4px 12px ".concat(t.color,"40")},children:t.icon}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Level ",t.level]}),!s&&(0,_v.jsx)(Dv,{size:14,style:{color:t.color}})]}),(0,_v.jsx)("p",{style:{fontSize:"1rem",fontWeight:"700",color:t.color,margin:0},children:t.name})]})]}),(0,_v.jsxs)("div",{style:{textAlign:"right"},children:[(0,_v.jsx)("p",{style:{fontSize:"1.5rem",fontWeight:"900",background:"linear-gradient(135deg, ".concat(t.color,", ").concat(t.color,"dd)"),WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0,lineHeight:1},children:Pb(r)}),(0,_v.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:0,fontWeight:"600"},children:"XP"})]})]}),s?(0,_v.jsx)("div",{style:{textAlign:"center",padding:"0.5rem",background:"linear-gradient(135deg, ".concat(t.color,"20, ").concat(t.color,"10)"),borderRadius:"8px",border:"2px solid ".concat(t.color,"40")},children:(0,_v.jsx)("p",{style:{fontSize:"0.875rem",fontWeight:"700",background:"linear-gradient(135deg, ".concat(t.color,", ").concat(t.color,"dd)"),WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:"\ud83c\udf89 Max Level Reached!"})}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{style:{width:"100%",height:"12px",background:"#e5e7eb",borderRadius:"6px",overflow:"hidden",position:"relative",marginBottom:"0.5rem"},children:(0,_v.jsx)("div",{style:{width:"".concat(o,"%"),height:"100%",background:"linear-gradient(90deg, ".concat(t.color,", ").concat(t.color,"dd)"),borderRadius:"6px",transition:"width 0.5s ease-out",boxShadow:"0 0 10px ".concat(t.color,"60"),position:"relative",overflow:"hidden"},children:(0,_v.jsx)("div",{style:{position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)",animation:"shine 2s ease-in-out infinite"}})})}),(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_v.jsxs)("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0,fontWeight:"600"},children:[Pb(n.currentLevelXP||0)," / ",Pb(n.totalNeeded||0)]}),(0,_v.jsxs)("p",{style:{fontSize:"0.75rem",color:t.color,margin:0,fontWeight:"700"},children:[Pb(n.pointsNeeded||0)," to next level"]})]})]}),(0,_v.jsx)("style",{children:"\n        @keyframes shine {\n          0% { left: -100%; }\n          50%, 100% { left: 100%; }\n        }\n      "})]})},Hb=Le("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Gb=Le("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),Kb=e=>{let{onClose:t,onSelectActivity:n,language:r="en"}=e;const[o,s]=(0,i.useState)(!1),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(0),d=(0,i.useRef)(null);(0,i.useEffect)(()=>(yb(xb),()=>{yb(vb)}),[]);const h=[{label:"Food & Dining",emoji:"\ud83c\udf7d\ufe0f",color:"#FF6B35",activities:["restaurant","dinner","brunch"]},{label:"Drinks & Bars",emoji:"\ud83c\udf78",color:"#004E89",activities:["bar","cocktail","wine"]},{label:"Entertainment",emoji:"\ud83c\udfad",color:"#F77F00",activities:["live music","theater","comedy"]},{label:"Adventure",emoji:"\ud83d\ude80",color:"#06D6A0",activities:["go kart","escape room","arcade"]},{label:"Culture",emoji:"\ud83c\udfdb\ufe0f",color:"#9D4EDD",activities:["museum","art gallery","art"]},{label:"Nature",emoji:"\ud83c\udf33",color:"#38B000",activities:["park","beach","garden"]},{label:"Nightlife",emoji:"\ud83c\udf89",color:"#FF006E",activities:["nightclub","dancing","karaoke"]},{label:"Wellness",emoji:"\ud83e\uddd8",color:"#8338EC",activities:["spa","yoga","fitness"]},{label:"Sports",emoji:"\u26bd",color:"#1B9AAA",activities:["bowling","mini golf","ice skating"]},{label:"Creative",emoji:"\ud83c\udfa8",color:"#EF476F",activities:["art class","pottery","painting"]},{label:"Shopping",emoji:"\ud83d\udecd\ufe0f",color:"#FFD60A",activities:["shopping","market","boutique"]},{label:"Unique",emoji:"\u2728",color:"#06FFA5",activities:["arcade","aquarium","zoo"]}];(0,i.useEffect)(()=>{const e=d.current;if(!e)return;const t=e.getContext("2d"),n=window.devicePixelRatio||1,r=e.getBoundingClientRect();e.width=r.width*n,e.height=r.height*n,t.scale(n,n);const i=r.width/2,o=r.height/2,s=Math.min(i,o)-20;t.clearRect(0,0,e.width,e.height);const a=2*Math.PI/h.length;t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",h.forEach((e,n)=>{const r=n*a+c*Math.PI/180,l=r+a;t.beginPath(),t.moveTo(i,o),t.arc(i,o,s,r,l),t.closePath(),t.fillStyle=e.color,t.fill(),t.strokeStyle="#ffffff",t.lineWidth=4,t.stroke(),t.save(),t.translate(i,o),t.rotate(r+a/2),t.textAlign="center",t.textBaseline="middle",t.font="bold 24px Arial",t.fillStyle="#ffffff",t.shadowColor="rgba(0,0,0,0.3)",t.shadowBlur=4,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillText(e.emoji,.7*s,0),t.shadowBlur=2,t.shadowOffsetX=1,t.shadowOffsetY=1;const u=e.label.split(" ");1===u.length?(t.font="bold 14px Arial",t.fillText(u[0],.45*s,0)):(t.font="bold 13px Arial",t.fillText(u[0],.45*s,-8),t.fillText(u[1]||"",.45*s,8)),t.restore()});const l=t.createRadialGradient(i,o,0,i,o,40);l.addColorStop(0,"#ffffff"),l.addColorStop(1,"#f3f4f6"),t.beginPath(),t.arc(i,o,40,0,2*Math.PI),t.fillStyle=l,t.fill(),t.strokeStyle="#ec4899",t.lineWidth=5,t.stroke(),t.save(),t.shadowColor="rgba(0,0,0,0.3)",t.shadowBlur=8,t.shadowOffsetX=0,t.shadowOffsetY=4,t.beginPath(),t.moveTo(i,25),t.lineTo(i-20,60),t.lineTo(i+20,60),t.closePath(),t.fillStyle="#ec4899",t.fill(),t.strokeStyle="#ffffff",t.lineWidth=3,t.stroke(),t.restore()},[c]);return(0,_v.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem",paddingTop:"calc(1rem + env(safe-area-inset-top))",paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #f3e8ff 100%)",borderRadius:"24px",padding:"2rem",paddingTop:"2.5rem",maxWidth:"600px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",position:"relative",maxHeight:"calc(90vh - env(safe-area-inset-top) - env(safe-area-inset-bottom))",overflowY:"auto"},children:[(0,_v.jsx)("button",{onClick:t,style:{position:"absolute",top:"0.75rem",right:"0.75rem",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",border:"3px solid white",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.5)",transition:"all 0.2s ease",zIndex:10001,fontSize:"1.75rem",fontWeight:"900",color:"white",lineHeight:"1",padding:0},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1) rotate(90deg)",e.currentTarget.style.boxShadow="0 6px 20px rgba(239, 68, 68, 0.7)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1) rotate(0deg)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.5)"},children:"\u2715"}),(0,_v.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"900",background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem"},children:"\ud83c\udfa1 Spin the Date Wheel!"}),(0,_v.jsx)("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"Feeling adventurous? Let fate decide your date activity!"})]}),(0,_v.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem",position:"relative"},children:(0,_v.jsx)("canvas",{ref:d,width:500,height:500,style:{width:"100%",maxWidth:"500px",height:"auto",filter:o?"blur(2px)":"none",transition:"filter 0.3s ease",display:"block"}})}),a&&!o&&(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",border:"3px solid ".concat(a.color),textAlign:"center",animation:"bounceIn 0.6s ease"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:a.emoji}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"800",color:a.color,marginBottom:"0.5rem"},children:a.label}),(0,_v.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Pick from: ",a.activities.join(", ")]})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,_v.jsx)("button",{onClick:()=>{if(o)return;s(!0),l(null);const e=360*(Math.floor(6*Math.random())+5)+Math.floor(360*Math.random());let t=0;const n=Date.now(),r=()=>{const i=Date.now()-n,o=Math.min(i/4e3,1),a=1-Math.pow(1-o,3);if(t=e*a,u(t%360),o<1)requestAnimationFrame(r);else{s(!1);const e=(270-t%360+360)%360,n=360/h.length,r=Math.floor(e/n)%h.length,i=h[r];l(i)}};r()},disabled:o,style:{flex:1,minWidth:"140px",background:o?"#d1d5db":"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",color:"white",fontWeight:"700",fontSize:"1rem",padding:"1rem 1.5rem",borderRadius:"12px",border:"none",cursor:o?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 8px 20px rgba(236, 72, 153, 0.4)",transition:"all 0.3s ease"},onMouseEnter:e=>{o||(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 12px 28px rgba(236, 72, 153, 0.5)")},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 8px 20px rgba(236, 72, 153, 0.4)"},children:o?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(Hb,{className:"spinning-icon",size:20}),"Spinning..."]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(Gb,{size:20}),a?"Spin Again!":"Spin the Wheel!"]})}),a&&!o&&(0,_v.jsx)("button",{onClick:()=>{if(a){const e=a.activities[Math.floor(Math.random()*a.activities.length)];n(e),t()}},style:{flex:1,minWidth:"140px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",fontWeight:"700",fontSize:"1rem",padding:"1rem 1.5rem",borderRadius:"12px",border:"none",cursor:"pointer",boxShadow:"0 8px 20px rgba(16, 185, 129, 0.4)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 12px 28px rgba(16, 185, 129, 0.5)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 8px 20px rgba(16, 185, 129, 0.4)"},children:"Use This Activity! \u2728"})]}),(0,_v.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.7)",borderRadius:"12px",fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:["\ud83d\udca1 ",(0,_v.jsx)("strong",{children:"12 Categories, 36 Activities!"}),(0,_v.jsx)("br",{}),"Spin to discover random date ideas. Spin multiple times to build your perfect date!"]})]}),(0,_v.jsx)("style",{children:"\n        @keyframes bounceIn {\n          0% {\n            transform: scale(0.3);\n            opacity: 0;\n          }\n          50% {\n            transform: scale(1.05);\n          }\n          70% {\n            transform: scale(0.9);\n          }\n          100% {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n\n        .spinning-icon {\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          from {\n            transform: rotate(0deg);\n          }\n          to {\n            transform: rotate(360deg);\n          }\n        }\n      "})]})},Yb=Le("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),Qb=Le("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);function Xb(e){let{user:t,subscriptionStatus:n,savedDatesCount:r,notificationCount:o,surpriseCount:s=0,onNavigate:a,onLogout:l}=e;const[c,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>(document.body.style.overflow=c?"hidden":"",()=>{document.body.style.overflow=""}),[c]);const d=[{id:"spin",icon:"\ud83c\udfa1",label:"Spin the Wheel",gradient:"linear-gradient(135deg, #a855f7 0%, #ec4899 100%)",shadow:"rgba(168, 85, 247, 0.4)"},{id:"invite",icon:(0,_v.jsx)(ub,{size:20}),label:"Invite Friends",gradient:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",shadow:"rgba(251, 146, 60, 0.4)"},{id:"stats",icon:(0,_v.jsx)(Dv,{size:20}),label:"Stats",gradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",shadow:"rgba(59, 130, 246, 0.4)"},{id:"achievements",icon:(0,_v.jsx)(zb,{size:20}),label:"Achievements",gradient:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",shadow:"rgba(255, 215, 0, 0.4)"},{id:"social",icon:(0,_v.jsx)(nb,{size:20}),label:"Social",gradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",shadow:"rgba(16, 185, 129, 0.4)",badge:o>0?o:null,locked:"free"===n},{id:"saved",icon:(0,_v.jsx)(Me,{size:20}),label:"Saved",gradient:"linear-gradient(135deg, #ec4899 0%, #d946ef 100%)",shadow:"rgba(236, 72, 153, 0.4)",badge:r},{id:"scrapbook",icon:"\ud83d\udcf8",label:"Date Memories",gradient:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",shadow:"rgba(245, 158, 11, 0.4)"},{id:"surprise",icon:"\ud83c\udf81",label:"Surprise Dates",gradient:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",shadow:"rgba(139, 92, 246, 0.4)",badge:s>0?s:null},{id:"streaks",icon:"\ud83d\udd25",label:"Date Streaks",gradient:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",shadow:"rgba(239, 68, 68, 0.4)"},{id:"profile",icon:(0,_v.jsx)(Iv,{size:20}),label:"Profile",gradient:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",shadow:"rgba(139, 92, 246, 0.4)"}],h=(o||0)+(s||0);return(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("button",{onClick:()=>u(!c),style:{background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"12px",padding:"0.75rem",cursor:"pointer",display:c?"none":"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",position:"relative",zIndex:1001},onMouseEnter:e=>{e.target.style.background="rgba(255,255,255,0.3)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(255,255,255,0.2)",e.target.style.transform="scale(1)"},children:[(0,_v.jsx)(Yb,{size:24,style:{color:"white"}}),h>0&&(0,_v.jsx)("div",{style:{position:"absolute",top:"-5px",right:"-5px",background:"#ef4444",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.6)"},children:h>9?"9+":h})]}),c&&(0,_v.jsx)("div",{onClick:()=>u(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",zIndex:999,animation:"fadeIn 0.3s ease"}}),(0,_v.jsxs)("div",{style:{position:"fixed",top:0,right:0,width:"320px",maxWidth:"85vw",height:"100dvh",maxHeight:"-webkit-fill-available",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"-4px 0 20px rgba(0,0,0,0.3)",zIndex:1e3,transform:c?"translateX(0)":"translateX(100%)",transition:"transform 0.3s ease",overflowY:"scroll",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",display:"flex",flexDirection:"column",touchAction:"pan-y"},children:[(0,_v.jsxs)("div",{style:{padding:"2rem 1.5rem",paddingTop:"calc(2rem + env(safe-area-inset-top))",borderBottom:"2px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.1)",flexShrink:0,position:"relative"},children:[(0,_v.jsx)("div",{onClick:()=>u(!1),style:{position:"absolute",top:"calc(1rem + env(safe-area-inset-top))",right:"1rem",background:"rgba(255,255,255,0.2)",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10,WebkitTapHighlightColor:"transparent",userSelect:"none"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255,255,255,0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255,255,255,0.2)"},children:(0,_v.jsx)(Rv,{size:20,style:{color:"white"}})}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,_v.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.5rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(236, 72, 153, 0.4)"},children:t.email.charAt(0).toUpperCase()}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("p",{style:{color:"white",fontWeight:"700",fontSize:"1rem",margin:0},children:t.email.split("@")[0]}),(0,_v.jsx)("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.875rem",margin:0},children:"premium"===n?"\u2728 Premium":"\ud83c\udd93 Free"})]})]})]}),(0,_v.jsx)("div",{style:{flex:1,padding:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem",paddingBottom:"2rem"},children:d.map(e=>(0,_v.jsxs)("button",{onClick:()=>{return t=e.id,u(!1),void a(t);var t},disabled:e.locked,style:{background:e.locked?"rgba(0,0,0,0.2)":"rgba(255,255,255,0.15)",backdropFilter:"blur(10px)",border:"2px solid rgba(255,255,255,0.2)",borderRadius:"16px",padding:"1rem 1.25rem",cursor:e.locked?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.3s ease",position:"relative",opacity:e.locked?.5:1},onMouseEnter:t=>{e.locked||(t.currentTarget.style.background="rgba(255,255,255,0.25)",t.currentTarget.style.transform="translateX(-4px)")},onMouseLeave:t=>{e.locked||(t.currentTarget.style.background="rgba(255,255,255,0.15)",t.currentTarget.style.transform="translateX(0)")},children:[(0,_v.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:e.gradient,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.25rem",boxShadow:"0 4px 12px ".concat(e.shadow),flexShrink:0},children:e.icon}),(0,_v.jsx)("span",{style:{color:"white",fontWeight:"700",fontSize:"1rem",flex:1},children:e.label}),e.badge>0&&(0,_v.jsx)("span",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"0.75rem",fontWeight:"900",padding:"0.25rem 0.625rem",borderRadius:"12px",minWidth:"24px",textAlign:"center",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.5)"},children:e.badge>99?"99+":e.badge}),e.locked&&(0,_v.jsx)("span",{style:{fontSize:"1.25rem"},children:"\ud83d\udd12"})]},e.id))}),(0,_v.jsx)("div",{style:{padding:"1rem",paddingBottom:"max(1rem, env(safe-area-inset-bottom, 1rem))",borderTop:"2px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.1)",flexShrink:0},children:(0,_v.jsxs)("button",{onClick:()=>{u(!1),l()},style:{width:"100%",background:"rgba(239, 68, 68, 0.2)",backdropFilter:"blur(10px)",border:"2px solid rgba(239, 68, 68, 0.4)",borderRadius:"16px",padding:"1rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",color:"white",fontWeight:"700",fontSize:"1rem",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.3)",e.target.style.transform="scale(1.02)"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)",e.target.style.transform="scale(1)"},children:[(0,_v.jsx)(Qb,{size:20}),"Logout"]})})]}),(0,_v.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n      "})]})}const Jb=Le("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),$b=Le("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function Zb(e){let{currentUser:t,mode:n="view",dateToSave:r,onClose:o}=e;const[s,a]=(0,i.useState)([]),[l,c]=(0,i.useState)(!0),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)(0),[g,y]=(0,i.useState)(""),[v,b]=(0,i.useState)(null),[x,w]=(0,i.useState)(null),[S,k]=(0,i.useState)(!1),[E,C]=(0,i.useState)("");(0,i.useEffect)(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=document.getElementById("root");e&&(e.scrollTop=0)},[]),(0,i.useEffect)(()=>{t&&"view"===n?_():c(!1)},[t,n]);const _=async()=>{if(t){c(!0);try{const e=kg(Pm(kv,"dateMemories"),Cg("userId","==",t.uid),Ig("createdAt","desc")),n=(await Vg(e)).docs.map(e=>Ie({id:e.id},e.data()));a(n)}catch(e){console.error("Error loading memories:",e)}c(!1)}},T=e=>{const t=e.target.files[0];if(t){if(t.size>1e7)return void alert("Photo must be under 10MB");b(t);const e=new FileReader;e.onloadend=()=>{w(e.result)},e.readAsDataURL(t)}},I=async()=>{if(t)if(0!==p){k(!0),C("Starting save...");try{let s=null;if(v){C("Uploading photo..."),console.log("\ud83d\udcf8 Starting photo upload via backend...");try{const e=await t.getIdToken(),n=await new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>t(new Error("Failed to read file")),n.readAsDataURL(v)}),r="https://datemaker-backend-1.onrender.com";console.log("\ud83d\udcf8 Uploading to:","".concat(r,"/api/upload-photo"));const i=await fetch("".concat(r,"/api/upload-photo"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({photo:n,fileName:v.name})});if(!i.ok){const e=await i.json();throw new Error(e.error||"Upload failed")}s=(await i.json()).url,console.log("\ud83d\udcf8 Photo URL:",s)}catch(n){if(console.error("\u274c Photo upload failed:",n),!window.confirm("Photo upload failed. Save without photo?"))return k(!1),void C("");s=null}}C("Saving to database..."),console.log("\ud83d\udcbe Saving memory to Firestore..."),console.log("dateToSave:",r);let a=[];try{var e;null!==r&&void 0!==r&&null!==(e=r.itinerary)&&void 0!==e&&e.stops&&(a=r.itinerary.stops.map(e=>{var t;return{name:(null===(t=e.place)||void 0===t?void 0:t.name)||e.title||"Unknown",time:e.time||""}}))}catch(i){console.error("Error preparing stops:",i),a=[]}const l={userId:t.uid,rating:p,notes:g||"",photoUrl:s,location:(null===r||void 0===r?void 0:r.location)||"Date Night",stops:a,createdAt:Zg()};console.log("\ud83d\udcbe Memory data:",l);const c=await Kg(Pm(kv,"dateMemories"),l);console.log("\u2705 Memory saved with ID:",c.id),C("Done!"),alert("\u2728 Memory saved to your scrapbook!"),o()}catch(s){console.error("\u274c Error saving memory:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),alert("Failed to save memory: ".concat(s.message,"\n\nPlease try again."))}k(!1),C("")}else alert("Please add a rating for your date!");else alert("No user logged in")},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,_v.jsx)("div",{style:{display:"flex",gap:"8px"},children:[1,2,3,4,5].map(n=>(0,_v.jsx)(Fe,{size:t?32:16,fill:n<=e?"#FFD700":"none",stroke:n<=e?"#FFD700":"#ccc",style:{cursor:t?"pointer":"default"},onClick:()=>t&&m(n)},n))})};return t?"create"===n?(0,_v.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%)",zIndex:9999,overflow:"auto",paddingTop:"env(safe-area-inset-top)"},children:(0,_v.jsxs)("div",{style:{padding:"1rem",maxWidth:"600px",margin:"0 auto"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[(0,_v.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"\ud83d\udcf8 Date Memory Scrapbook"}),(0,_v.jsx)("button",{onClick:o,style:{background:"white",border:"none",borderRadius:"50%",width:"44px",height:"44px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:(0,_v.jsx)(Rv,{size:24,color:"#FF6B35",strokeWidth:3})})]}),(0,_v.jsxs)("div",{style:{background:"#FFF0F5",borderRadius:"20px",padding:"2rem",marginBottom:"1.5rem",border:"3px solid #FFB6C1",textAlign:"center"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:"\ud83d\udc95"}),(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#FF69B4",marginBottom:"0.5rem"},children:"Save Your Date Memory"}),(0,_v.jsx)("p",{style:{color:"#FF69B4",fontSize:"0.95rem"},children:"Rate your experience, add photos, and capture the special moments"})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\u2b50 Overall Date Rating"}),(0,_v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:j(p,!0)})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udcf7 Add Photos (Optional)"}),x?(0,_v.jsxs)("div",{style:{position:"relative"},children:[(0,_v.jsx)("img",{src:x,alt:"Preview",style:{width:"100%",borderRadius:"12px",maxHeight:"250px",objectFit:"cover"}}),(0,_v.jsx)("button",{onClick:()=>{b(null),w(null)},style:{position:"absolute",top:"10px",right:"10px",background:"rgba(0,0,0,0.5)",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_v.jsx)(Rv,{size:18,color:"white"})})]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("input",{type:"file",accept:"image/*",onChange:T,style:{display:"none"},id:"photo-upload"}),(0,_v.jsxs)("label",{htmlFor:"photo-upload",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",background:"#3b82f6",color:"white",padding:"1rem 2rem",borderRadius:"12px",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},children:[(0,_v.jsx)(Nv,{size:20}),"Choose Photos"]})]})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udcdd Notes (Optional)"}),(0,_v.jsx)("textarea",{value:g,onChange:e=>y(e.target.value),placeholder:"What made this date special?",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #e5e7eb",fontSize:"1rem",minHeight:"100px",resize:"vertical",boxSizing:"border-box",fontFamily:"inherit"}})]}),(0,_v.jsx)("button",{onClick:I,disabled:S||0===p,style:{width:"100%",background:S||0===p?"#ccc":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1.25rem",borderRadius:"16px",border:"none",fontSize:"1.1rem",fontWeight:"700",cursor:S||0===p?"not-allowed":"pointer",boxShadow:S||0===p?"none":"0 4px 15px rgba(16, 185, 129, 0.3)",marginBottom:"1rem"},children:S?"\ud83d\udcbe ".concat(E||"Saving..."):"\ud83d\udcbe Save Memory"}),(0,_v.jsx)("button",{onClick:o,style:{width:"100%",background:"transparent",color:"white",padding:"1rem",borderRadius:"12px",border:"2px solid rgba(255,255,255,0.5)",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Skip for Now"})]})}):(0,_v.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%)",zIndex:9999,overflow:"auto",paddingTop:"env(safe-area-inset-top)"},children:[(0,_v.jsxs)("div",{style:{padding:"1rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[(0,_v.jsx)("button",{onClick:o,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"12px",padding:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_v.jsx)(Jb,{size:24,color:"white"})}),(0,_v.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"\ud83d\udcf8 Date Scrapbook"}),(0,_v.jsx)("div",{style:{width:"44px"}})]}),l?(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem"},children:[(0,_v.jsx)("div",{style:{width:"50px",height:"50px",border:"5px solid rgba(255,255,255,0.3)",borderTop:"5px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,_v.jsx)("p",{style:{color:"white",marginTop:"1rem",fontWeight:"600"},children:"Loading memories..."})]}):0===s.length?(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"4rem 2rem",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[(0,_v.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83d\udcf7"}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},children:"No Memories Yet"}),(0,_v.jsx)("p",{style:{color:"#666",fontSize:"1rem"},children:"Complete dates and save them to build your scrapbook!"})]}):(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:s.map(e=>{var t,n,r;return(0,_v.jsxs)("div",{style:{background:"#FFF9E6",borderRadius:"20px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.15)",border:"3px solid #FFE4B5"},children:[(0,_v.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"2px solid #FFE4B5"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.75rem"},children:[(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#333",margin:0},children:e.location||"Date Night"}),(0,_v.jsx)("p",{style:{color:"#888",fontSize:"0.875rem",marginTop:"0.25rem"},children:(null===(t=e.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))||"Date unknown"})]}),j(e.rating||0)]}),u===e.id?(0,_v.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,_v.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"12px",border:"2px solid #FFE4B5",fontSize:"1rem",minHeight:"80px",resize:"vertical",boxSizing:"border-box",fontFamily:"inherit"},placeholder:"Add notes about this date..."}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[(0,_v.jsxs)("button",{onClick:()=>(async e=>{try{await Hg(Dm(kv,"dateMemories",e),{notes:h}),a(s.map(t=>t.id===e?Ie(Ie({},t),{},{notes:h}):t)),d(null),f("")}catch(t){console.error("Error updating memory:",t),alert("Failed to update memory")}})(e.id),style:{background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem",fontWeight:"600"},children:[(0,_v.jsx)(Mv,{size:16})," Save"]}),(0,_v.jsxs)("button",{onClick:()=>d(null),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem",fontWeight:"600"},children:[(0,_v.jsx)(Rv,{size:16})," Cancel"]})]})]}):e.notes?(0,_v.jsx)("div",{style:{background:"white",padding:"1rem",borderRadius:"12px",marginTop:"1rem",border:"1px solid #FFE4B5"},children:(0,_v.jsx)("p",{style:{color:"#555",margin:0,lineHeight:1.6},children:e.notes})}):null]}),e.photoUrl&&(0,_v.jsx)("div",{style:{padding:"1rem 1.5rem"},children:(0,_v.jsx)("img",{src:e.photoUrl,alt:"Date memory",style:{width:"100%",borderRadius:"12px",objectFit:"cover",maxHeight:"300px"}})}),e.stops&&e.stops.length>0&&(0,_v.jsxs)("div",{style:{padding:"0 1.5rem 1.5rem"},children:[(0,_v.jsx)("h4",{style:{fontSize:"1rem",fontWeight:"bold",color:"#FF6B35",marginBottom:"0.75rem"},children:"Stops Visited"}),(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.stops.map((e,t)=>(0,_v.jsx)("div",{style:{background:"white",padding:"0.75rem 1rem",borderRadius:"10px",border:"1px solid #FFE4B5",fontSize:"0.875rem",color:"#555"},children:e.name||e},t))})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.5rem",padding:"1rem 1.5rem",borderTop:"2px solid #FFE4B5",background:"rgba(255,255,255,0.5)"},children:[(0,_v.jsxs)("button",{onClick:()=>(e=>{d(e.id),f(e.notes||"")})(e),style:{flex:1,background:"#f0f0f0",border:"none",borderRadius:"10px",padding:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"600",color:"#555"},children:[(0,_v.jsx)($b,{size:18})," Edit"]}),(0,_v.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this memory?"))try{await Gg(Dm(kv,"dateMemories",e)),a(s.filter(t=>t.id!==e))}catch(t){console.error("Error deleting memory:",t),alert("Failed to delete memory")}})(e.id),style:{flex:1,background:"#fee2e2",border:"none",borderRadius:"10px",padding:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"600",color:"#dc2626"},children:[(0,_v.jsx)(db,{size:18})," Delete"]})]})]},e.id)})})]}),(0,_v.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]}):null}const ex=Le("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),tx=Le("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);function nx(e){let{currentUser:t,onClose:n,prefilledItinerary:r=null}=e;const[o,s]=(0,i.useState)("create"),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[d,h]=(0,i.useState)(!0),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(""),[b,x]=(0,i.useState)(""),[w,S]=(0,i.useState)(""),[k,E]=(0,i.useState)(""),[C,_]=(0,i.useState)([""]),[T,I]=(0,i.useState)(null),[j,R]=(0,i.useState)({}),[A,P]=(0,i.useState)({});(0,i.useEffect)(()=>{var e;if(r&&(I(r),g(r.title||"Surprise Date"),v("Full itinerary with ".concat((null===(e=r.stops)||void 0===e?void 0:e.length)||0," stops")),r.stops&&r.stops.length>0)){const e=r.stops[0];e.time&&S(e.time)}},[r]),(0,i.useEffect)(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0},[]),(0,i.useEffect)(()=>{t&&D()},[t]);const D=async()=>{if(t){h(!0);try{const e=Pm(kv,"surpriseDates"),n=kg(e,Cg("creatorId","==",t.uid)),r=(await Vg(n)).docs.map(e=>Ie({id:e.id},e.data()));l(r);const i=kg(e,Cg("partnerEmail","==",t.email)),o=await Vg(i),s=await Promise.all(o.docs.map(async e=>{const t=e.data(),n=await Bg(Dm(kv,"users",t.creatorId)),r=n.exists()?n.data().email:"Unknown";return Ie(Ie({id:e.id},t),{},{creatorEmail:r})}));u(s)}catch(e){console.error("Error loading surprises:",e)}h(!1)}},N=e=>{if(!e)return"Date TBD";return new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})},z=c.filter(e=>!e.accepted).length,L=e=>e&&(e.stops||e.activities)||[];return(0,_v.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",overflowY:"auto",WebkitOverflowScrolling:"touch",zIndex:1e4},children:[(0,_v.jsxs)("div",{style:{position:"sticky",top:0,background:"rgba(236, 72, 153, 0.95)",backdropFilter:"blur(10px)",padding:"1.5rem",paddingTop:"calc(1.5rem + env(safe-area-inset-top))",borderRadius:"0 0 30px 30px",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)(Ke,{size:32,color:"white"}),(0,_v.jsx)("h2",{style:{color:"white",fontSize:"1.8rem",fontWeight:"900",margin:0},children:"Surprise Date Mode"})]}),(0,_v.jsx)("button",{onClick:n,style:{background:"white",borderRadius:"50%",width:"44px",height:"44px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(0,0,0,0.2)",fontSize:"24px",fontWeight:"900",color:"#ec4899",lineHeight:1},children:"\u2715"})]}),(0,_v.jsx)("div",{style:{padding:"2rem 1.5rem"},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"20px",padding:"0.5rem",display:"flex",gap:"0.5rem",boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},children:[(0,_v.jsxs)("button",{onClick:()=>s("create"),style:{flex:1,padding:"1rem",borderRadius:"15px",border:"none",background:"create"===o?"linear-gradient(135deg, #ec4899 0%, #f472b6 100%)":"transparent",color:"create"===o?"white":"#666",fontWeight:"900",fontSize:"1rem",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,_v.jsx)(fb,{size:20}),"Create"]}),(0,_v.jsxs)("button",{onClick:()=>s("track"),style:{flex:1,padding:"1rem",borderRadius:"15px",border:"none",background:"track"===o?"linear-gradient(135deg, #ec4899 0%, #f472b6 100%)":"transparent",color:"track"===o?"white":"#666",fontWeight:"900",fontSize:"1rem",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",position:"relative"},children:[(0,_v.jsx)(ex,{size:20}),"Track",z>0&&(0,_v.jsx)("span",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#ef4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"900"},children:z})]})]})}),(0,_v.jsx)("div",{style:{padding:"0 1.5rem 2rem"},children:"create"===o?(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"30px",padding:"2rem",boxShadow:"0 20px 60px rgba(0,0,0,0.2)"},children:[(0,_v.jsxs)("div",{style:{marginBottom:"2rem",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)(Qe,{size:28,color:"#ec4899"}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"900",margin:0},children:T?"\ud83c\udf81 Share Itinerary as Surprise":"Plan a Surprise"})]}),T&&(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%)",borderRadius:"20px",padding:"1.5rem",marginBottom:"2rem",border:"2px solid #fbbf24"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[(0,_v.jsx)(Ue,{size:24,color:"#f59e0b"}),(0,_v.jsx)("h4",{style:{fontSize:"1.2rem",fontWeight:"900",margin:0,color:"#92400e"},children:"Full Date Itinerary Attached"})]}),(0,_v.jsxs)("p",{style:{margin:"0.5rem 0",fontSize:"0.95rem",color:"#78350f"},children:[(0,_v.jsxs)("strong",{children:[(e=>{var t,n;return e&&((null===(t=e.stops)||void 0===t?void 0:t.length)||(null===(n=e.activities)||void 0===n?void 0:n.length))||0})(T)," stops"]})," planned"]}),(0,_v.jsx)("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#92400e"},children:"Your partner will see the full itinerary when they reveal the surprise!"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:"900",marginBottom:"0.75rem",color:"#333"},children:[(0,_v.jsx)(ub,{size:20}),"Partner's Email ",(0,_v.jsx)("span",{style:{color:"#ef4444"},children:"*"})]}),(0,_v.jsx)("input",{type:"email",value:k,onChange:e=>E(e.target.value),placeholder:"partner@example.com",style:{width:"100%",padding:"1rem",borderRadius:"15px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box"}}),(0,_v.jsx)("p",{style:{fontSize:"0.85rem",color:"#666",margin:"0.5rem 0 0 0"},children:"They'll receive a surprise invitation"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsxs)("label",{style:{fontSize:"1rem",fontWeight:"900",marginBottom:"0.75rem",display:"block",color:"#333"},children:["Surprise Title ",(0,_v.jsx)("span",{style:{color:"#ef4444"},children:"*"})]}),(0,_v.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"e.g., Anniversary Adventure",style:{width:"100%",padding:"1rem",borderRadius:"15px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box"}})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:"900",marginBottom:"0.75rem",color:"#333"},children:[(0,_v.jsx)(Cv,{size:18}),"Your Secret Plan (Only you can see this)"]}),(0,_v.jsx)("textarea",{value:y,onChange:e=>v(e.target.value),placeholder:"What's the surprise? Keep it secret...",rows:4,style:{width:"100%",padding:"1rem",borderRadius:"15px",border:"2px solid #e5e7eb",fontSize:"1rem",resize:"vertical",boxSizing:"border-box",fontFamily:"inherit"}})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:"900",marginBottom:"0.75rem",color:"#333"},children:[(0,_v.jsx)(Pv,{size:18}),"Date"]}),(0,_v.jsx)("div",{style:{width:"100%",overflow:"hidden"},children:(0,_v.jsx)("input",{type:"date",value:b,onChange:e=>x(e.target.value),style:{width:"100%",maxWidth:"100%",padding:"1rem",borderRadius:"15px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",marginBottom:"1rem",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"}})}),(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:"900",marginBottom:"0.75rem",color:"#333"},children:[(0,_v.jsx)(Oe,{size:18}),"Time"]}),(0,_v.jsx)("div",{style:{width:"100%",overflow:"hidden"},children:(0,_v.jsx)("input",{type:"time",value:w,onChange:e=>S(e.target.value),style:{width:"100%",maxWidth:"100%",padding:"1rem",borderRadius:"15px",border:"2px solid #e5e7eb",fontSize:"1rem",boxSizing:"border-box",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"}})})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem",fontWeight:"900",marginBottom:"0.5rem",color:"#333"},children:"\ud83d\udca1 Hints for your partner (optional)"}),(0,_v.jsx)("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"1rem"},children:"Your partner can unlock these hints one by one"}),C.map((e,t)=>(0,_v.jsxs)("div",{style:{marginBottom:"0.75rem",display:"flex",gap:"0.5rem"},children:[(0,_v.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...C];n[e]=t,_(n)})(t,e.target.value),placeholder:"Hint ".concat(t+1),style:{flex:1,padding:"1rem",borderRadius:"15px",border:"2px solid #e5e7eb",fontSize:"1rem"}}),C.length>1&&(0,_v.jsx)("button",{onClick:()=>(e=>{_(C.filter((t,n)=>n!==e))})(t),style:{padding:"1rem",borderRadius:"15px",border:"none",background:"#fee2e2",color:"#dc2626",cursor:"pointer",fontSize:"1rem"},children:"\xd7"})]},t)),C.length<5&&(0,_v.jsx)("button",{onClick:()=>{C.length<5&&_([...C,""])},style:{padding:"0.75rem 1.5rem",borderRadius:"15px",border:"2px dashed #d1d5db",background:"transparent",color:"#666",cursor:"pointer",fontSize:"1rem",fontWeight:"700",width:"100%"},children:"+ Add Hint"})]}),(0,_v.jsxs)("button",{onClick:async()=>{if(!m.trim())return void alert("Please enter a title for your surprise date");if(!k.trim())return void alert("Please enter your partner's email address");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)){p(!0);try{const e={creatorId:t.uid,creatorEmail:t.email,partnerEmail:k.toLowerCase().trim(),title:m.trim(),description:y.trim(),scheduledDate:b||null,scheduledTime:w||null,hints:C.filter(e=>e.trim()),itinerary:T||null,revealed:!1,accepted:!1,createdAt:(new Date).toISOString(),status:"pending"};await Kg(Pm(kv,"surpriseDates"),e),g(""),v(""),x(""),S(""),E(""),_([""]),I(null),await D(),s("track"),alert("Surprise created successfully! Your partner will receive the invitation.")}catch(e){console.error("Error creating surprise:",e),alert("Failed to create surprise. Please try again.")}p(!1)}else alert("Please enter a valid email address")},disabled:f,style:{width:"100%",padding:"1.25rem",borderRadius:"20px",border:"none",background:f?"#d1d5db":"linear-gradient(135deg, #ec4899 0%, #f472b6 100%)",color:"white",fontSize:"1.2rem",fontWeight:"900",cursor:f?"not-allowed":"pointer",boxShadow:"0 10px 30px rgba(236,72,153,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[(0,_v.jsx)(Ke,{size:24}),f?"Creating...":"\ud83c\udf81 Create & Send Surprise"]})]}):(0,_v.jsxs)("div",{children:[c.length>0&&(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsxs)("h3",{style:{color:"white",fontSize:"1.5rem",fontWeight:"900",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,_v.jsx)(Ke,{size:28}),"Surprises for You"]}),c.map(e=>{const t=(e=>{if(!e)return null;const t=new Date(e)-new Date,n=Math.ceil(t/864e5);if(n<0)return"Past";if(0===n)return"Today!";if(1===n)return"1 day";if(n<7)return"".concat(n," days");const r=Math.ceil(t/36e5);return r<24?"".concat(r," hours"):"".concat(n," days")})(e.scheduledDate),n=e.revealed,r=e.accepted,i=L(e.itinerary);return(0,_v.jsxs)("div",{style:{background:n?"linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%)":"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",borderRadius:"25px",padding:"2rem",marginBottom:"1.5rem",boxShadow:"0 15px 40px rgba(0,0,0,0.2)",border:n?"3px solid #fbbf24":"3px solid #ec4899"},children:[(0,_v.jsx)("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:n?(0,_v.jsx)(tx,{size:48,color:"#f59e0b",strokeWidth:3}):(0,_v.jsx)(Cv,{size:48,color:"#ec4899",strokeWidth:3})}),(0,_v.jsxs)("h4",{style:{fontSize:"1.8rem",fontWeight:"900",margin:"0 0 0.5rem 0",color:n?"#92400e":"#831843",textAlign:"center"},children:[e.title," ",n?"\ud83c\udf89":"\ud83c\udf81"]}),(0,_v.jsxs)("p",{style:{textAlign:"center",color:n?"#78350f":"#be185d",fontSize:"0.95rem",marginBottom:"1.5rem"},children:["From: ",(0,_v.jsx)("strong",{children:e.creatorEmail})]}),t&&!n&&(0,_v.jsxs)("div",{style:{background:"rgba(255,255,255,0.7)",borderRadius:"20px",padding:"1.5rem",textAlign:"center",marginBottom:"1.5rem"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",fontWeight:"900",color:"#ec4899"},children:t}),e.scheduledDate&&(0,_v.jsxs)("div",{style:{fontSize:"1rem",color:"#831843",marginTop:"0.5rem"},children:[N(e.scheduledDate),e.scheduledTime&&" at ".concat(e.scheduledTime)]})]}),n&&e.scheduledDate&&(0,_v.jsx)("div",{style:{background:"rgba(255,255,255,0.7)",borderRadius:"20px",padding:"1rem",textAlign:"center",marginBottom:"1.5rem"},children:(0,_v.jsxs)("div",{style:{fontSize:"1.2rem",fontWeight:"900",color:"#92400e"},children:[N(e.scheduledDate),e.scheduledTime&&" at ".concat(e.scheduledTime)]})}),e.hints&&e.hints.length>0&&(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsx)("h5",{style:{fontSize:"1.1rem",fontWeight:"900",marginBottom:"0.75rem",color:n?"#92400e":"#831843"},children:"\ud83d\udca1 Hints:"}),e.hints.map((t,r)=>{const i=n||A["".concat(e.id,"-").concat(r)];return(0,_v.jsx)("div",{style:{background:i?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.5)",borderRadius:"15px",padding:"1rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:i?(0,_v.jsx)("span",{style:{flex:1,color:"#333"},children:t}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("span",{style:{flex:1,color:"#999"},children:["\ud83d\udd12 Hint ",r+1]}),(0,_v.jsx)("button",{onClick:()=>{return t=e.id,n=r,void P(e=>Ie(Ie({},e),{},{["".concat(t,"-").concat(n)]:!0}));var t,n},style:{padding:"0.5rem 1rem",borderRadius:"10px",border:"none",background:"#ec4899",color:"white",fontSize:"0.9rem",fontWeight:"700",cursor:"pointer"},children:"Unlock"})]})},r)})]}),n&&e.description&&(0,_v.jsxs)("div",{style:{background:"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"1.5rem",marginBottom:"1.5rem",border:"2px solid #fbbf24"},children:[(0,_v.jsxs)("h5",{style:{fontSize:"1.1rem",fontWeight:"900",marginBottom:"0.75rem",color:"#92400e",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Qe,{size:20}),"The Secret:"]}),(0,_v.jsx)("p",{style:{margin:0,color:"#78350f",lineHeight:"1.6"},children:e.description})]}),n&&i.length>0&&(0,_v.jsxs)("div",{style:{background:"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"1.5rem",marginBottom:"1.5rem",border:"2px solid #fbbf24"},children:[(0,_v.jsxs)("h5",{style:{fontSize:"1.2rem",fontWeight:"900",marginBottom:"1rem",color:"#92400e",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Ue,{size:22}),"Full Date Itinerary:"]}),i.map((e,t)=>{var n,r,i,o,s;return(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"15px",padding:"1.25rem",marginBottom:"1rem",border:"2px solid #fbbf24",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"0.75rem"},children:[(0,_v.jsx)("div",{style:{background:"#fef3c7",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},children:e.icon||e.emoji||"\ud83d\udccd"}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsxs)("h6",{style:{fontSize:"1.1rem",fontWeight:"900",margin:"0 0 0.25rem 0",color:"#92400e"},children:[e.time&&"".concat(e.time," - "),(null===(n=e.place)||void 0===n?void 0:n.name)||e.name||e.title]}),(0,_v.jsxs)("p",{style:{fontSize:"0.9rem",color:"#78350f",margin:"0.25rem 0"},children:["\ud83d\udccd ",(null===(r=e.place)||void 0===r?void 0:r.vicinity)||e.address||"Address not available"]}),e.description&&(0,_v.jsx)("p",{style:{fontSize:"0.9rem",color:"#92400e",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:e.description})]})]}),((null===(i=e.place)||void 0===i?void 0:i.place_id)||e.place_id)&&(0,_v.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent((null===(o=e.place)||void 0===o?void 0:o.name)||e.name||e.title),"&query_place_id=").concat((null===(s=e.place)||void 0===s?void 0:s.place_id)||e.place_id),target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#fef3c7",color:"#92400e",borderRadius:"10px",textDecoration:"none",fontSize:"0.9rem",fontWeight:"700",marginTop:"0.75rem"},children:[(0,_v.jsx)(Ue,{size:16}),"View on Map",(0,_v.jsx)(We,{size:14})]})]},t)})]}),!n&&!r&&(0,_v.jsxs)("button",{onClick:()=>(async e=>{try{await Hg(Dm(kv,"surpriseDates",e),{accepted:!0,status:"accepted"}),await D()}catch(t){console.error("Error accepting surprise:",t),alert("Failed to accept surprise")}})(e.id),style:{width:"100%",padding:"1.25rem",borderRadius:"20px",border:"none",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",fontSize:"1.2rem",fontWeight:"900",cursor:"pointer",boxShadow:"0 8px 25px rgba(16,185,129,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[(0,_v.jsx)(Me,{size:24}),"Accept Surprise"]}),!n&&r&&(0,_v.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to reveal this surprise now?"))try{await Hg(Dm(kv,"surpriseDates",e),{revealed:!0,revealedAt:(new Date).toISOString(),status:"revealed"}),await D()}catch(t){console.error("Error revealing surprise:",t),alert("Failed to reveal surprise")}})(e.id),style:{width:"100%",padding:"1.25rem",borderRadius:"20px",border:"none",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",fontSize:"1.2rem",fontWeight:"900",cursor:"pointer",boxShadow:"0 8px 25px rgba(245,158,11,0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[(0,_v.jsx)(tx,{size:24}),"Reveal Surprise Now!"]})]},e.id)})]}),a.length>0&&(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("h3",{style:{color:"white",fontSize:"1.5rem",fontWeight:"900",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,_v.jsx)(ex,{size:28}),"My Surprises"]}),a.map(e=>{const t=(e=>e.revealed?{text:"\u2713 Revealed",color:"#10b981"}:e.accepted?{text:"\ud83d\udc40 Accepted",color:"#3b82f6"}:{text:"\ud83d\udcec Pending",color:"#f59e0b"})(e),n=L(e.itinerary);return(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"25px",padding:"1.75rem",marginBottom:"1.5rem",boxShadow:"0 15px 40px rgba(0,0,0,0.2)"},children:[(0,_v.jsx)("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"20px",background:t.color,color:"white",fontSize:"0.9rem",fontWeight:"900",marginBottom:"1rem"},children:t.text}),(0,_v.jsx)("h4",{style:{fontSize:"1.5rem",fontWeight:"900",margin:"0 0 1rem 0",color:"#333"},children:e.title}),(0,_v.jsxs)("p",{style:{margin:"0.5rem 0",color:"#666"},children:[(0,_v.jsx)("strong",{children:"Partner:"})," ",e.partnerEmail]}),e.scheduledDate&&(0,_v.jsxs)("p",{style:{margin:"0.5rem 0",color:"#666"},children:[(0,_v.jsx)("strong",{children:"Date:"})," ",N(e.scheduledDate),e.scheduledTime&&" at ".concat(e.scheduledTime)]}),e.description&&(0,_v.jsx)("div",{style:{background:"#fef3c7",borderRadius:"15px",padding:"1rem",margin:"1rem 0",border:"2px solid #fbbf24"},children:(0,_v.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#78350f",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Cv,{size:16}),(0,_v.jsx)("strong",{children:"Your secret:"})," ",e.description]})}),n.length>0&&(0,_v.jsx)("div",{style:{background:"#f0fdf4",borderRadius:"15px",padding:"1rem",margin:"1rem 0",border:"2px solid #86efac"},children:(0,_v.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#166534",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Ue,{size:16}),(0,_v.jsx)("strong",{children:"Full itinerary attached:"})," ",n.length," stops"]})}),e.hints&&e.hints.length>0&&(0,_v.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,_v.jsx)("p",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#666",marginBottom:"0.5rem"},children:"Hints you provided:"}),e.hints.map((e,t)=>(0,_v.jsxs)("div",{style:{background:"#f3f4f6",borderRadius:"10px",padding:"0.75rem",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},children:[t+1,". ",e]},t))]}),(0,_v.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this surprise?"))try{await Gg(Dm(kv,"surpriseDates",e)),await D()}catch(t){console.error("Error deleting surprise:",t),alert("Failed to delete surprise")}})(e.id),style:{marginTop:"1rem",padding:"0.75rem 1.5rem",borderRadius:"15px",border:"none",background:"#fee2e2",color:"#dc2626",fontSize:"0.95rem",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(db,{size:18}),"Delete Surprise"]})]},e.id)})]}),0===c.length&&0===a.length&&!d&&(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"25px",padding:"3rem 2rem",textAlign:"center",boxShadow:"0 15px 40px rgba(0,0,0,0.2)"},children:[(0,_v.jsx)(Ke,{size:64,color:"#d1d5db",style:{marginBottom:"1rem"}}),(0,_v.jsx)("h4",{style:{fontSize:"1.3rem",fontWeight:"900",color:"#666",marginBottom:"0.5rem"},children:"No Surprises Yet"}),(0,_v.jsx)("p",{style:{color:"#999",fontSize:"1rem"},children:"Create your first surprise date or wait for one to arrive!"})]})]})})]})}function rx(e){let{currentUser:t,streakData:n,onClose:r}=e;const[o,s]=(0,i.useState)(!0),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)("");(0,i.useEffect)(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0},[]),(0,i.useEffect)(()=>{m()},[t]);const m=async()=>{if(t){s(!0);try{const e=Dm(kv,"dateStreaks",t.uid),n=await Bg(e);if(n.exists())l(n.data());else{const t={currentStreak:0,longestStreak:0,totalDates:0,lastDateWeek:null,badges:[],goals:[],weeklyChallenges:{}};await qg(e,t),l(t)}}catch(e){console.error("Error loading streak data:",e),l(n||{currentStreak:0,longestStreak:0,totalDates:0,badges:[],goals:[]})}s(!1)}};if(!t)return null;const g=a||n||{currentStreak:0,longestStreak:0,totalDates:0,badges:[],goals:[]};return(0,_v.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%)",zIndex:9999,overflow:"auto",paddingTop:"env(safe-area-inset-top)"},children:[(0,_v.jsx)("div",{style:{padding:"1rem"},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",maxWidth:"900px",width:"100%",margin:"0 auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%)",padding:"2rem",borderRadius:"24px 24px 0 0"},children:(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_v.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"bold",color:"white",margin:0},children:"\ud83d\udd25 Date Streaks & Goals"}),(0,_v.jsx)("button",{onClick:r,style:{background:"rgba(255,255,255,0.2)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"\xd7"})]})}),(0,_v.jsx)("div",{style:{padding:"2rem"},children:o?(0,_v.jsxs)("div",{style:{textAlign:"center",padding:"3rem"},children:[(0,_v.jsx)("div",{style:{width:"50px",height:"50px",border:"5px solid #f3f4f6",borderTop:"5px solid #FF6B35",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),(0,_v.jsx)("p",{style:{marginTop:"1rem",color:"#666"},children:"Loading your stats..."})]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #FF6B3520 0%, #FF8C4210 100%)",padding:"3rem 2rem",borderRadius:"20px",marginBottom:"2rem",border:"3px solid #FF6B3540",textAlign:"center",boxShadow:"0 10px 30px rgba(255,107,53,0.2)"},children:[(0,_v.jsx)("div",{style:{fontSize:"5rem",marginBottom:"1rem"},children:"\ud83d\udd25"}),(0,_v.jsx)("h3",{style:{fontSize:"4rem",fontWeight:"900",color:"#FF6B35",margin:0,lineHeight:1},children:g.currentStreak||0}),(0,_v.jsx)("p",{style:{color:"#666",fontSize:"1.25rem",marginTop:"0.5rem",fontWeight:"600"},children:"Day Streak"}),(0,_v.jsx)("p",{style:{color:"#999",fontSize:"0.875rem",marginTop:"1rem"},children:"Keep it going! Complete a date each week to maintain your streak"})]}),(0,_v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"2.5rem"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",padding:"2rem",borderRadius:"16px",textAlign:"center",border:"2px solid #dee2e6"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:"\ud83d\udcc5"}),(0,_v.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:"bold",margin:0,color:"#FF6B35"},children:g.totalDates||0}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#666",marginTop:"0.5rem",fontWeight:"600"},children:"Total Dates"})]}),(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",padding:"2rem",borderRadius:"16px",textAlign:"center",border:"2px solid #dee2e6"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:"\ud83c\udfc6"}),(0,_v.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:"bold",margin:0,color:"#FFD700"},children:g.longestStreak||0}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#666",marginTop:"0.5rem",fontWeight:"600"},children:"Longest Streak"})]})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2.5rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.75rem",fontWeight:"bold",margin:0,color:"#111827"},children:"\ud83c\udfaf Your Goals"}),(0,_v.jsx)("button",{onClick:()=>u(!c),style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"none",cursor:"pointer",fontWeight:"bold",fontSize:"0.875rem",boxShadow:"0 4px 12px rgba(16,185,129,0.3)"},children:c?"\u2715 Cancel":"+ Add Goal"})]}),c&&(0,_v.jsxs)("div",{style:{background:"#f0fdf4",padding:"1.5rem",borderRadius:"16px",marginBottom:"1.5rem",border:"2px solid #86efac"},children:[(0,_v.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,_v.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#065f46"},children:"Goal Title"}),(0,_v.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"e.g., Complete 10 dates this month",style:{width:"100%",padding:"0.875rem",border:"2px solid #86efac",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"}})]}),(0,_v.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,_v.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#065f46"},children:"Target (number of dates)"}),(0,_v.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9,]*",value:f,onChange:e=>p(e.target.value),placeholder:"10",min:"1",style:{width:"100%",padding:"0.875rem",border:"2px solid #86efac",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"}})]}),(0,_v.jsx)("button",{onClick:async()=>{if(!d.trim()||!f||!t)return void alert("Please fill in all fields");const e=parseInt(f.replace(/,/g,""));if(isNaN(e)||e<1)alert("Please enter a valid target number");else try{const n={id:Date.now().toString(),title:d.trim(),target:e,progress:0,completed:!1,createdAt:(new Date).toISOString()},r=[...(null===a||void 0===a?void 0:a.goals)||[],n],i=Dm(kv,"dateStreaks",t.uid);await Hg(i,{goals:r}),l(Ie(Ie({},a),{},{goals:r})),h(""),p(""),u(!1),alert("\ud83c\udfaf Goal added!")}catch(n){console.error("Error adding goal:",n),alert("Failed to add goal. Please try again.")}},style:{width:"100%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1rem",borderRadius:"12px",border:"none",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"},children:"Create Goal"})]}),g.goals&&g.goals.length>0?(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:g.goals.map(e=>{const n=Math.min(e.progress/e.target*100,100);return(0,_v.jsxs)("div",{style:{background:e.completed?"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)":"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",padding:"1.75rem",borderRadius:"16px",border:e.completed?"2px solid #10b981":"2px solid #dee2e6",boxShadow:e.completed?"0 4px 20px rgba(16,185,129,0.2)":"none"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[(0,_v.jsx)("h4",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0,textDecoration:e.completed?"line-through":"none",color:e.completed?"#059669":"#111827",flex:1},children:e.title}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.completed&&(0,_v.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u2713"}),(0,_v.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this goal?"))try{const n=a.goals.filter(t=>t.id!==e),r=Dm(kv,"dateStreaks",t.uid);await Hg(r,{goals:n}),l(Ie(Ie({},a),{},{goals:n})),alert("Goal deleted")}catch(n){console.error("Error deleting goal:",n),alert("Failed to delete goal")}})(e.id),style:{background:"#fee2e2",color:"#dc2626",border:"none",borderRadius:"8px",width:"32px",height:"32px",cursor:"pointer",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"\xd7"})]})]}),(0,_v.jsx)("div",{style:{background:e.completed?"#10b98140":"rgba(0,0,0,0.1)",height:"12px",borderRadius:"6px",overflow:"hidden",marginBottom:"0.75rem"},children:(0,_v.jsx)("div",{style:{background:e.completed?"linear-gradient(90deg, #10b981 0%, #059669 100%)":"linear-gradient(90deg, #FF6B35 0%, #FF8C42 100%)",height:"100%",width:"".concat(n,"%"),transition:"width 0.5s ease"}})}),(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_v.jsxs)("p",{style:{fontSize:"0.875rem",color:"#666",margin:0,fontWeight:"600"},children:[e.progress," / ",e.target," dates"]}),(0,_v.jsxs)("p",{style:{fontSize:"0.875rem",color:e.completed?"#059669":"#FF6B35",margin:0,fontWeight:"bold"},children:[Math.round(n),"%"]})]})]},e.id)})}):(0,_v.jsxs)("div",{style:{background:"#f8f9fa",padding:"3rem 2rem",borderRadius:"16px",textAlign:"center",border:"2px dashed #dee2e6"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\ud83c\udfaf"}),(0,_v.jsx)("p",{style:{fontSize:"1.125rem",color:"#666",marginBottom:"0.5rem",fontWeight:"600"},children:"No goals yet"}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#999"},children:"Set your first goal to track your dating progress!"})]})]}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("h3",{style:{fontSize:"1.75rem",fontWeight:"bold",marginBottom:"1.5rem",color:"#111827"},children:"\ud83c\udfc5 Badges & Achievements"}),g.badges&&g.badges.length>0?(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"1rem"},children:g.badges.map((e,t)=>(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",padding:"1.5rem 1rem",borderRadius:"16px",color:"white",fontWeight:"bold",boxShadow:"0 8px 20px rgba(255,215,0,0.4)",textAlign:"center",fontSize:"0.875rem"},children:[(0,_v.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\ud83c\udfc6"}),e]},t))}):(0,_v.jsxs)("div",{style:{background:"#f8f9fa",padding:"3rem 2rem",borderRadius:"16px",textAlign:"center",border:"2px dashed #dee2e6"},children:[(0,_v.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\ud83c\udfc5"}),(0,_v.jsx)("p",{style:{fontSize:"1.125rem",color:"#666",marginBottom:"0.5rem",fontWeight:"600"},children:"No badges yet"}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#999"},children:"Complete dates to earn badges and achievements!"})]})]})]})})]})}),(0,_v.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      "})]})}const ix=Le("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ox=Le("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),sx=Le("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function ax(e){let{user:t,userData:n,onClose:r,onShowTerms:o,onShowPrivacy:s}=e;const[a,l]=(0,i.useState)(!1),c=(null===n||void 0===n?void 0:n.subscriptionStatus)||"free",u=null===n||void 0===n?void 0:n.trialEndsAt,d=null===n||void 0===n?void 0:n.currentPeriodEnd,h=null===n||void 0===n?void 0:n.subscriptionWillCancelAt,f=u?Math.ceil((new Date(u)-new Date)/864e5):0;return(0,_v.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",zIndex:1e3},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[(0,_v.jsxs)("div",{style:{padding:"2rem",borderBottom:"2px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)(ix,{size:32,style:{color:"#ec4899"}}),(0,_v.jsx)("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:"bold"},children:"Subscription Management"})]}),(0,_v.jsx)("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"8px"},children:(0,_v.jsx)(Rv,{size:24})})]}),(0,_v.jsxs)("div",{style:{padding:"2rem"},children:[(0,_v.jsxs)("div",{style:{background:"premium"===c?"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)":"trial"===c?"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)":"#f3f4f6",padding:"1.5rem",borderRadius:"16px",marginBottom:"2rem",border:"free"===c?"2px dashed #d1d5db":"2px solid #fbbf24"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,_v.jsx)("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",textTransform:"capitalize"},children:"trial"===c?"\ud83c\udf89 Trial Plan":"premium"===c?"\ud83d\udc51 Premium Plan":"\ud83c\udd93 Free Plan"}),(0,_v.jsx)("span",{style:{background:"premium"===c?"#10b981":"trial"===c?"#3b82f6":"#6b7280",color:"white",padding:"0.375rem 0.75rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600"},children:c.toUpperCase()})]}),"trial"===c&&(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,_v.jsx)(Pv,{size:18,style:{color:"#3b82f6"}}),(0,_v.jsxs)("span",{style:{fontWeight:"600"},children:[f," days remaining in trial"]})]}),(0,_v.jsxs)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem",color:"#4b5563"},children:["Trial ends: ",new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,_v.jsx)("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.875rem",color:"#4b5563",fontWeight:"600"},children:"\ud83d\udcb3 You'll be charged $9.99/month after trial ends"})]}),"premium"===c&&(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,_v.jsx)(ox,{size:18,style:{color:"#10b981"}}),(0,_v.jsx)("span",{style:{fontWeight:"600"},children:"$9.99/month"})]}),d&&(0,_v.jsxs)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem",color:"#4b5563"},children:["Next billing date: ",new Date(d).toLocaleDateString()]})]}),"free"===c&&(0,_v.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem",color:"#4b5563"},children:"Upgrade to unlock unlimited dates and premium features"}),h&&(0,_v.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fef2f2",borderRadius:"10px",border:"2px solid #fecaca"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(sx,{size:20,style:{color:"#dc2626"}}),(0,_v.jsxs)("span",{style:{color:"#dc2626",fontWeight:"600",fontSize:"0.875rem"},children:["Subscription will cancel on ",new Date(h).toLocaleDateString()]})]}),(0,_v.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem",color:"#7f1d1d"},children:"You'll keep access until this date, then revert to Free plan."})]})]}),("trial"===c||"premium"===c)&&(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,_v.jsxs)("button",{onClick:async()=>{l(!0);try{const e=await fetch("".concat("https://datemaker-backend-1.onrender.com","/api/create-portal-session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.uid})});if(!e.ok)throw new Error("Failed to create portal session");const n=await e.json();window.location.href=n.url}catch(e){console.error("Error opening billing portal:",e),alert("Failed to open billing portal. Please try again.")}finally{l(!1)}},disabled:a,style:{width:"100%",padding:"1rem",background:"linear-gradient(to right, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 10px rgba(59, 130, 246, 0.3)"},children:[(0,_v.jsx)(ix,{size:20}),a?"Opening...":"Manage Subscription & Billing"]}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center",margin:0},children:"Update payment method, cancel subscription, or view invoices"})]}),(0,_v.jsxs)("div",{style:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"2px solid #f3f4f6",textAlign:"center"},children:[(0,_v.jsxs)("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280"},children:["By subscribing, you agree to our"," ",(0,_v.jsx)("span",{onClick:o,style:{color:"#ec4899",fontWeight:"600",textDecoration:"none",cursor:"pointer"},onMouseEnter:e=>e.target.style.textDecoration="underline",onMouseLeave:e=>e.target.style.textDecoration="none",children:"Terms of Service"})," ","and"," ",(0,_v.jsx)("span",{onClick:s,style:{color:"#ec4899",fontWeight:"600",textDecoration:"none",cursor:"pointer"},onMouseEnter:e=>e.target.style.textDecoration="underline",onMouseLeave:e=>e.target.style.textDecoration="none",children:"Privacy Policy"})]}),(0,_v.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.75rem",color:"#9ca3af"},children:"Payments processed securely by Stripe"})]})]})]})})}function lx(e){let{onClose:t}=e;return(0,_v.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",zIndex:2e3,overflow:"auto"},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",position:"relative"},children:[(0,_v.jsxs)("div",{style:{position:"sticky",top:0,background:"white",padding:"2rem",borderBottom:"2px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:10},children:[(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0,background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Terms of Service"}),(0,_v.jsx)("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"8px"},children:(0,_v.jsx)(Rv,{size:24})})]}),(0,_v.jsxs)("div",{style:{padding:"2rem 3rem 3rem 3rem",lineHeight:"1.8",color:"#374151"},children:[(0,_v.jsx)("p",{style:{color:"#6b7280",marginBottom:"2rem"},children:"Last Updated: November 11, 2025"}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"1. Acceptance of Terms"}),(0,_v.jsx)("p",{children:'By accessing and using DateMaker ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"2. Description of Service"}),(0,_v.jsx)("p",{children:"DateMaker is a dating itinerary planning platform that helps users discover and plan date activities. The Service includes both free and premium subscription tiers with different feature access levels."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"3. Account Registration"}),(0,_v.jsx)("p",{children:"To use certain features of the Service, you must register for an account. You agree to:"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsx)("li",{children:"Provide accurate, current, and complete information during registration"}),(0,_v.jsx)("li",{children:"Maintain and promptly update your account information"}),(0,_v.jsx)("li",{children:"Maintain the security of your password and account"}),(0,_v.jsx)("li",{children:"Accept responsibility for all activities under your account"}),(0,_v.jsx)("li",{children:"Immediately notify us of any unauthorized use of your account"})]})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"4. Subscription and Billing"}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.1 Free Trial"}),(0,_v.jsx)("p",{children:"New users are eligible for a 7-day free trial of the Premium subscription. You will not be charged during the trial period. At the end of the trial, you will be automatically charged $9.99/month unless you cancel before the trial ends."}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.2 Premium Subscription"}),(0,_v.jsx)("p",{children:"Premium subscriptions are billed monthly at $9.99/month. By subscribing, you authorize us to charge your payment method on a recurring basis until you cancel."}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.3 Cancellation"}),(0,_v.jsx)("p",{children:"You may cancel your subscription at any time through your account settings. Cancellations take effect at the end of the current billing period. No refunds are provided for partial subscription periods."}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.4 Payment Processing"}),(0,_v.jsx)("p",{children:"All payments are processed securely by Stripe, Inc. We do not store your complete credit card information. By providing payment information, you represent that you are authorized to use the payment method provided."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"5. User Conduct"}),(0,_v.jsx)("p",{children:"You agree not to use the Service to:"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsx)("li",{children:"Violate any applicable laws or regulations"}),(0,_v.jsx)("li",{children:"Infringe upon the rights of others"}),(0,_v.jsx)("li",{children:"Upload or transmit viruses or malicious code"}),(0,_v.jsx)("li",{children:"Spam, phish, or engage in other fraudulent activities"}),(0,_v.jsx)("li",{children:"Attempt to gain unauthorized access to the Service"}),(0,_v.jsx)("li",{children:"Collect or harvest personal data of other users"}),(0,_v.jsx)("li",{children:"Impersonate any person or entity"})]})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"6. Content and Intellectual Property"}),(0,_v.jsx)("p",{children:"The Service and its original content, features, and functionality are owned by DateMaker and are protected by international copyright, trademark, patent, trade secret, and other intellectual property laws."}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"6.1 User Content"}),(0,_v.jsx)("p",{children:"You retain ownership of content you submit to the Service (photos, preferences, etc.). By submitting content, you grant us a worldwide, non-exclusive, royalty-free license to use, reproduce, and display such content solely for the purpose of operating and improving the Service."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"7. Third-Party Services"}),(0,_v.jsx)("p",{children:"The Service integrates with third-party services including Google Maps, Ticketmaster, and Stripe. Your use of these services is subject to their respective terms of service and privacy policies. We are not responsible for the availability, accuracy, or content of third-party services."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"8. Disclaimers and Limitation of Liability"}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:'8.1 Service Provided "As Is"'}),(0,_v.jsx)("p",{children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.'}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"8.2 Limitation of Liability"}),(0,_v.jsx)("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, DATEMAKER SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"9. Indemnification"}),(0,_v.jsx)("p",{children:"You agree to indemnify, defend, and hold harmless DateMaker and its officers, directors, employees, and agents from any claims, liabilities, damages, losses, and expenses arising from your use of the Service or violation of these Terms."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"10. Termination"}),(0,_v.jsx)("p",{children:"We reserve the right to suspend or terminate your account and access to the Service at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties, or for any other reason."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"11. Changes to Terms"}),(0,_v.jsx)("p",{children:"We reserve the right to modify these Terms at any time. We will notify users of material changes via email or through the Service. Your continued use of the Service after changes constitutes acceptance of the modified Terms."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"12. Governing Law and Dispute Resolution"}),(0,_v.jsx)("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the United States, without regard to conflict of law principles. Any disputes arising from these Terms or the Service shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"13. Contact Information"}),(0,_v.jsx)("p",{children:"If you have questions about these Terms, please contact us at:"}),(0,_v.jsxs)("p",{style:{marginTop:"1rem",fontWeight:"600"},children:["Email: support@datemaker.app",(0,_v.jsx)("br",{}),"Address: [Your Business Address]"]})]}),(0,_v.jsxs)("section",{children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"14. Severability"}),(0,_v.jsx)("p",{children:"If any provision of these Terms is found to be unenforceable or invalid, that provision will be limited or eliminated to the minimum extent necessary so that these Terms will otherwise remain in full force and effect."})]})]})]})})}function cx(e){let{onClose:t}=e;return(0,_v.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",zIndex:2e3,overflow:"auto"},children:(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",position:"relative"},children:[(0,_v.jsxs)("div",{style:{position:"sticky",top:0,background:"white",padding:"2rem",borderBottom:"2px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:10},children:[(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0,background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Privacy Policy"}),(0,_v.jsx)("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"8px"},children:(0,_v.jsx)(Rv,{size:24})})]}),(0,_v.jsxs)("div",{style:{padding:"2rem 3rem 3rem 3rem",lineHeight:"1.8",color:"#374151"},children:[(0,_v.jsx)("p",{style:{color:"#6b7280",marginBottom:"2rem"},children:"Last Updated: November 11, 2025"}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"1. Introduction"}),(0,_v.jsx)("p",{children:'DateMaker ("we," "our," or "us") respects your privacy and is committed to protecting your personal data. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our Service.'})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"2. Information We Collect"}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"2.1 Information You Provide"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Account Information:"})," Email address, password (encrypted), profile photo"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Profile Data:"})," Name, preferences, hobbies, activities of interest"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Payment Information:"})," Billing details processed through Stripe (we do not store complete credit card numbers)"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Content:"})," Photos, date memories, saved locations, and itineraries"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Communications:"})," Messages sent through our platform, support inquiries"]})]}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"2.2 Automatically Collected Information"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Location Data:"})," Approximate location based on IP address or precise location if you grant permission"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Usage Data:"})," Pages visited, features used, time spent on the Service"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Device Information:"})," Browser type, operating system, device identifiers"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Cookies:"})," Session cookies, preference cookies, analytics cookies"]})]})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"3. How We Use Your Information"}),(0,_v.jsx)("p",{children:"We use collected information for the following purposes:"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Provide the Service:"})," Generate date itineraries, show nearby venues and events"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Process Payments:"})," Handle subscription billing through Stripe"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Personalization:"})," Customize recommendations based on your preferences"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Communication:"})," Send service updates, promotional emails, and support responses"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Analytics:"})," Understand usage patterns and improve the Service"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Security:"})," Detect and prevent fraud, abuse, and security incidents"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Legal Compliance:"})," Comply with applicable laws and regulations"]})]})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"4. Information Sharing and Disclosure"}),(0,_v.jsx)("p",{children:"We do not sell your personal information. We may share information in the following circumstances:"}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.1 Third-Party Service Providers"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Firebase:"})," Authentication, database, and cloud storage"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Stripe:"})," Payment processing and subscription management"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Google Maps:"})," Location services and venue information"]}),(0,_v.jsxs)("li",{children:[(0,_v.jsx)("strong",{children:"Ticketmaster:"})," Event discovery and ticketing information"]})]}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.2 Legal Requirements"}),(0,_v.jsx)("p",{children:"We may disclose your information if required by law, court order, or government request, or to protect our rights, property, or safety."}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"4.3 Business Transfers"}),(0,_v.jsx)("p",{children:"If we are involved in a merger, acquisition, or sale of assets, your information may be transferred as part of that transaction."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"5. Data Security"}),(0,_v.jsx)("p",{children:"We implement appropriate technical and organizational measures to protect your personal information:"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsx)("li",{children:"Encryption of data in transit (HTTPS/TLS)"}),(0,_v.jsx)("li",{children:"Encrypted storage of sensitive information"}),(0,_v.jsx)("li",{children:"Regular security audits and updates"}),(0,_v.jsx)("li",{children:"Access controls and authentication requirements"}),(0,_v.jsx)("li",{children:"Secure payment processing through PCI-compliant providers"})]}),(0,_v.jsx)("p",{style:{marginTop:"1rem"},children:"However, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security of your data."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"6. Your Rights and Choices"}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"6.1 Access and Control"}),(0,_v.jsx)("p",{children:"You have the right to:"}),(0,_v.jsxs)("ul",{style:{marginLeft:"2rem",marginTop:"0.5rem"},children:[(0,_v.jsx)("li",{children:"Access your personal information"}),(0,_v.jsx)("li",{children:"Correct inaccurate data"}),(0,_v.jsx)("li",{children:"Delete your account and data"}),(0,_v.jsx)("li",{children:"Export your data"}),(0,_v.jsx)("li",{children:"Object to processing of your data"}),(0,_v.jsx)("li",{children:"Opt-out of marketing communications"})]}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"6.2 California Privacy Rights (CCPA)"}),(0,_v.jsx)("p",{children:"California residents have additional rights including the right to know what personal information is collected, whether it is sold or disclosed, to opt-out of sales, to deletion, and to non-discrimination."}),(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1rem",marginBottom:"0.5rem"},children:"6.3 European Privacy Rights (GDPR)"}),(0,_v.jsx)("p",{children:"EU/EEA residents have rights under GDPR including access, rectification, erasure, restriction of processing, data portability, objection to processing, and withdrawal of consent."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"7. Data Retention"}),(0,_v.jsx)("p",{children:"We retain your personal information for as long as necessary to provide the Service. When you delete your account, we will delete or anonymize your personal information within 30 days, except where required for legal purposes."})]}),(0,_v.jsxs)("section",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"8. Age Policy"}),(0,_v.jsx)("p",{children:"Our Service is not intended for users under 13 years of age. We do not knowingly collect personal information from children under 13."})]}),(0,_v.jsxs)("section",{children:[(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:"9. Contact Us"}),(0,_v.jsx)("p",{children:"If you have questions about this Privacy Policy, please contact us at:"}),(0,_v.jsxs)("p",{style:{marginTop:"1rem",fontWeight:"600"},children:["Email: privacy@datemaker.app",(0,_v.jsx)("br",{}),"Address: [Your Business Address]"]})]})]})]})})}const ux=(0,xv.F3)("App",{web:()=>n.e(551).then(n.bind(n,551)).then(e=>new e.AppWeb)});function dx(){var e;const t=ee(),[n,r]=(0,i.useState)("en"),o=e=>((e,t)=>{var n;return(null===(n=kb[e])||void 0===n?void 0:n[t])||kb.en[t]||t})(n,e),s="rtl"===(null===(e=kb[n])||void 0===e?void 0:e.dir),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)("login"),[f,p]=(0,i.useState)("free"),[m,g]=(0,i.useState)(null),[y,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)(!1),[w,S]=(0,i.useState)(null),[k,E]=(0,i.useState)(""),[C,_]=(0,i.useState)(!1),[T,I]=(0,i.useState)(0),[j,R]=(0,i.useState)(!1),[A,P]=(0,i.useState)(!1),[D,N]=(0,i.useState)(null),z=(0,i.useRef)(null),[L,M]=(0,i.useState)(""),[O,F]=(0,i.useState)([]),[U,B]=(0,i.useState)([]),[W,V]=(0,i.useState)([]),[q,H]=(0,i.useState)(""),[G,K]=(0,i.useState)([]),[Y,Q]=(0,i.useState)(null),[X,J]=(0,i.useState)(!1),[$,Z]=(0,i.useState)(""),[te,ne]=(0,i.useState)(!1),[re,ie]=(0,i.useState)(!1),[oe,se]=(0,i.useState)(!0),[ae,le]=(0,i.useState)([]),[ce,ue]=(0,i.useState)(!1),[de,he]=(0,i.useState)(!0),[fe,pe]=(0,i.useState)(""),[me,ge]=(0,i.useState)("anytime"),[ye,ve]=(0,i.useState)("6:00 PM"),[be,xe]=(0,i.useState)("6"),[we,Se]=(0,i.useState)(null),[ke,Ee]=(0,i.useState)(!1),[Ce,_e]=(0,i.useState)(""),[Te,je]=(0,i.useState)(""),[Re,Ae]=(0,i.useState)(""),[Pe,De]=(0,i.useState)(""),[Ne,ze]=(0,i.useState)(!1),[Le,Xe]=(0,i.useState)(null),[Je,$e]=(0,i.useState)(!1),[Ze,et]=(0,i.useState)(null),[tt,nt]=(0,i.useState)([]),[rt,it]=(0,i.useState)("normal"),[ot,st]=(0,i.useState)(!1),[at,lt]=(0,i.useState)(null),[ct,ut]=(0,i.useState)(!1),[dt,ht]=(0,i.useState)("create"),[ft,pt]=(0,i.useState)(null),[mt,gt]=(0,i.useState)(null),[yt,vt]=(0,i.useState)(!1),[bt,xt]=(0,i.useState)("create"),[wt,St]=(0,i.useState)(null),[kt,Et]=(0,i.useState)(0),[Ct,_t]=(0,i.useState)(!1),[Tt,jt]=(0,i.useState)({currentStreak:0,longestStreak:0,lastDateWeek:null,totalDates:0,badges:[],goals:[],weeklyChallenges:{}});(0,i.useEffect)(()=>{console.log("============================"),console.log("\ud83d\udd0d Subscription Status:",f),console.log("\ud83d\udd0d User Email:",null===a||void 0===a?void 0:a.email),console.log("\ud83d\udd0d Email Verified:",null===a||void 0===a?void 0:a.emailVerified),console.log("\ud83d\udd0d Banner should show:","free"===f),console.log("============================")},[f,a]),(0,i.useEffect)(()=>{const e=localStorage.getItem("datemaker_language")||"en";r(e)},[]),(0,i.useLayoutEffect)(()=>{if(te&&Y){const e=document.getElementById("root");e&&(e.scrollTop=0),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,z.current&&z.current.scrollIntoView({behavior:"instant",block:"start"})}},[te,Y]),(0,i.useEffect)(()=>{const e=ux.addListener("appUrlOpen",async e=>{if(console.log("\ud83d\udd17 Deep link received:",e.url),e.url.includes("checkout-success")){if(console.log("\u2705 Checkout successful!"),Dt(!1),await new Promise(e=>setTimeout(e,2e3)),a)try{const e=Dm(kv,"users",a.uid),t=await Bg(e);if(t.exists()){const e=t.data();p(e.subscriptionStatus||"free"),console.log("\u2705 Subscription status:",e.subscriptionStatus),"trial"!==e.subscriptionStatus&&"premium"!==e.subscriptionStatus||alert("\ud83c\udf89 Welcome to DateMaker Premium! Your 7-day free trial has started.")}}catch($){console.error("Error refreshing subscription:",$)}}else e.url.includes("checkout-cancelled")&&(console.log("\u274c Checkout was cancelled"),Dt(!1))});return()=>{e.remove()}},[a]);const[Rt,At]=(0,i.useState)({messages:0,requests:0,total:0}),[Pt,Dt]=(0,i.useState)(!1),Nt="https://datemaker-backend-1.onrender.com",zt=(0,i.useCallback)(async()=>{if(!a)return null;try{return await a.getIdToken()}catch($){return console.error("Error getting auth token:",$),null}},[a]),Lt=(e,t)=>{const n=e.split(" ");if(2!==n.length)return e;const[r,i]=n,o=r.split(":");if(2!==o.length)return e;let s=parseInt(o[0]);const a=parseInt(o[1])||0;"PM"===i&&12!==s?s+=12:"AM"===i&&12===s&&(s=0),s+=Math.floor(t);let l=a+Math.round(t%1*60);l>=60&&(s+=Math.floor(l/60),l%=60),s>=24&&(s%=24);let c="AM",u=s;u>=12&&(c="PM",u>12&&(u-=12)),0===u&&(u=12);const d=l>0?":".concat(l.toString().padStart(2,"0")):":00";return"".concat(u).concat(d," ").concat(c)},Mt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("\n\ud83c\udfaf ============ CREATING ITINERARY ============"),console.log("\ud83d\udce5 Input: ".concat(e.length," places")),console.log('\ud83d\udd11 Keywords: "'.concat(t,'"'));const r=e.map(e=>{const n=((e,t)=>{var n;const r=(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())||"",i=e.types||[],o=t.toLowerCase();if(console.log("\ud83d\udd0d Categorizing: ".concat(e.name),{types:i,name:r,keyword:o}),e.isEvent)return console.log("  \u2705 EVENT"),{category:"event",subcategory:"event",priority:10};if(i.includes("night_club")||r.includes("nightclub")||r.includes("night club")||r.includes("dance club"))return console.log("  \u2705 NIGHTCLUB \u2192 nightlife"),{category:"nightlife",subcategory:"nightclub",priority:10};if((i.includes("bar")||r.includes(" bar ")||r.endsWith(" bar")||r.startsWith("bar ")||r.includes("pub")||r.includes("tavern")||r.includes("brewery")||r.includes("cocktail")||r.includes("lounge"))&&!(r.includes("lunch")||r.includes("sandwich")||r.includes("deli")||r.includes("cafe")||i.includes("meal_takeaway")||i.includes("meal_delivery")))return console.log("  \u2705 BAR \u2192 drinks"),{category:"drinks",subcategory:"bar",priority:9};if(r.includes("wine")||r.includes("winery")||r.includes("vineyard"))return console.log("  \u2705 WINERY \u2192 drinks"),{category:"drinks",subcategory:"wine",priority:9};if(i.includes("cafe")||i.includes("coffee_shop")||r.includes("cafe")||r.includes("caf\xe9")||r.includes("coffee"))return console.log("  \u2705 CAFE"),{category:"cafe",subcategory:"cafe",priority:9};if(i.includes("restaurant")||i.includes("meal_delivery")||i.includes("meal_takeaway")||r.includes("restaurant")||r.includes("dining")||r.includes("bistro")||r.includes("eatery")||r.includes("grill"))return console.log("  \u2705 RESTAURANT \u2192 food"),{category:"food",subcategory:"restaurant",priority:9};if((i.includes("theater")||r.includes("theater")||r.includes("theatre"))&&!i.includes("movie_theater")&&!r.includes("cinema")&&!r.includes("movie"))return console.log("  \u2705 THEATER \u2192 entertainment"),{category:"entertainment",subcategory:"theater",priority:9};if(i.includes("movie_theater")||r.includes("cinema")||r.includes("movie theater")||r.includes("movie theatre"))return console.log("  \u2705 CINEMA \u2192 entertainment"),{category:"entertainment",subcategory:"cinema",priority:9};if(i.includes("museum")||r.includes("museum"))return console.log("  \u2705 MUSEUM \u2192 entertainment"),{category:"entertainment",subcategory:"museum",priority:9};if(i.includes("art_gallery")||r.includes("art gallery")||r.includes("gallery"))return console.log("  \u2705 ART GALLERY \u2192 entertainment"),{category:"entertainment",subcategory:"gallery",priority:9};if(r.includes("music")||r.includes("concert")||r.includes("jazz")||r.includes("live music"))return console.log("  \u2705 MUSIC VENUE \u2192 entertainment"),{category:"entertainment",subcategory:"music",priority:9};if(r.includes("comedy")||r.includes("laugh"))return console.log("  \u2705 COMEDY \u2192 entertainment"),{category:"entertainment",subcategory:"comedy",priority:9};if(i.includes("park")||i.includes("natural_feature")||r.includes("park")||r.includes("garden")||r.includes("botanical")||r.includes("trail")||r.includes("reserve"))return console.log("  \u2705 OUTDOOR"),{category:"outdoor",subcategory:"outdoor",priority:9};if(i.includes("stadium")||r.includes("stadium")||r.includes("arena"))return console.log("  \u2705 SPORTS VENUE \u2192 entertainment"),{category:"entertainment",subcategory:"sports",priority:9};if(r.includes("karaoke"))return console.log("  \u2705 KARAOKE \u2192 activity"),{category:"activity",subcategory:"karaoke",priority:9};if(r.includes("escape")||r.includes("puzzle room"))return console.log("  \u2705 ESCAPE ROOM \u2192 activity"),{category:"activity",subcategory:"escape",priority:9};if(i.includes("bowling_alley")||r.includes("bowling"))return console.log("  \u2705 BOWLING \u2192 activity"),{category:"activity",subcategory:"bowling",priority:9};if(r.includes("arcade")||r.includes("game center"))return console.log("  \u2705 ARCADE \u2192 activity"),{category:"activity",subcategory:"arcade",priority:9};if((r.includes("kart")&&!r.includes("train")||r.includes("go-kart")||r.includes("gokart")||r.includes("go kart")||r.includes("battlekart")||r.includes("karting")||r.includes("racing")&&(i.includes("amusement_park")||r.includes("kart")))&&!(r.includes("print")||r.includes("train")||r.includes("fitness")||r.includes("gym")||r.includes("shop")||r.includes("store")||r.includes("mart")||r.includes("deli")||i.includes("clothing_store")||i.includes("store")||i.includes("gym")))return console.log("  \u2705 GO KARTS \u2192 activity"),{category:"activity",subcategory:"gokart",priority:9};return i.includes("gym")||r.includes("gym")||r.includes("fitness")?(console.log("  \u2705 FITNESS \u2192 activity"),{category:"activity",subcategory:"fitness",priority:8}):r.includes("yoga")||r.includes("pilates")?(console.log("  \u2705 YOGA \u2192 activity"),{category:"activity",subcategory:"yoga",priority:8}):i.includes("shopping_mall")||i.includes("clothing_store")||r.includes("mall")||r.includes("boutique")?(console.log("  \u2705 SHOPPING \u2192 activity"),{category:"activity",subcategory:"shopping",priority:7}):r.includes("aquarium")?(console.log("  \u2705 AQUARIUM \u2192 entertainment"),{category:"entertainment",subcategory:"aquarium",priority:9}):r.includes("zoo")||r.includes("safari")?(console.log("  \u2705 ZOO \u2192 entertainment"),{category:"entertainment",subcategory:"zoo",priority:9}):r.includes("cooking class")||r.includes("culinary")?(console.log("  \u2705 COOKING CLASS \u2192 activity"),{category:"activity",subcategory:"cooking",priority:9}):(console.log("  \u26a0\ufe0f GENERAL (using search context)"),{category:"general",subcategory:"other",priority:5})})(e,t);return Ie(Ie({},e),n)}).filter(t=>"general"!==t.category||e.length<10);console.log("\u2705 Categorized: ".concat(r.length," valid places"));t.toLowerCase();const i=[],o={beach:["beach"],gym:["gym","fitness","workout"],park:["park"],outdoor:["nature","outdoor","hiking","trail","adventure","garden","botanical","scenic","walk"],nightlife:["nightclub","nightclubs","club","clubs","dancing"],drinks:["wine","cocktail","cocktails","bar","bars","drink","drinks","brewery","pub","lounge"],food:["food","dinner","lunch","restaurant","dining","brunch","breakfast","eat","cuisine","bistro"],cafe:["coffee","cafe","caf\xe9","espresso","coffeehouse"],entertainment:["music","movie","theater","theatre","comedy","museum","art","entertainment","concert","show","performance","cinema","gallery"],activity:["karaoke","escape","games","arcade","bowling","climbing","yoga","sports","kart","karts","go-kart","go-karts","gokart","gokarts","karting","racing"]};t.toLowerCase().split(/\s+/).forEach(e=>{Object.entries(o).forEach(t=>{let[n,r]=t;r.includes(e)&&!i.includes(n)&&(i.push(n),console.log("  \u2705 Detected: ".concat(e," \u2192 ").concat(n)))})}),0===i.length&&(console.log("\u26a0\ufe0f No categories detected - using defaults"),i.push("food","drinks")),console.log("\n\ud83c\udfaf User wants (in order): ".concat(i.join(" \u2192 ")));const s={beach:"outdoor",gym:"activity",park:"outdoor",outdoor:"outdoor",nightlife:"nightlife",drinks:"drinks",food:"food",cafe:"cafe",entertainment:"entertainment",activity:"activity"},a={food:r.filter(e=>"food"===e.category),drinks:r.filter(e=>"drinks"===e.category),nightlife:r.filter(e=>"nightlife"===e.category),cafe:r.filter(e=>"cafe"===e.category),outdoor:r.filter(e=>"outdoor"===e.category),entertainment:r.filter(e=>"entertainment"===e.category),activity:r.filter(e=>"activity"===e.category)};console.log("\n\ud83d\udcca Available places by category:"),Object.entries(a).forEach(e=>{let[t,n]=e;n.length>0&&console.log("  ".concat(t,": ").concat(n.length," places"))});const l=[];let c;if(i.forEach(e=>{const t=s[e]||e;a[t]&&a[t].length>0&&l.push(t)}),console.log("\n\ud83d\udccb Final flow: ".concat(l.join(" \u2192 "))),"string"===typeof be)if(be.includes("-")){const e=be.split("-");c=parseInt(e[1])}else c=parseInt(be);else c=be;const u=l.length,d=c/u,[h,f]=ye.split(" ");let p=parseInt(h.split(":")[0]);"PM"===f&&12!==p&&(p+=12),"AM"===f&&12===p&&(p=0);const m=p>=17,g=p>=12&&p<17,y=p<12;console.log("\n\u23f0 Time: ".concat(ye," (").concat(m?"Evening":g?"Afternoon":"Morning",")")),console.log("\ud83d\udcca Creating ".concat(u," stops over ").concat(c," hours"));const v=[],b=new Set;let x=ye;const w=(e,r)=>{let i=a[e].filter(e=>!b.has(e.place_id));if(0===i.length)return null;const o=t.toLowerCase();if("beach"===r?i=i.filter(e=>{var t;return e.name.toLowerCase().includes("beach")||(null===(t=e.vicinity)||void 0===t?void 0:t.toLowerCase().includes("beach"))}):"gym"===r?i=i.filter(e=>{var t;return e.name.toLowerCase().includes("gym")||e.name.toLowerCase().includes("fitness")||(null===(t=e.types)||void 0===t?void 0:t.includes("gym"))}):"park"===r?i=i.filter(e=>{var t;return e.name.toLowerCase().includes("park")||(null===(t=e.types)||void 0===t?void 0:t.includes("park"))}):"activity"===e&&(o.includes("kart")||o.includes("go kart")||o.includes("gokart"))&&(console.log("\ud83c\udfce\ufe0f USER WANTS GO KARTS - Filtering for actual go kart venues"),i=i.filter(e=>{const t=e.name.toLowerCase(),n=(t.includes("kart")||t.includes("battlekart")||t.includes("racing"))&&!t.includes("train")&&!t.includes("print")&&!t.includes("fitness")&&!t.includes("gym");return console.log("  Checking ".concat(e.name,": isGoKart=").concat(n)),n}),console.log("\ud83c\udfce\ufe0f Found ".concat(i.length," go kart venues"))),0===i.length&&(i=a[e].filter(e=>!b.has(e.place_id))),0===i.length)return null;if(n){const e=i.filter(e=>(e.rating||0)>=3.5),t=e.length>0?e:i,n=Math.floor(Math.random()*t.length);return console.log("\ud83d\udd04 REFRESH: Picked random venue from ".concat(t.length," options (3.5+ stars)")),t[n]}{const e=i.filter(e=>(e.rating||0)>=4);if(e.length>=5){e.sort((e,t)=>(t.rating||0)-(e.rating||0));const t=e.slice(0,5),n=Math.floor(Math.random()*t.length);return console.log("\u2728 FIRST TIME: Picked from top 5 venues (4.0+ stars)"),t[n]}if(e.length>0){const t=Math.floor(Math.random()*e.length);return console.log("\u2728 FIRST TIME: Limited options, picked from ".concat(e.length," venues (4.0+ stars)")),e[t]}{const e=Math.floor(Math.random()*i.length);return console.log("\u26a0\ufe0f FIRST TIME: No high-rated venues, picked from ".concat(i.length," available")),i[e]}}};for(let C=0;C<l.length;C++){const e=l[C],t=w(e,i[C]);if(!t){console.warn("\u26a0\ufe0f No available places in ".concat(e));continue}b.add(t.place_id);const{title:n,icon:r,description:o}=Zt(t,m,g,y),s=d,a=Math.floor(s),c=Math.round(s%1*60),u=c>0?"".concat(a,"h ").concat(c,"m"):"".concat(a," hour").concat(1!==a?"s":"");v.push({stop:v.length+1,time:x,title:n,description:o,place:t,icon:r,duration:u,challenges:Nb(t.category,3),challengesCompleted:!1}),console.log("\u2705 Stop ".concat(v.length,": ").concat(n," - ").concat(t.name," (").concat(e,")")),x=Lt(x,d)}console.log("\ud83c\udf89 Itinerary complete: ".concat(v.length," stops\n"));const S=Array.from(b),k=r.filter(e=>!S.includes(e.place_id)).sort((e,t)=>(t.rating||0)-(e.rating||0)).slice(0,10),E=((e,t)=>{let n;if("string"===typeof t)if(t.includes("-")){const e=t.split("-");n=parseInt(e[1])}else n=parseInt(t);else n=t;return Lt(e,n)})(ye,c);return{stops:v,alternatives:k,totalDuration:"".concat(c," hours"),startTime:ye,endTime:E}},Ot=()=>{const e="create"===dt&&mt;if(ut(!1),gt(null),pt(null),e&&Y){console.log("\ud83d\udce4 Opening share modal after saving memory");const e={name:"Date Night - ".concat(Y.stops.length," stops"),vicinity:L,place_id:"completed_itinerary",itinerary:Y,stops:Y.stops,completedAt:(new Date).toISOString()};setTimeout(()=>{S(e),x(!0)},300)}},Ft=()=>{vt(!1),St(null)},Ut=()=>{_t(!1)},Bt=async()=>{if(a)try{const e=await Bg(Dm(kv,"dateStreaks",a.uid));e.exists()&&jt(e.data())}catch($){console.error("Error loading streak data:",$)}};(0,i.useEffect)(()=>{const e=localStorage.getItem("datemaker_language")||"en";r(e)},[]);(0,i.useEffect)(()=>{if(!Sv||!kv)return g("Firebase configuration error."),void u(!1);const e=yo(Sv,async e=>{try{if(l(e),e){console.log("\ud83d\udd10 Auth state changed:",{email:e.email,verified:e.emailVerified,currentScreen:d});try{const t=Dm(kv,"users",e.uid),n=await Bg(t);if(n.exists()){const e=n.data();N(e),p(e.subscriptionStatus||"free"),le(e.savedDates||[]),_e(e.profilePhoto||""),I(e.lastViewedSavedCount||0)}else p("free"),le([])}catch(t){console.error("Firestore error:",t),p("free"),le([])}e.emailVerified&&"success"!==d&&"verification"!==d?(console.log("\u2705 Email verified - showing main app"),h("main")):e.emailVerified||"main"!==d||(console.log("\u26a0\ufe0f Email not verified - showing verification screen"),h("verification"))}else"main"===d&&h("login")}catch(n){console.error("Auth error:",n),g(n.message)}finally{u(!1)}});return()=>e()},[d]),(0,i.useEffect)(()=>{var e;if(!a)return;console.log("\ud83d\udd14 Starting notification tracker for:",a.email);const t=[],n=Yg(kg(Pm(kv,"conversations"),Cg("participants","array-contains",a.uid)),e=>{let t=0;e.docs.forEach(e=>{var n;const r=e.data();t+=(null===(n=r.unreadCount)||void 0===n?void 0:n[a.uid])||0}),At(e=>Ie(Ie({},e),{},{messages:t,total:e.requests+t})),console.log("\ud83d\udcac Unread messages:",t)},e=>{console.error("Error loading message notifications:",e)});t.push(n);const r=Yg(kg(Pm(kv,"friendRequests"),Cg("toUserId","==",a.uid),Cg("status","==","pending")),e=>{const t=e.docs.filter(e=>!e.data().seen).length;At(e=>Ie(Ie({},e),{},{requests:t,total:t+e.messages})),console.log("\ud83d\udcec Friend requests:",t)},e=>{console.error("Error loading friend request notifications:",e)});t.push(r);const i=Yg(kg(Pm(kv,"surpriseDates"),Cg("partnerEmail","==",null===(e=a.email)||void 0===e?void 0:e.toLowerCase()),Cg("revealed","==",!1)),e=>{const t=e.size;Et(t),console.log("\ud83c\udf81 Unrevealed surprises:",t)},e=>{console.error("Error loading surprise notifications:",e)});return t.push(i),()=>t.forEach(e=>e())},[a,f]),(0,i.useEffect)(()=>{a&&kv&&Wt()},[a]),(0,i.useEffect)(()=>{(async()=>{if(a){const e=await zt();E(e)}})()},[a,zt,Y]),(0,i.useEffect)(()=>{console.log("\ud83d\udd35 showShareModal changed to:",b),console.log("\ud83d\udd35 dateToShare is:",w)},[b,w]),(0,i.useEffect)(()=>{!mt||"create"!==dt||ct||Je||(console.log("\ud83d\udcf8 useEffect detected dateToSave, opening scrapbook"),ut(!0))},[mt,dt,ct,Je]);const Wt=async()=>{try{const e=Dm(kv,"users",a.uid),t=await Bg(e);if(t.exists()){const e=t.data().gameStats||{xp:0,datesCompleted:0,challengesCompleted:0,placesVisited:0,photosShared:0,currentStreak:0,longestStreak:0,achievements:[],stats:{foodVenues:0,drinkVenues:0,entertainment:0,outdoor:0,activities:0}};Xe(e)}}catch($){console.error("Error loading game stats:",$)}};(0,i.useEffect)(()=>{(async()=>{if(xv.Ii.isNativePlatform())try{await gb.setBackgroundColor({color:"#7c3aed"}),await gb.setStyle({style:pb.Dark})}catch($){console.log("StatusBar setup:",$)}})()},[]),(0,i.useEffect)(()=>{const e=ux.addListener("appStateChange",e=>{let{isActive:t}=e;t&&(console.log("\ud83d\udcf1 App resumed - checking subscription..."),(async()=>{if(a)try{const e=Dm(kv,"users",a.uid),t=await Bg(e);if(t.exists()){const e=t.data().subscriptionStatus||"free";e!==f&&(console.log("\u2705 Subscription updated:",e),p(e))}}catch($){console.error("Error checking subscription:",$)}})())});return()=>{e.remove()}},[a,f]);const Vt=async e=>{const t=e.target.files[0];if(t)if(t.size>5e6)De("Photo must be under 5MB");else{De("Uploading...");try{const e=vv(),i=(n=e,r="profilePhotos/".concat(a.uid),hv(n=It(n),r));await function(e,t,n){return lv(e=It(e),t,n)}(i,t);const o=await function(e){return cv(e=It(e))}(i);_e(o);const s=Dm(kv,"users",a.uid);await qg(s,{profilePhoto:o},{merge:!0}),De(""),alert("\u2728 Profile photo updated!")}catch(i){console.error("Upload error:",i),De("Failed to upload: ".concat(i.message))}var n,r}},qt=async()=>{if(De(""),Te.length<6)De("Password must be at least 6 characters");else if(Te===Re)try{await function(e,t){return go(It(e),null,t)}(a,Te),alert("\u2705 Password updated successfully!"),je(""),Ae("")}catch(e){console.error("Password change error:",e),"auth/requires-recent-login"===e.code?De("Please log out and log back in to change your password."):De("Failed to change password. Try again.")}else De("Passwords do not match")},Ht=async(e,t)=>{try{const t=(null===Le||void 0===Le?void 0:Le.xp)||0,n=t+e,r=Rb(t),i=Rb(n),o=Ie(Ie({},Le),{},{xp:n,challengesCompleted:((null===Le||void 0===Le?void 0:Le.challengesCompleted)||0)+1});Xe(o);const s=Dm(kv,"users",a.uid);await qg(s,{gameStats:o},{merge:!0}),i.level>r.level&&(et({oldLevel:r,newLevel:i}),$e(!0))}catch($){console.error("Error awarding points:",$)}},Gt=async()=>{if(console.log("\ud83c\udfaf Complete Date Started"),"free"!==f)try{if(!Y||!Y.stops)return void alert("No itinerary to complete!");const e=tt.length,t=Ib,n=Y.stops.length*_b,r=t+n+e*Tb,i=(null===Le||void 0===Le?void 0:Le.xp)||0,o=i+r,s=Rb(i),l=Rb(o),c=l.level>s.level,u=new Date;u.setHours(0,0,0,0);const d=u.toISOString();let h=1;const f=null===Le||void 0===Le?void 0:Le.lastCompletedDate,p=(null===Le||void 0===Le?void 0:Le.currentStreak)||0;if(f){const e=new Date(f);e.setHours(0,0,0,0);const t=Math.floor((u-e)/864e5);h=0===t?p:1===t?p+1:1}const m=(null===Le||void 0===Le?void 0:Le.venueStats)||{food:0,drinks:0,entertainment:0,outdoor:0,activity:0};Y.stops.forEach(e=>{const t=e.place.category;"food"===t&&m.food++,"drinks"===t&&m.drinks++,"entertainment"===t&&m.entertainment++,"outdoor"===t&&m.outdoor++,"activity"===t&&m.activity++});const g=Ie(Ie({},Le),{},{xp:o,level:l.level,datesCompleted:((null===Le||void 0===Le?void 0:Le.datesCompleted)||0)+1,placesVisited:((null===Le||void 0===Le?void 0:Le.placesVisited)||0)+Y.stops.length,challengesCompleted:((null===Le||void 0===Le?void 0:Le.challengesCompleted)||0)+e,currentStreak:h,longestStreak:Math.max(h,(null===Le||void 0===Le?void 0:Le.longestStreak)||0),lastCompletedDate:d,venueStats:m});Xe(g);const y=Dm(kv,"users",a.uid);await qg(y,{gameStats:g},{merge:!0});const v=Dm(kv,"dateStreaks",a.uid),b=await Bg(v);if(b.exists()){const e=b.data(),t=(e.goals||[]).map(e=>{if(e.completed)return e;const t=e.progress+1;return Ie(Ie({},e),{},{progress:t,completed:t>=e.target})});await Hg(v,{currentStreak:h,longestStreak:Math.max(h,(null===Le||void 0===Le?void 0:Le.longestStreak)||0),totalDates:(e.totalDates||0)+1,lastDateWeek:d,goals:t})}else await qg(v,{currentStreak:1,longestStreak:1,totalDates:1,lastDateWeek:d,badges:[],goals:[],weeklyChallenges:{}});nt([]),c?(et({oldLevel:s,newLevel:l,pointsEarned:r}),$e(!0),gt({date:(new Date).toISOString(),location:L,itinerary:Y}),ht("create")):(gt({date:(new Date).toISOString(),location:L,itinerary:Y}),ht("create"),setTimeout(()=>{ut(!0)},100))}catch($){console.error("\u274c Error completing date:",$),alert("Error completing date: ".concat($.message))}else Dt(!0)},Kt=async e=>{if("free"!==f)try{const t={place_id:e.place_id,name:e.name,vicinity:e.vicinity,rating:e.rating,geometry:e.geometry,photos:e.photos,website:e.website,isEvent:e.isEvent,eventDate:e.eventDate,eventTime:e.eventTime,priceRange:e.priceRange,venueName:e.venueName,savedAt:(new Date).toISOString()};if(ae.some(t=>t.place_id===e.place_id))return void alert(o("alreadySaved"));const n=[...ae,t];le(n);const r=Dm(kv,"users",a.uid);await qg(r,{savedDates:n},{merge:!0}),alert(o("dateSaved"))}catch(t){console.error("Save error:",t)}else Dt(!0)},Yt=async()=>{if("free"!==f)try{if(!Y||!Y.stops||0===Y.stops.length)return;const e={place_id:"itinerary_".concat(Date.now()),name:"Date Night: ".concat(Y.stops.map(e=>e.title).join(" \u2192 ")),isItinerary:!0,stops:Y.stops,savedAt:(new Date).toISOString()},t=[...ae,e];le(t);const n=Dm(kv,"users",a.uid);await qg(n,{savedDates:t},{merge:!0}),alert(o("itinerarySaved"))}catch(e){console.error("Save itinerary error:",e)}else Dt(!0)},Qt=async e=>{try{const t=ae.filter(t=>t.place_id!==e);le(t);const n=Dm(kv,"users",a.uid);await qg(n,{savedDates:t},{merge:!0})}catch(t){console.error("Remove error:",t)}},Xt=e=>ae.some(t=>t.place_id===e),Jt=()=>{q.trim()&&!W.includes(q.trim())&&(V([...W,q.trim()]),H(""))},$t=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Z(""),J(!0),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\ude80 DATE GENERATION STARTED"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550");try{if(console.log("STEP 0: Checking subscription status..."),console.log("  subscriptionStatus:",f),"free"===f)return console.log("  \u274c User is free - showing modal"),Dt(!0),void J(!1);if(console.log("  \u2705 User has premium access"),console.log("STEP 1: Checking user..."),console.log("  user:",a?"EXISTS":"NULL"),!a)throw new Error("No user logged in. Please refresh and try again.");let l,c,u;console.log("  \u2705 User exists"),console.log("STEP 2: Getting auth token...");try{l=await a.getIdToken(),console.log("  \u2705 Got token:",l?"YES (length: "+l.length+")":"NO")}catch(r){throw console.error("  \u274c Token error:",r),new Error("Failed to get authentication token: "+(r.message||"Unknown error"))}if(!l)throw new Error("Authentication token is empty. Please log out and log back in.");if(console.log("STEP 3: Preparing location..."),L){console.log("  Using location string:",L);const e="".concat(Nt,"/api/geocode?address=").concat(encodeURIComponent(L));console.log("  Geocode URL:",e),console.log("  API_URL:",Nt);try{var t;console.log("  Fetching geocode...");const n=await fetch(e,{headers:{Authorization:"Bearer ".concat(l)}});if(console.log("  Geocode status:",n.status),console.log("  Geocode ok:",n.ok),!n.ok){const e=await n.text();throw console.error("  Geocode error text:",e),new Error("Geocoding failed (".concat(n.status,"): ").concat(e.substring(0,200)))}const r=await n.json();if(console.log("  Geocode data status:",r.status),"OK"!==r.status||null===(t=r.results)||void 0===t||!t.length)throw new Error('Location "'.concat(L,'" not found. Try: "Perth, Australia" or "New York, USA"'));c=r.results[0].geometry.location.lat,u=r.results[0].geometry.location.lng,console.log("  \u2705 Coordinates:",c,u)}catch(i){throw console.error("  \u274c Geocode failed:",i),i}}else{console.log("  Using device location...");try{const e=await new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,{timeout:1e4,enableHighAccuracy:!1}):t(new Error("Geolocation not supported on this device"))});c=e.coords.latitude,u=e.coords.longitude,console.log("  \u2705 Device location:",c,u)}catch(o){throw console.error("  \u274c Geolocation failed:",o),new Error("Could not get your location. Please enter a city name instead.")}}console.log("STEP 4: Building search query...");const d=[...O,...U,...W];console.log("  Selected activities:",d);const h=new Set;d.forEach(e=>h.add(e.toLowerCase().trim())),0===h.size&&h.add("restaurant bar cafe entertainment");const p=Array.from(h).join(" ");console.log("  Keywords:",p),console.log("STEP 5: Fetching places...");const m=new URLSearchParams({lat:c,lng:u,radius:1e4,keyword:p,includeEvents:de.toString(),dateRange:me,selectedDate:fe||"",refresh:e.toString()}),g="".concat(Nt,"/api/places?").concat(m);console.log("  Places URL:",g);try{var n;console.log("  Fetching places...");const t=await fetch(g,{headers:{Authorization:"Bearer ".concat(l)}});console.log("  Places status:",t.status),console.log("  Places ok:",t.ok);const r=await t.json();if(console.log("  Places count:",(null===(n=r.results)||void 0===n?void 0:n.length)||0),r.error)throw new Error(r.error);let i=r.results||[];if(0===i.length)return Z("No places found for your search. Try different keywords."),void J(!1);console.log("  \u2705 Got",i.length,"places"),console.log("STEP 6: Creating itinerary..."),E(l);const o=Mt(i,p,e);Q(o);const s=[...o.stops.map(e=>e.place),...o.alternatives];K(s);const a=document.getElementById("root");a&&(a.scrollTop=0),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,Q(null),ne(!1),setTimeout(()=>{const e=document.getElementById("root");e&&(e.scrollTop=0),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,Q(o),ne(!0)},50),console.log("\u2705 SUCCESS! Itinerary created with",o.stops.length,"stops"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")}catch(s){throw console.error("  \u274c Places fetch failed:",s),s}}catch(l){console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("\u274c GENERATION FAILED"),console.error("Error type:",typeof l),console.error("Error:",l),console.error("Error message:",l.message),console.error("Error stack:",l.stack),console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550");let e="\u274c Failed to generate date:\n\n";l&&l.message?e+=l.message:l&&"string"===typeof l?e+=l:(e+="Unknown error occurred\n\n",e+="Error details: "+JSON.stringify(l)),e+="\n\n\ud83d\udccd Location: "+(L||"Using device location"),e+="\n\ud83c\udf10 API: "+Nt,e+="\n\ud83d\udcf1 Device: Mobile browser",Z(e),alert(e)}finally{J(!1)}},Zt=(e,t,n,r)=>{var i;const o=e.category,s=e.subcategory,a=(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())||"";return"drinks"===o?{title:"Drinks",icon:"\ud83c\udf78",description:"Enjoy drinks and conversation"}:"nightlife"===o?{title:"Night Out",icon:"\ud83c\udf89",description:"Dance and party the night away"}:"cafe"===o?{title:"Coffee Break",icon:"\u2615",description:"Relax over coffee and pastries"}:"food"===o?t?{title:"Dinner",icon:"\ud83c\udf7d\ufe0f",description:"Enjoy a delicious dinner"}:n?{title:"Lunch",icon:"\ud83c\udf7d\ufe0f",description:"Have a nice lunch together"}:{title:"Brunch",icon:"\ud83c\udf7d\ufe0f",description:"Enjoy brunch together"}:"outdoor"===o?"garden"===s||a.includes("garden")?{title:"Garden Visit",icon:"\ud83c\udf38",description:"Explore beautiful gardens"}:"trail"===s||a.includes("trail")||a.includes("hike")?{title:"Hiking",icon:"\ud83e\udd7e",description:"Hit the trails together"}:a.includes("beach")?{title:"Beach Visit",icon:"\ud83c\udfd6\ufe0f",description:"Relax by the water"}:{title:"Park Time",icon:"\ud83c\udf33",description:"Enjoy nature together"}:"entertainment"===o?"culture"===s||"museum"===s?{title:"Visit Museum",icon:"\ud83c\udfdb\ufe0f",description:"Explore art and culture"}:"theater"===s||a.includes("cinema")||a.includes("movie")?{title:"Watch a Movie",icon:"\ud83c\udfac",description:"Enjoy a film together"}:"music"===s?{title:"Live Music",icon:"\ud83c\udfb5",description:"Enjoy live performances"}:"comedy"===s?{title:"Comedy Show",icon:"\ud83d\ude02",description:"Laugh together"}:"sports"===s?{title:"Sports Event",icon:"\ud83c\udfdf\ufe0f",description:"Watch the game"}:"aquarium"===s?{title:"Aquarium Visit",icon:"\ud83d\udc20",description:"Explore underwater worlds"}:"zoo"===s?{title:"Zoo Visit",icon:"\ud83e\udd81",description:"See amazing animals"}:"event"===s||e.isEvent?{title:"Special Event",icon:"\ud83c\udf89",description:"Attend an exciting event"}:{title:"Entertainment",icon:"\ud83c\udfad",description:"Have fun together"}:"activity"===o?"dance"===s?{title:"Dancing",icon:"\ud83d\udc83",description:"Dance the night away"}:"wine"===s?{title:"Wine Tasting",icon:"\ud83c\udf77",description:"Sample fine wines"}:"karaoke"===s?{title:"Karaoke",icon:"\ud83c\udfa4",description:"Sing your hearts out"}:"gokart"===s?{title:"Go Karting",icon:"\ud83c\udfce\ufe0f",description:"Race around the track"}:"games"===s?a.includes("escape")?{title:"Escape Room",icon:"\ud83d\udd10",description:"Solve puzzles together"}:a.includes("bowling")?{title:"Bowling",icon:"\ud83c\udfb3",description:"Bowl a few games"}:a.includes("arcade")?{title:"Arcade Games",icon:"\ud83d\udd79\ufe0f",description:"Play retro games"}:{title:"Fun Games",icon:"\ud83c\udfaf",description:"Have fun together"}:"fitness"===s?{title:"Workout Session",icon:"\ud83d\udcaa",description:"Get active together"}:"cooking"===s?{title:"Cooking Class",icon:"\ud83d\udc68\u200d\ud83c\udf73",description:"Learn to cook together"}:"reading"===s?{title:"Browse Books",icon:"\ud83d\udcda",description:"Discover new reads"}:"shopping"===s?{title:"Shopping",icon:"\ud83d\udecd\ufe0f",description:"Browse shops together"}:{title:"Fun Activity",icon:"\u2728",description:"Try something new"}:{title:"Explore",icon:"\u2728",description:"Discover something new"}},en=(e,t)=>{const n="AIzaSyCKCweUu3EEWa8VfNZJ3I0druTc6u5gJKc";return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e,",").concat(t,"&zoom=15&size=600x300&markers=color:red%7C").concat(e,",").concat(t,"&key=").concat(n)},tn=(e,t)=>{try{if(e.isEvent&&e.photos&&e.photos.length>0&&e.photos[0].isDirectUrl)return console.log("\u2705 Event photo (direct URL) for ".concat(e.name)),e.photos[0].photo_reference;if(e.photos&&e.photos.length>0){const n=e.photos[0];if(n.isDirectUrl&&n.photo_reference)return console.log("\u2705 Direct URL photo for ".concat(e.name)),n.photo_reference;if(n.photo_reference&&"string"===typeof n.photo_reference){const r="".concat(Nt,"/api/photo?photoreference=").concat(n.photo_reference,"&token=").concat(t||k);return console.log("\u2705 Using proxy for ".concat(e.name)),r}}return console.log("\u26a0\ufe0f No photo available for ".concat(e.name)),null}catch($){return console.error("\u274c Error getting photo for ".concat(e.name,":"),$),null}},nn=e=>{const t=[["#ec4899","#a855f7"],["#a855f7","#3b82f6"],["#3b82f6","#06b6d4"],["#10b981","#059669"],["#f59e0b","#ef4444"]];return t[e.length%t.length]},rn=(e,t)=>{window.open("https://www.google.com/maps/dir/?api=1&destination=".concat(e,",").concat(t),"_blank")};if(m)return(0,_v.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem"},children:(0,_v.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"16px",maxWidth:"500px",textAlign:"center"},children:[(0,_v.jsx)("h2",{style:{color:"#dc2626"},children:"Error"}),(0,_v.jsx)("p",{children:m})]})});if(c)return(0,_v.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)"},children:(0,_v.jsx)(Me,{style:{color:"#ec4899"},size:64,fill:"currentColor"})});if(y)return(0,_v.jsx)(wb,{user:a,onBack:()=>v(!1)});if(!a||!a.emailVerified||"main"!==d){if("login"===d)return(0,_v.jsx)(Tv,{onSwitchToSignup:()=>h("signup"),onShowVerification:()=>h("verification")});if("signup"===d)return(0,_v.jsx)(jv,{onSwitchToLogin:()=>h("login"),onShowSuccess:()=>h("success")});if("success"===d)return(0,_v.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem"},children:(0,_v.jsxs)("div",{style:{background:"white",padding:"3rem",borderRadius:"24px",maxWidth:"500px",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.15)"},children:[(0,_v.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\u2705"}),(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Check Your Email!"}),(0,_v.jsxs)("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:["We sent a verification link to ",(0,_v.jsx)("strong",{children:null===a||void 0===a?void 0:a.email}),(0,_v.jsx)("br",{}),(0,_v.jsx)("br",{}),"Click the link to activate your account."]}),(0,_v.jsx)("button",{onClick:()=>{h("login")},style:{width:"100%",padding:"1rem",background:"linear-gradient(to right, #ec4899, #a855f7)",color:"white",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Back to Login"})]})});if("verification"===d)return(0,_v.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem"},children:(0,_v.jsxs)("div",{style:{background:"white",padding:"3rem",borderRadius:"24px",maxWidth:"500px",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.15)"},children:[(0,_v.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83d\udce7"}),(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Email Not Verified"}),(0,_v.jsxs)("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:["Please check your email (",(0,_v.jsx)("strong",{children:null===a||void 0===a?void 0:a.email}),") and click the verification link.",(0,_v.jsx)("br",{}),(0,_v.jsx)("br",{}),"Already verified? Refresh this page after clicking the link."]}),(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,_v.jsx)("button",{onClick:()=>window.location.reload(),style:{width:"100%",padding:"1rem",background:"linear-gradient(to right, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"I've Verified - Refresh Page"}),(0,_v.jsx)("button",{onClick:async()=>{try{await mo(a),alert("Verification email sent! Check your inbox.")}catch($){console.error("Error sending verification:",$),alert("Error sending email. Please try again.")}},style:{width:"100%",padding:"1rem",background:"white",color:"#ec4899",border:"2px solid #ec4899",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Resend Verification Email"}),(0,_v.jsx)("button",{onClick:()=>{vo(Sv),h("login")},style:{width:"100%",padding:"1rem",background:"white",color:"#6b7280",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Back to Login"})]})]})})}return ke?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem",paddingTop:"calc(2rem + env(safe-area-inset-top))",direction:s?"rtl":"ltr"},children:(0,_v.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ec4899"},children:o("myProfile")}),(0,_v.jsxs)("button",{onClick:()=>Ee(!1),style:{background:"white",padding:"0.5rem 1.5rem",borderRadius:"9999px",border:"none",cursor:"pointer",fontWeight:"600"},children:["\u2190 ",o("back")]})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2rem",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"2rem",paddingBottom:"2rem",borderBottom:"1px solid #e5e7eb"},children:[(0,_v.jsx)("div",{style:{width:"120px",height:"120px",borderRadius:"50%",overflow:"hidden",marginBottom:"1rem",border:"4px solid #ec4899"},children:Ce?(0,_v.jsx)("img",{src:Ce,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,_v.jsx)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(to bottom right, #ec4899, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"3rem",fontWeight:"bold"},children:a.email.charAt(0).toUpperCase()})}),(0,_v.jsx)("input",{type:"file",accept:"image/*",onChange:Vt,style:{display:"none"},id:"photoUpload"}),(0,_v.jsx)("label",{htmlFor:"photoUpload",style:{background:"linear-gradient(to right, #ec4899, #a855f7)",color:"white",padding:"0.5rem 1.5rem",borderRadius:"9999px",cursor:"pointer",fontWeight:"600"},children:o("uploadPhoto")})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:o("accountInfo")}),(0,_v.jsxs)("div",{style:{padding:"1rem",background:"#f9fafb",borderRadius:"12px",marginBottom:"0.5rem"},children:[(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:o("email")}),(0,_v.jsx)("p",{style:{fontWeight:"600",color:"#111827"},children:a.email})]}),(0,_v.jsxs)("div",{style:{padding:"1rem",background:"#f9fafb",borderRadius:"12px",marginBottom:"1rem"},children:[(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:o("plan")}),(0,_v.jsx)("p",{style:{fontWeight:"600",color:"#111827"},children:"premium"===f?"\u2728 ".concat(o("premiumPlan")):"\ud83c\udd93 ".concat(o("freePlan"))})]}),(0,_v.jsx)("button",{onClick:()=>_(!0),style:{width:"100%",padding:"1rem",background:"linear-gradient(to right, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 10px rgba(59, 130, 246, 0.3)"},children:"\ud83d\udcb3 Manage Subscription & Billing"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:o("changePassword")}),(0,_v.jsx)("input",{type:"password",placeholder:o("newPassword"),value:Te,onChange:e=>je(e.target.value),style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #e5e7eb",borderRadius:"12px",marginBottom:"0.75rem",fontSize:"1rem",outline:"none",boxSizing:"border-box"}}),(0,_v.jsx)("input",{type:"password",placeholder:o("confirmPassword"),value:Re,onChange:e=>Ae(e.target.value),style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #e5e7eb",borderRadius:"12px",marginBottom:"0.75rem",fontSize:"1rem",outline:"none",boxSizing:"border-box"}}),(0,_v.jsx)("button",{onClick:qt,style:{width:"100%",background:"linear-gradient(to right, #3b82f6, #2563eb)",color:"white",padding:"0.875rem",borderRadius:"12px",border:"none",cursor:"pointer",fontWeight:"600"},children:o("updatePassword")})]}),"premium"===f&&(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:o("subscription")}),(0,_v.jsxs)("div",{style:{padding:"1.5rem",background:"#f0fdf4",borderRadius:"12px",border:"2px solid #86efac",marginBottom:"1rem"},children:[(0,_v.jsxs)("p",{style:{fontSize:"0.875rem",color:"#166534",marginBottom:"0.5rem",fontWeight:"600"},children:["\u2728 ",o("premiumActive")]}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#15803d"},children:o("premiumDesc")})]}),(0,_v.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to cancel your premium subscription?"))try{const e=Dm(kv,"users",a.uid);await qg(e,{subscriptionStatus:"free"},{merge:!0}),p("free"),alert("Your subscription has been cancelled.")}catch(e){console.error("Cancel subscription error:",e),De("Failed to cancel subscription.")}},style:{width:"100%",background:"white",color:"#dc2626",padding:"0.875rem",borderRadius:"12px",border:"2px solid #fecaca",cursor:"pointer",fontWeight:"600"},children:o("cancelSubscription")})]}),"free"===f&&(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"1rem",color:"#111827"},children:o("upgradeToPremium")}),(0,_v.jsxs)("div",{style:{padding:"1.5rem",background:"linear-gradient(to right, #fef3c7, #fde68a)",borderRadius:"12px",border:"2px solid #fbbf24",marginBottom:"1rem"},children:[(0,_v.jsxs)("p",{style:{fontSize:"1.125rem",color:"#92400e",marginBottom:"0.5rem",fontWeight:"700"},children:["\ud83c\udf89 ",o("unlockPremium")]}),(0,_v.jsx)("ul",{style:{fontSize:"0.875rem",color:"#78350f",marginLeft:"1.25rem"},children:o("premiumFeatures").map((e,t)=>(0,_v.jsx)("li",{children:e},t))})]}),(0,_v.jsx)("button",{onClick:()=>Dt(!0),style:{width:"100%",background:"linear-gradient(to right, #ec4899, #a855f7)",color:"white",padding:"0.875rem",borderRadius:"12px",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},children:o("upgradeButton")})]}),Pe&&(0,_v.jsx)("div",{style:{padding:"1rem",background:"#fef2f2",border:"2px solid #fecaca",borderRadius:"12px",color:"#b91c1c",fontWeight:"600",textAlign:"center"},children:Pe})]})]})}),C&&(0,_v.jsx)(ax,{user:a,userData:D,onClose:()=>_(!1),onShowTerms:()=>R(!0),onShowPrivacy:()=>P(!0)}),j&&(0,_v.jsx)(lx,{onClose:()=>R(!1)}),A&&(0,_v.jsx)(cx,{onClose:()=>P(!1)})]}):ce?(0,_v.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"2rem",paddingTop:"calc(2rem + env(safe-area-inset-top))",direction:s?"rtl":"ltr"},children:(0,_v.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Me,{style:{color:"#ec4899"},size:32,fill:"currentColor"}),(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ec4899"},children:o("mySavedDates")})]}),(0,_v.jsxs)("button",{onClick:()=>ue(!1),style:{background:"white",padding:"0.5rem 1.5rem",borderRadius:"9999px",border:"none",cursor:"pointer",fontWeight:"600"},children:["\u2190 ",o("back")]})]}),0===ae.length?(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"4rem 2rem",textAlign:"center"},children:[(0,_v.jsx)(Me,{size:64,style:{color:"#ec4899",margin:"0 auto 1rem",opacity:.5}}),(0,_v.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:o("noSavedDates")}),(0,_v.jsx)("p",{style:{color:"#6b7280",marginBottom:"2rem"},children:o("noSavedDatesDesc")}),(0,_v.jsx)("button",{onClick:()=>ue(!1),style:{background:"linear-gradient(to right, #ec4899, #a855f7)",color:"white",fontWeight:"bold",padding:"0.75rem 2rem",borderRadius:"9999px",border:"none",cursor:"pointer"},children:o("findPerfectDate")})]}):(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:ae.map(e=>{if(e.isItinerary)return(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2rem",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,_v.jsxs)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:["\ud83d\uddd3\ufe0f ",e.name]}),(0,_v.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:(0,_v.jsx)("button",{onClick:()=>Qt(e.place_id),style:{background:"#fef2f2",color:"#dc2626",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"9999px",border:"2px solid #fecaca",cursor:"pointer"},children:o("remove")})})]}),(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:e.stops.map((e,t)=>(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",padding:"1rem",background:"#f9fafb",borderRadius:"12px"},children:[(0,_v.jsx)("div",{style:{fontSize:"2rem"},children:e.icon}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[(0,_v.jsx)(Oe,{size:16,style:{color:"#6b7280"}}),(0,_v.jsx)("span",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"600"},children:e.time})]}),(0,_v.jsx)("h4",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"0.25rem"},children:e.title}),(0,_v.jsx)("p",{style:{fontWeight:"600",color:"#111827",marginBottom:"0.25rem"},children:e.place.name}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:e.place.vicinity})]})]},t))})]},e.place_id);const{lat:t,lng:n}=e.geometry.location,r=tn(e),i=nn(e.name);return(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",overflow:"hidden",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},children:[(0,_v.jsxs)("div",{style:{position:"relative",height:"300px"},children:[r?(0,_v.jsx)("img",{src:r?"".concat(r).concat(r.includes("?")?"&":"?","token=").concat(k):"",alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,_v.jsx)("div",{style:{display:r?"none":"flex",width:"100%",height:"100%",background:"linear-gradient(135deg, ".concat(i[0],", ").concat(i[1],")"),alignItems:"center",justifyContent:"center",fontSize:"3rem",color:"white",fontWeight:"bold"},children:e.name.charAt(0).toUpperCase()}),e.rating&&(0,_v.jsxs)("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",alignItems:"center",gap:"0.25rem",background:"white",padding:"0.5rem 1rem",borderRadius:"9999px"},children:[(0,_v.jsx)(Fe,{size:18,style:{color:"#eab308"},fill:"currentColor"}),(0,_v.jsx)("span",{style:{fontWeight:"bold"},children:e.rating})]})]}),(0,_v.jsxs)("div",{style:{padding:"2rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.875rem",fontWeight:"bold",marginBottom:"0.75rem"},children:e.name}),(0,_v.jsxs)("p",{style:{color:"#6b7280",display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[(0,_v.jsx)(Ue,{size:20,style:{color:"#ec4899"}}),e.vicinity]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,_v.jsxs)("button",{onClick:()=>rn(t,n),style:{flex:1,minWidth:"120px",background:"linear-gradient(to right, #ec4899, #d946ef)",color:"white",fontWeight:"bold",padding:"1rem",borderRadius:"9999px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Be,{size:20}),o("directions")]}),e.website&&(0,_v.jsxs)("button",{onClick:()=>window.open(e.website,"_blank"),style:{flex:1,minWidth:"120px",background:"linear-gradient(to right, #a855f7, #7c3aed)",color:"white",fontWeight:"bold",padding:"1rem",borderRadius:"9999px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,_v.jsx)(We,{size:20}),o("website")]}),(0,_v.jsx)("button",{onClick:()=>Qt(e.place_id),style:{background:"#fef2f2",color:"#dc2626",fontWeight:"bold",padding:"1rem 1.5rem",borderRadius:"9999px",border:"2px solid #fecaca",cursor:"pointer"},children:o("remove")})]})]})]},e.place_id)})})]})}):te&&Y?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{ref:z,style:{position:"absolute",top:0,left:0,height:"1px",width:"1px"}}),(0,_v.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff)",padding:"1rem",paddingTop:"calc(1rem + env(safe-area-inset-top))",direction:s?"rtl":"ltr"},children:(0,_v.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Me,{style:{color:"#ec4899"},size:32,fill:"currentColor"}),(0,_v.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ec4899"},children:o("yourPerfectDate")})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,_v.jsxs)("button",{onClick:()=>$t(!0),disabled:X,style:{background:X?"#d1d5db":"linear-gradient(to right, #3b82f6, #2563eb)",color:"white",padding:"0.5rem 1.5rem",borderRadius:"9999px",border:"none",cursor:X?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Ve,{size:18}),o(X?"loading":"refresh")]}),(0,_v.jsxs)("button",{onClick:Yt,style:{background:"linear-gradient(to right, #10b981, #059669)",color:"white",padding:"0.5rem 1.5rem",borderRadius:"9999px",border:"none",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(qe,{size:18}),o("saveItinerary")]}),(0,_v.jsxs)("button",{onClick:()=>ne(!1),style:{background:"white",padding:"0.5rem 1.5rem",borderRadius:"9999px",border:"none",cursor:"pointer",fontWeight:"600"},children:["\u2190 ",o("back")]})]})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"20px",padding:"1.25rem",marginBottom:"1.5rem",boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},children:[(0,_v.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,_v.jsxs)("h2",{style:{fontSize:"2rem",fontWeight:"bold",background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem"},children:["\ud83c\udf89 ",o("dateNightItinerary")]}),(0,_v.jsxs)("p",{style:{color:"#6b7280",fontSize:"1rem"},children:[Y.startTime," - ",Y.endTime," \u2022 ",Y.totalDuration]})]}),(0,_v.jsx)("div",{style:{position:"relative"},children:Y.stops.map((e,t)=>(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",padding:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",color:"white"},children:[(0,_v.jsx)("div",{style:{fontSize:"2.5rem"},children:e.icon}),(0,_v.jsxs)("div",{style:{flex:1},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[(0,_v.jsx)(Oe,{size:18}),(0,_v.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:"600"},children:[e.time," \u2022 ",e.duration]})]}),(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:e.title})]})]}),(0,_v.jsxs)("div",{style:{padding:"1rem"},children:[(0,_v.jsx)("p",{style:{color:"#6b7280",fontSize:"0.95rem",marginBottom:"1.5rem",lineHeight:"1.6"},children:e.description}),(0,_v.jsx)("div",{style:{position:"relative",height:"320px",borderRadius:"16px",overflow:"hidden",marginBottom:"1.5rem"},children:(()=>{const n=tn(e.place),r=nn(e.place.name),i="main-stop-".concat(t);return(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{id:i,style:{width:"100%",height:"100%",background:"linear-gradient(135deg, ".concat(r[0],", ").concat(r[1],")"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"4rem",color:"white",fontWeight:"bold",position:"absolute",top:0,left:0,zIndex:1},children:e.place.name.charAt(0).toUpperCase()}),n&&(0,_v.jsx)("img",{src:n,alt:e.place.name,crossOrigin:"anonymous",referrerPolicy:"no-referrer",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",position:"absolute",top:0,left:0,zIndex:2},onLoad:e=>{const t=document.getElementById(i);t&&(t.style.display="none")},onError:e=>{e.target.style.display="none"}}),e.place.rating&&(0,_v.jsxs)("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",alignItems:"center",gap:"0.25rem",background:"white",padding:"0.5rem 1rem",borderRadius:"9999px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:10},children:[(0,_v.jsx)(Fe,{size:18,style:{color:"#eab308"},fill:"currentColor"}),(0,_v.jsx)("span",{style:{fontWeight:"bold"},children:e.place.rating})]})]})})()}),(0,_v.jsx)("h4",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"0.5rem"},children:e.place.name}),(0,_v.jsxs)("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6b7280",fontSize:"0.875rem",marginBottom:"1.5rem"},children:[(0,_v.jsx)(Ue,{size:16,style:{color:"#ec4899"}}),e.place.vicinity]}),e.place.isEvent&&(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem",padding:"0.75rem",background:"linear-gradient(to right, #fef3c7, #fde68a)",borderRadius:"8px",border:"2px solid #fbbf24"},children:[e.place.eventDate&&(0,_v.jsxs)("p",{style:{color:"#92400e",fontWeight:"700",fontSize:"0.875rem",marginBottom:"0.25rem",margin:0},children:["\ud83d\udcc5 ",new Date(e.place.eventDate+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}),e.place.eventTime&&" \u2022 ".concat(e.place.eventTime)]}),e.place.priceRange&&(0,_v.jsxs)("p",{style:{color:"#059669",fontWeight:"700",fontSize:"0.875rem",margin:0},children:["\ud83c\udf9f\ufe0f ",e.place.priceRange]})]}),(0,_v.jsx)("div",{onClick:()=>rn(e.place.geometry.location.lat,e.place.geometry.location.lng),style:{cursor:"pointer",marginBottom:"1.5rem",borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(0,_v.jsx)("img",{src:en(e.place.geometry.location.lat,e.place.geometry.location.lng),alt:"Map",style:{width:"100%",height:"200px",objectFit:"cover"}})}),e.challenges&&e.challenges.length>0&&(0,_v.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,_v.jsx)("h4",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#111827"},children:"\ud83c\udfaf Challenges"}),(0,_v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.challenges.map(e=>{const t=tt.includes(e.id);return(0,_v.jsxs)("div",{style:{padding:"1rem",background:t?"linear-gradient(135deg, #06D6A020, #06D6A010)":"linear-gradient(135deg, #FF6B3520, #FF8C4210)",borderRadius:"12px",border:t?"2px solid #06D6A060":"2px solid #FF6B3540",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem"},children:[(0,_v.jsx)("p",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#111827",margin:0,textDecoration:t?"line-through":"none",opacity:t?.7:1,flex:1,paddingRight:"0.5rem"},children:e.text}),(0,_v.jsx)("button",{onClick:()=>(async(e,t)=>{try{const e=[...tt,t];nt(e);const n=[...Db.food,...Db.drinks,...Db.entertainment,...Db.activity,...Db.outdoor,...Db.cafe,...Db.universal].find(e=>e.id===t);n&&(await Ht(n.points,"Completed: ".concat(n.text)),lt({points:n.points,message:n.text.substring(0,30)+"..."}),st(!0),setTimeout(()=>{st(!1)},3e3))}catch($){console.error("Error completing challenge:",$)}})(0,e.id),disabled:t,style:{padding:"0.5rem 1rem",background:t?"#06D6A0":"linear-gradient(135deg, #FF6B35, #FF8C42)",color:"white",border:"none",borderRadius:"8px",fontWeight:"700",fontSize:"0.875rem",cursor:t?"not-allowed":"pointer",opacity:t?.6:1,transition:"all 0.3s ease",whiteSpace:"nowrap",flexShrink:0},children:t?"\u2713 +".concat(e.points):"+".concat(e.points," XP")})]},e.id)})})]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,_v.jsxs)("button",{onClick:()=>rn(e.place.geometry.location.lat,e.place.geometry.location.lng),style:{flex:1,minWidth:"120px",background:"linear-gradient(to right, #ec4899, #d946ef)",color:"white",fontWeight:"600",padding:"0.75rem 1rem",borderRadius:"9999px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[(0,_v.jsx)(Be,{size:16}),o("directions")]}),e.place.website&&(0,_v.jsxs)("button",{onClick:()=>window.open(e.place.website,"_blank"),style:{flex:1,minWidth:"120px",background:"linear-gradient(to right, #a855f7, #7c3aed)",color:"white",fontWeight:"600",padding:"0.75rem 1rem",borderRadius:"9999px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[(0,_v.jsx)(We,{size:16}),e.place.isEvent?o("tickets"):o("website")]}),(0,_v.jsx)("button",{onClick:()=>Kt(e.place),disabled:Xt(e.place.place_id),style:{background:Xt(e.place.place_id)?"#f3f4f6":"linear-gradient(to right, #10b981, #059669)",color:Xt(e.place.place_id)?"#9ca3af":"white",fontWeight:"600",padding:"0.75rem 1rem",borderRadius:"9999px",border:"none",cursor:Xt(e.place.place_id)?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem"},children:Xt(e.place.place_id)?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(He,{size:16}),o("saved")]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(qe,{size:16}),o("save")]})})]})]})]}),t<Y.stops.length-1&&(0,_v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"1.5rem 0"},children:(0,_v.jsx)(Ge,{size:32,style:{color:"#ec4899"}})})]},t))})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2.5rem",marginBottom:"2rem",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,_v.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83c\udf89"}),(0,_v.jsx)("h3",{style:{fontSize:"2rem",fontWeight:"900",marginBottom:"1rem",background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Date Finished!"}),(0,_v.jsx)("p",{style:{fontSize:"1.1rem",color:"#6b7280",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"},children:"End here or continue on - check out the alternative options below or generate another date"})]}),Y.alternatives&&Y.alternatives.length>0&&(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",padding:"2rem",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},children:[(0,_v.jsxs)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1.5rem",color:"#111827"},children:["\u2728 ",o("alternativeOptions")]}),(0,_v.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:o("alternativeDescription")}),(0,_v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:Y.alternatives.slice(0,6).map(e=>{tn(e),nn(e.name);return(0,_v.jsxs)("div",{style:{background:"#f9fafb",borderRadius:"16px",overflow:"hidden",border:"2px solid #e5e7eb"},children:[(0,_v.jsx)("div",{style:{position:"relative",height:"150px"},children:(()=>{const t=tn(e),n=nn(e.name),r="alt-".concat(e.place_id);return(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{id:r,style:{width:"100%",height:"100%",background:"linear-gradient(135deg, ".concat(n[0],", ").concat(n[1],")"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",color:"white",fontWeight:"bold",position:"absolute",top:0,left:0,zIndex:1},children:e.name.charAt(0).toUpperCase()}),t&&(0,_v.jsx)("img",{src:t,alt:e.name,crossOrigin:"anonymous",referrerPolicy:"no-referrer",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",position:"absolute",top:0,left:0,zIndex:2},onLoad:t=>{console.log("\u2705 ALT IMAGE LOADED: ".concat(e.name));const n=document.getElementById(r);n&&(n.style.display="none")},onError:n=>{console.error("\u274c ALT IMAGE FAILED: ".concat(e.name),t),n.target.style.display="none"}}),e.rating&&(0,_v.jsxs)("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem",background:"white",padding:"0.25rem 0.75rem",borderRadius:"9999px",zIndex:10},children:[(0,_v.jsx)(Fe,{size:14,style:{color:"#eab308"},fill:"currentColor"}),(0,_v.jsx)("span",{style:{fontWeight:"bold",fontSize:"0.875rem"},children:e.rating})]})]})})()}),(0,_v.jsxs)("div",{style:{padding:"1rem"},children:[(0,_v.jsx)("h4",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"0.5rem"},children:e.name}),(0,_v.jsxs)("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,_v.jsx)(Ue,{size:14}),e.vicinity]}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,_v.jsx)("button",{onClick:()=>rn(e.geometry.location.lat,e.geometry.location.lng),style:{flex:1,background:"#ec4899",color:"white",fontWeight:"600",padding:"0.5rem",borderRadius:"9999px",border:"none",cursor:"pointer",fontSize:"0.75rem"},children:o("directions")}),(0,_v.jsx)("button",{onClick:()=>Kt(e),disabled:Xt(e.place_id),style:{flex:1,background:Xt(e.place_id)?"#e5e7eb":"#10b981",color:Xt(e.place_id)?"#9ca3af":"white",fontWeight:"600",padding:"0.5rem",borderRadius:"9999px",border:"none",cursor:Xt(e.place_id)?"not-allowed":"pointer",fontSize:"0.75rem"},children:Xt(e.place_id)?o("saved"):o("save")})]})]})]},e.place_id)})})]}),(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",position:"fixed",bottom:"2rem",right:"2rem",zIndex:100},children:[(0,_v.jsxs)("button",{onClick:()=>(e=>{"free"!==f?(console.log("Creating surprise date from:",e),xt("create"),vt(!0),St({itinerary:e})):Dt(!0)})(Y),style:{background:"linear-gradient(135deg, #ec4899 0%, #f472b6 100%)",color:"white",fontWeight:"900",fontSize:"1.1rem",padding:"1.25rem 2.5rem",borderRadius:"50px",border:"none",cursor:"pointer",boxShadow:"0 8px 30px rgba(236,72,153,0.4)",display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-4px) scale(1.05)",e.target.style.boxShadow="0 12px 40px rgba(236,72,153,0.6)"},onMouseLeave:e=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 8px 30px rgba(236,72,153,0.4)"},children:[(0,_v.jsx)(Ke,{size:24}),"\ud83c\udf81 Make This a Surprise"]}),(0,_v.jsxs)("button",{onClick:Gt,style:{background:"linear-gradient(135deg, #06D6A0 0%, #1B9AAA 100%)",color:"white",fontWeight:"900",fontSize:"1.1rem",padding:"1.25rem 2.5rem",borderRadius:"50px",border:"none",cursor:"pointer",boxShadow:"0 8px 30px rgba(6,214,160,0.4)",display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-4px) scale(1.05)",e.target.style.boxShadow="0 12px 40px rgba(6,214,160,0.6)"},onMouseLeave:e=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 8px 30px rgba(6,214,160,0.4)"},children:[(0,_v.jsx)(Ye,{size:24}),"Complete Date"]})]})]})}),ot&&at&&(0,_v.jsxs)("div",{style:{position:"fixed",top:"100px",right:"20px",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"white",padding:"1.5rem 2rem",borderRadius:"16px",boxShadow:"0 8px 30px rgba(255,215,0,0.5)",zIndex:1e4,animation:"slideInRight 0.5s ease-out",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{fontSize:"2rem"},children:"\u26a1"}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("p",{style:{fontSize:"1.5rem",fontWeight:"900",margin:0,marginBottom:"0.25rem"},children:["+",at.points," XP"]}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",margin:0,opacity:.9},children:at.message})]})]}),Je&&Ze&&(0,_v.jsx)(Vb,{oldLevel:Ze.oldLevel,newLevel:Ze.newLevel,onClose:()=>{console.log("\ud83d\udeaa Level up closed"),$e(!1)}}),ct&&(0,_v.jsx)(Zb,{currentUser:a,mode:dt,dateToSave:mt,selectedMemory:ft,onClose:Ot}),b&&w?(0,_v.jsx)(sb,{user:a,dateData:w,onClose:()=>{x(!1),S(null),w.completedAt&&(ne(!1),Q(null),K([]))}}):null,yt&&(0,_v.jsx)(nx,{currentUser:a,mode:bt,activeSurprise:wt,prefilledItinerary:(null===wt||void 0===wt?void 0:wt.itinerary)||null,onClose:Ft}),Ct&&(0,_v.jsx)(rx,{currentUser:a,streakData:Tt,onClose:Ut})]}):Pt?(0,_v.jsx)(tb,{user:a,onClose:()=>Dt(!1)}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(180deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",padding:"1rem",paddingTop:"calc(1rem + env(safe-area-inset-top))"},children:(0,_v.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:"200px"},children:[(0,_v.jsx)(Me,{style:{color:"white"},size:32,fill:"white"}),(0,_v.jsx)("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"white",textShadow:"0 2px 4px rgba(0,0,0,0.2)",margin:0,whiteSpace:"nowrap"},children:"DateMaker"})]}),Le&&(0,_v.jsx)("div",{style:{flex:"1 1 auto",maxWidth:"400px",minWidth:"250px",order:window.innerWidth<768?3:2},children:(0,_v.jsx)(qb,{level:Rb(Le.xp||0),progress:Ab(Le.xp||0),xp:Le.xp||0,onClick:()=>t("/stats")})}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",order:2},children:[(0,_v.jsx)(Eb,{currentLanguage:n,onLanguageChange:e=>{r(e),localStorage.setItem("datemaker_language",e)}}),(0,_v.jsx)(Xb,{user:a,subscriptionStatus:f,savedDatesCount:Math.max(0,ae.length-T),notificationCount:Rt.total,surpriseCount:kt,onNavigate:e=>{"spin"===e&&ze(!0),"invite"===e&&alert("Friend invites coming soon!"),"stats"===e&&t("/stats"),"achievements"===e&&t("/achievements"),"social"===e&&("free"===f?(alert("Social is a premium feature!"),Dt(!0)):v(!0)),"saved"===e&&(async()=>{if(ue(!0),ae.length!==T){I(ae.length);try{const e=Dm(kv,"users",a.uid);await qg(e,{lastViewedSavedCount:ae.length},{merge:!0})}catch($){console.error("Error updating last viewed saved count:",$)}}})(),"scrapbook"===e&&("free"!==f?(console.log("Opening scrapbook memories"),ht("view"),ut(!0)):Dt(!0)),"surprise"===e&&("free"!==f?(console.log("Opening surprise date tracker"),xt("track"),vt(!0)):Dt(!0)),"streaks"===e&&("free"!==f?(console.log("Opening streaks & goals"),_t(!0),Bt()):Dt(!0)),"profile"===e&&Ee(!0)},onLogout:async()=>{try{null!==a&&void 0!==a&&a.uid&&await qg(Dm(kv,"userStatus",a.uid),{online:!1,lastSeen:Zg()},{merge:!0}),await vo(Sv),ne(!1),ue(!1),Ee(!1),v(!1),K([]),Q(null),M(""),B([]),V([]),F([]),H(""),he(!1),ge("anytime"),ve("7:00 PM"),xe("4")}catch(e){console.error("Logout error:",e)}}})]})]})}),(0,_v.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"3rem 1.5rem"},children:[(0,_v.jsxs)("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(to right, #ec4899, #a855f7, #3b82f6)",borderRadius:"9999px",padding:"3rem 2rem",marginBottom:"2rem",boxShadow:"0 20px 40px rgba(0,0,0,0.15)"},children:(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[(0,_v.jsx)(Qe,{style:{color:"white"},size:28}),(0,_v.jsx)("h2",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"white",margin:0},children:"Complete Date Night Planning"})]})}),(0,_v.jsxs)("h1",{style:{fontSize:"4rem",fontWeight:"900",lineHeight:"1.1",marginBottom:"1.5rem"},children:[(0,_v.jsx)("div",{style:{background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:o("heroTitle1")}),(0,_v.jsx)("div",{style:{background:"linear-gradient(to right, #a855f7, #3b82f6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:o("heroTitle2")})]}),(0,_v.jsxs)("h2",{style:{fontSize:"3rem",fontWeight:"900",color:"#111827",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[o("heroSubtitle"),(0,_v.jsx)("span",{style:{fontSize:"3rem"},children:"\u2728"})]}),(0,_v.jsx)("p",{style:{fontSize:"1.5rem",color:"#374151",lineHeight:"1.8",maxWidth:"900px",margin:"0 auto"},children:o("heroDescription")})]}),(0,_v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"3rem"},children:[(0,_v.jsx)("div",{style:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",height:"200px"},children:(0,_v.jsx)("img",{src:"https://images.unsplash.com/photo-1572116469696-31de0f17cc34?w=800&q=80",alt:"Cocktails",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_v.jsx)("div",{style:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",height:"200px"},children:(0,_v.jsx)("img",{src:"https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?w=800&q=80",alt:"Party",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_v.jsx)("div",{style:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",height:"200px"},children:(0,_v.jsx)("img",{src:"https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=800&q=80",alt:"Cinema",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_v.jsx)("div",{style:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",height:"200px"},children:(0,_v.jsx)("img",{src:"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&q=80",alt:"Adventure",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_v.jsx)("div",{style:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",height:"200px"},children:(0,_v.jsx)("img",{src:"https://images.unsplash.com/photo-1544025162-d76694265947?w=800&q=80",alt:"Cooking",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_v.jsx)("div",{style:{borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",height:"200px"},children:(0,_v.jsx)("img",{src:"https://images.unsplash.com/photo-1522778119026-d647f0596c20?w=800&q=80",alt:"Stadium",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),"free"===f&&(0,_v.jsxs)("div",{style:{background:"linear-gradient(135deg, #ec4899 0%, #a855f7 100%)",padding:"2rem",borderRadius:"20px",marginBottom:"2rem",textAlign:"center",border:"none",boxShadow:"0 10px 30px rgba(236, 72, 153, 0.3)",color:"white"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.75rem",fontWeight:"900",marginBottom:"0.75rem",textShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:"\ud83c\udf89 Start Your 7-Day FREE Trial!"}),(0,_v.jsx)("p",{style:{marginBottom:"1.25rem",fontSize:"1.05rem",opacity:.95},children:"Enter your card now - won't be charged until trial ends"}),(0,_v.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1.5rem",flexWrap:"wrap",marginBottom:"1.5rem",fontSize:"0.95rem"},children:[(0,_v.jsx)("span",{children:"\u2728 Unlimited dates"}),(0,_v.jsx)("span",{children:"\ud83d\udcc5 Complete itineraries"}),(0,_v.jsx)("span",{children:"\ud83d\udc65 Social features"})]}),(0,_v.jsx)("button",{onClick:()=>Dt(!0),style:{background:"white",color:"#ec4899",fontWeight:"800",padding:"1rem 2.5rem",borderRadius:"9999px",border:"none",cursor:"pointer",fontSize:"1.1rem",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease"},children:"Start FREE Trial \u2192"}),(0,_v.jsx)("p",{style:{marginTop:"1rem",fontSize:"0.875rem",opacity:.9},children:"\ud83d\udcb3 Cancel anytime \u2022 \ud83d\udd12 Secure payment \u2022 \u23f0 $9.99/mo after trial"})]}),(0,_v.jsxs)("div",{style:{background:"white",borderRadius:"24px",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",padding:"3rem"},children:[(0,_v.jsxs)("h2",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"2rem",background:"linear-gradient(to right, #ec4899, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:["\ud83d\udc95 ",o("heroSubtitle")]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#f0f9ff",borderRadius:"16px",border:"2px solid #bae6fd"},children:[(0,_v.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#0c4a6e",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,_v.jsx)(Oe,{size:24,style:{color:"#0369a1"}}),"When & How Long"]}),(0,_v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,_v.jsxs)("div",{children:[(0,_v.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#0c4a6e",marginBottom:"0.5rem",display:"block"},children:"Start Time"}),(0,_v.jsxs)("select",{value:ye,onChange:e=>ve(e.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #bae6fd",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",color:"#0c4a6e",background:"white",cursor:"pointer"},children:[(0,_v.jsx)("option",{value:"6:00 AM",children:"6:00 AM"}),(0,_v.jsx)("option",{value:"7:00 AM",children:"7:00 AM"}),(0,_v.jsx)("option",{value:"8:00 AM",children:"8:00 AM"}),(0,_v.jsx)("option",{value:"9:00 AM",children:"9:00 AM"}),(0,_v.jsx)("option",{value:"10:00 AM",children:"10:00 AM"}),(0,_v.jsx)("option",{value:"11:00 AM",children:"11:00 AM"}),(0,_v.jsx)("option",{value:"12:00 PM",children:"12:00 PM"}),(0,_v.jsx)("option",{value:"1:00 PM",children:"1:00 PM"}),(0,_v.jsx)("option",{value:"2:00 PM",children:"2:00 PM"}),(0,_v.jsx)("option",{value:"3:00 PM",children:"3:00 PM"}),(0,_v.jsx)("option",{value:"4:00 PM",children:"4:00 PM"}),(0,_v.jsx)("option",{value:"5:00 PM",children:"5:00 PM"}),(0,_v.jsx)("option",{value:"6:00 PM",children:"6:00 PM"}),(0,_v.jsx)("option",{value:"7:00 PM",children:"7:00 PM"}),(0,_v.jsx)("option",{value:"8:00 PM",children:"8:00 PM"}),(0,_v.jsx)("option",{value:"9:00 PM",children:"9:00 PM"}),(0,_v.jsx)("option",{value:"10:00 PM",children:"10:00 PM"}),(0,_v.jsx)("option",{value:"11:00 PM",children:"11:00 PM"})]})]}),(0,_v.jsxs)("div",{children:[(0,_v.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#0c4a6e",marginBottom:"0.5rem",display:"block"},children:"Duration (Hours)"}),(0,_v.jsxs)("select",{value:be,onChange:e=>xe(e.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #bae6fd",borderRadius:"12px",fontSize:"1rem",fontWeight:"600",color:"#0c4a6e",background:"white",cursor:"pointer"},children:[(0,_v.jsx)("option",{value:"2",children:"2 hours"}),(0,_v.jsx)("option",{value:"3",children:"3 hours"}),(0,_v.jsx)("option",{value:"4",children:"4 hours"}),(0,_v.jsx)("option",{value:"5",children:"5 hours"}),(0,_v.jsx)("option",{value:"6",children:"6 hours"}),(0,_v.jsx)("option",{value:"7",children:"7 hours"}),(0,_v.jsx)("option",{value:"8",children:"8 hours"})]})]})]}),(0,_v.jsxs)("p",{style:{fontSize:"0.875rem",color:"#075985",marginTop:"0.75rem",fontWeight:"500"},children:["\ud83d\udcc5 Your date will run from ",ye," to ",Lt(ye,parseInt(be))]})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.5rem",fontWeight:"bold",color:"#111827",marginBottom:"1rem"},children:[(0,_v.jsx)(Ue,{style:{color:"#ec4899"},size:24}),o("location")]}),(0,_v.jsx)("input",{type:"text",value:L,onChange:e=>M(e.target.value),placeholder:o("locationPlaceholder"),style:{width:"100%",padding:"1rem 1.5rem",border:"2px solid #fbcfe8",borderRadius:"9999px",fontSize:"1.125rem",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"})]}),(0,_v.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,_v.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#111827",marginBottom:"1rem"},children:"\u2728 Start planning your date!"}),(0,_v.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,_v.jsx)("label",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",display:"block"},children:o("addCustomActivity")}),(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,_v.jsx)("input",{type:"text",value:q,onChange:e=>H(e.target.value),onKeyPress:e=>{"Enter"===e.key&&Jt()},placeholder:o("customActivityPlaceholder"),style:{flex:1,padding:"0.875rem 1.25rem",border:"2px solid #fbcfe8",borderRadius:"9999px",fontSize:"1rem",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.border="2px solid #ec4899",onBlur:e=>e.target.style.border="2px solid #fbcfe8"}),(0,_v.jsx)("button",{onClick:Jt,style:{padding:"0.875rem 1.5rem",background:"linear-gradient(to right, #ec4899, #a855f7)",color:"white",fontWeight:"600",borderRadius:"9999px",border:"none",cursor:"pointer",whiteSpace:"nowrap"},children:o("add")})]}),W.length>0&&(0,_v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",marginTop:"1rem"},children:W.map((e,t)=>(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",borderRadius:"9999px",background:"linear-gradient(to right, #3b82f6, #2563eb)",color:"white",fontWeight:"600",boxShadow:"0 4px 6px rgba(59,130,246,0.3)"},children:[e,(0,_v.jsx)("button",{onClick:()=>(e=>{V(W.filter(t=>t!==e))})(e),style:{background:"rgba(255,255,255,0.3)",border:"none",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:"\xd7"})]},t))})]}),(0,_v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem",background:"#eff6ff",borderRadius:"12px",border:"2px solid #bfdbfe",marginTop:"1.5rem"},children:[(0,_v.jsx)("input",{type:"checkbox",id:"includeEvents",checked:de,onChange:e=>he(e.target.checked),style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#3b82f6"}}),(0,_v.jsxs)("label",{htmlFor:"includeEvents",style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",cursor:"pointer",userSelect:"none",margin:0},children:["\ud83c\udf89 ",o("includeEvents")]})]}),de&&(0,_v.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1.5rem",background:"#fdf4ff",borderRadius:"16px",border:"2px solid #f0abfc"},children:[(0,_v.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#86198f",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:["\ud83d\udcc5 ",o("whenLookingForEvents")]}),(0,_v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,_v.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,_v.jsx)("button",{onClick:()=>{ge("anytime"),pe("")},style:{padding:"0.75rem 1.5rem",borderRadius:"9999px",fontWeight:"600",border:"anytime"===me?"none":"2px solid #f0abfc",background:"anytime"===me?"linear-gradient(to right, #a855f7, #9333ea)":"white",color:"anytime"===me?"white":"#86198f",cursor:"pointer",transition:"all 0.2s"},children:o("anytime")}),(0,_v.jsx)("button",{onClick:()=>ge("today"),style:{padding:"0.75rem 1.5rem",borderRadius:"9999px",fontWeight:"600",border:"today"===me?"none":"2px solid #f0abfc",background:"today"===me?"linear-gradient(to right, #a855f7, #9333ea)":"white",color:"today"===me?"white":"#86198f",cursor:"pointer",transition:"all 0.2s"},children:o("today")}),(0,_v.jsx)("button",{onClick:()=>ge("thisweek"),style:{padding:"0.75rem 1.5rem",borderRadius:"9999px",fontWeight:"600",border:"thisweek"===me?"none":"2px solid #f0abfc",background:"thisweek"===me?"linear-gradient(to right, #a855f7, #9333ea)":"white",color:"thisweek"===me?"white":"#86198f",cursor:"pointer",transition:"all 0.2s"},children:o("thisWeek")}),(0,_v.jsx)("button",{onClick:()=>ge("thismonth"),style:{padding:"0.75rem 1.5rem",borderRadius:"9999px",fontWeight:"600",border:"thismonth"===me?"none":"2px solid #f0abfc",background:"thismonth"===me?"linear-gradient(to right, #a855f7, #9333ea)":"white",color:"thismonth"===me?"white":"#86198f",cursor:"pointer",transition:"all 0.2s"},children:o("thisMonth")}),(0,_v.jsx)("button",{onClick:()=>ge("custom"),style:{padding:"0.75rem 1.5rem",borderRadius:"9999px",fontWeight:"600",border:"custom"===me?"none":"2px solid #f0abfc",background:"custom"===me?"linear-gradient(to right, #a855f7, #9333ea)":"white",color:"custom"===me?"white":"#86198f",cursor:"pointer",transition:"all 0.2s"},children:o("pickDate")})]}),"custom"===me&&(0,_v.jsxs)("div",{children:[(0,_v.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#86198f",marginBottom:"0.5rem",display:"block"},children:o("selectDate")}),(0,_v.jsx)("input",{type:"date",value:fe,onChange:e=>pe(e.target.value),min:(new Date).toISOString().split("T")[0],style:{width:"100%",padding:"0.875rem 1rem",border:"2px solid #f0abfc",borderRadius:"12px",fontSize:"1rem",outline:"none",boxSizing:"border-box"}})]})]})]})]}),$&&(0,_v.jsx)("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fef2f2",border:"2px solid #fecaca",borderRadius:"16px",color:"#b91c1c",fontWeight:"600",textAlign:"center"},children:$}),(0,_v.jsx)("button",{onClick:()=>$t(!1),disabled:X,style:{width:"100%",background:X?"#d1d5db":"linear-gradient(to right, #ec4899, #a855f7, #3b82f6)",color:"white",fontWeight:"bold",fontSize:"1.25rem",padding:"1.5rem 2rem",borderRadius:"9999px",border:"none",cursor:X?"not-allowed":"pointer",boxShadow:"0 10px 20px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:X?(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)("div",{style:{width:"24px",height:"24px",border:"4px solid white",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o("creating")]}):(0,_v.jsxs)(_v.Fragment,{children:[(0,_v.jsx)(Qe,{size:24}),o("generateDate")]})})]})]}),Pt&&(0,_v.jsx)(tb,{user:a,onClose:()=>Dt(!1)}),b&&w?(0,_v.jsx)(sb,{user:a,dateData:w,onClose:()=>{x(!1),S(null),w.completedAt&&(ne(!1),Q(null),K([]))}}):null,ot&&at&&(0,_v.jsxs)("div",{style:{position:"fixed",top:"100px",right:"20px",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"white",padding:"1.5rem 2rem",borderRadius:"16px",boxShadow:"0 8px 30px rgba(255,215,0,0.5)",zIndex:1e4,animation:"slideInRight 0.5s ease-out",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_v.jsx)("div",{style:{fontSize:"2rem"},children:"\u26a1"}),(0,_v.jsxs)("div",{children:[(0,_v.jsxs)("p",{style:{fontSize:"1.5rem",fontWeight:"900",margin:0,marginBottom:"0.25rem"},children:["+",at.points," XP"]}),(0,_v.jsx)("p",{style:{fontSize:"0.875rem",margin:0,opacity:.9},children:at.message})]})]}),Je&&Ze&&(0,_v.jsx)(Vb,{oldLevel:Ze.oldLevel,newLevel:Ze.newLevel,onClose:()=>{console.log("\ud83d\udeaa Level up closed"),$e(!1)}}),Ne&&(0,_v.jsx)(Kb,{onClose:()=>ze(!1),onSelectActivity:e=>{W.includes(e)||V([...W,e]),Le&&Ht(jb,"Used Wheel: ".concat(e))},language:n}),ct&&(0,_v.jsx)(Zb,{currentUser:a,mode:dt,dateToSave:mt,selectedMemory:ft,onClose:Ot}),yt&&(0,_v.jsx)(nx,{currentUser:a,mode:bt,activeSurprise:wt,onClose:Ft}),Ct&&(0,_v.jsx)(rx,{currentUser:a,streakData:Tt,onClose:Ut}),C&&(0,_v.jsx)(ax,{user:a,userData:D,onClose:()=>_(!1),onShowTerms:()=>R(!0),onShowPrivacy:()=>P(!0)}),j&&(0,_v.jsx)(lx,{onClose:()=>R(!1)}),A&&(0,_v.jsx)(cx,{onClose:()=>P(!1)}),(0,_v.jsx)("style",{children:"\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes slideInRight {\n          from {\n            transform: translateX(400px);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        html, body {\n          scroll-behavior: auto !important;\n        }\n      "})]})}const hx=()=>{const e=ee(),[t,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(!0),[s,a]=(0,i.useState)(null);return(0,i.useEffect)(()=>{const t=yo(Sv,t=>{t?(console.log("User logged in:",t.uid),a(t)):(console.log("No user logged in, redirecting to home"),e("/"))});return()=>t()},[e]),(0,i.useEffect)(()=>{if(!s)return;console.log("Setting up stats listener for user:",s.uid);const e=Yg(Dm(kv,"users",s.uid),e=>{if(e.exists()){const t=e.data().gameStats||{xp:0,datesCompleted:0,challengesCompleted:0,placesVisited:0,photosShared:0,currentStreak:0,longestStreak:0,achievements:[],stats:{foodVenues:0,drinkVenues:0,entertainment:0,outdoor:0,activities:0}};console.log("\u2705 Stats loaded:",t),n(t)}else console.log("\u26a0\ufe0f No user document found"),n({xp:0,datesCompleted:0,challengesCompleted:0,placesVisited:0,photosShared:0,currentStreak:0,longestStreak:0,achievements:[],stats:{}});o(!1)},e=>{console.error("\u274c Error loading stats:",e),o(!1)});return()=>e()},[s]),r?(0,_v.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)"},children:[(0,_v.jsxs)("div",{style:{textAlign:"center",color:"white"},children:[(0,_v.jsx)("div",{style:{width:"50px",height:"50px",border:"5px solid rgba(255,255,255,0.3)",borderTop:"5px solid white",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Loading Stats..."})]}),(0,_v.jsx)("style",{children:"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n        "})]}):(0,_v.jsx)(Fb,{gameStats:t,onClose:()=>e("/")})},fx=()=>{const e=ee(),[t,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(!0),[s,a]=(0,i.useState)(null);return(0,i.useEffect)(()=>{const t=yo(Sv,t=>{t?(console.log("User logged in:",t.uid),a(t)):(console.log("No user logged in, redirecting to home"),e("/"))});return()=>t()},[e]),(0,i.useEffect)(()=>{if(!s)return;console.log("Setting up stats listener for user:",s.uid);const e=Yg(Dm(kv,"users",s.uid),e=>{if(e.exists()){const t=e.data().gameStats||{xp:0,datesCompleted:0,challengesCompleted:0,placesVisited:0,photosShared:0,currentStreak:0,longestStreak:0,achievements:[],stats:{foodVenues:0,drinkVenues:0,entertainment:0,outdoor:0,activities:0}};console.log("\u2705 Stats loaded:",t),n(t)}else console.log("\u26a0\ufe0f No user document found"),n({xp:0,datesCompleted:0,challengesCompleted:0,placesVisited:0,photosShared:0,currentStreak:0,longestStreak:0,achievements:[],stats:{}});o(!1)},e=>{console.error("\u274c Error loading stats:",e),o(!1)});return()=>e()},[s]),r?(0,_v.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%)"},children:[(0,_v.jsxs)("div",{style:{textAlign:"center",color:"white"},children:[(0,_v.jsx)("div",{style:{width:"50px",height:"50px",border:"5px solid rgba(255,255,255,0.3)",borderTop:"5px solid white",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),(0,_v.jsx)("p",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Loading Achievements..."})]}),(0,_v.jsx)("style",{children:"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n        "})]}):(0,_v.jsx)(Wb,{userStats:t||{},onClose:()=>e("/")})};(0,xv.F3)("SplashScreen",{web:()=>n.e(484).then(n.bind(n,103)).then(e=>new e.SplashScreenWeb)}).hide().catch(e=>console.log("Splash screen already hidden"));const px=()=>{const{pathname:e}=$();return(0,i.useEffect)(()=>{const e=document.getElementById("root");e&&e.scrollTo(0,0),window.scrollTo(0,0)},[e]),null};console.log("\ud83d\ude80 React app starting...");s.createRoot(document.getElementById("root")).render((0,_v.jsx)(i.StrictMode,{children:(0,_v.jsxs)(we,{children:[(0,_v.jsx)(px,{}),(0,_v.jsxs)(ge,{children:[(0,_v.jsx)(pe,{path:"/",element:(0,_v.jsx)(dx,{})}),(0,_v.jsx)(pe,{path:"/stats",element:(0,_v.jsx)(hx,{})}),(0,_v.jsx)(pe,{path:"/achievements",element:(0,_v.jsx)(fx,{})})]})]})}))})();
//# sourceMappingURL=main.6cf613a0.js.map